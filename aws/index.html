<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>통합 문서</title>
</head>
<body>

<!-- START OF 4-1-1 다중 지역 기반의 아키텍처와 보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4-1-1 다중 지역 기반의 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #fafafa; color: #222; line-height: 1.6; padding: 20px; }
    h1, h2, h3, h4 { color: #004880; }
    code { background: #eee; padding: 2px 5px; border-radius: 4px; }
    img { max-width: 100%; border-radius: 8px; margin: 10px 0; }
    table { width: 100%; border-collapse: collapse; margin: 15px 0; }
    th, td { border: 1px solid #ccc; padding: 8px; }
    th { background-color: #f2f7ff; }
    .highlight { background: #f0f8ff; padding: 10px; border-left: 4px solid #004880; }
    .aws-service { color: #d35400; font-weight: bold; }
    .vendor { color: #2c3e50; font-style: italic; }
  </style>
</head>
<body>
  <h1>4-1-1 다중 지역 기반의 아키텍처와 보안</h1>
  <p>이 절에서는 <strong>AWS 다중 리전 아키텍처</strong>를 활용하여 서비스의 가용성과 내결함성을 극대화하는 보안 설계 원칙을 다룬다. 목표는 재해복구(Disaster Recovery)와 보안 거버넌스 통합을 동시에 달성하는 것이다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>리전 간 장애 격리 및 자동 복구(Active-Active DR)</li>
    <li>데이터 주권 및 규제 준수를 위한 리전 분리</li>
    <li>Cross-region 보안 로깅 및 탐지 자동화</li>
    <li>비즈니스 연속성과 보안 운영의 결합</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <img src="https://d2908q01vomqb2.cloudfront.net/fc074d501302eb2b93e2554793fcaf50b3bf7291/2021/06/22/Figure-2.-Multi-site-active-active-DR-strategy.png" alt="AWS Multi-Region Active-Active DR Strategy">
  <p>이 구조는 <strong>Global DNS, 데이터 복제, IAM 통합, 보안 이벤트 중앙화</strong>를 핵심으로 한다. 각 리전은 동일한 보안 설정과 로깅 체계를 유지하며, 보안 이벤트는 중앙 SIEM으로 수집되어 실시간 분석된다.</p>

  <h2>3. 주요 AWS 서비스 구성</h2>
  <ul>
    <li><span class="aws-service">Route 53</span> – 헬스체크 기반 다중 리전 트래픽 관리</li>
    <li><span class="aws-service">Global Accelerator</span> – 전 세계 사용자 지연시간 최소화</li>
    <li><span class="aws-service">S3 Cross-Region Replication</span> – 데이터 내구성 확보</li>
    <li><span class="aws-service">RDS Global Database</span> – 읽기 전용 복제 및 빠른 복구</li>
    <li><span class="aws-service">IAM + AWS Organizations</span> – 중앙 권한 관리 및 계정 거버넌스</li>
    <li><span class="aws-service">CloudWatch + GuardDuty + Security Hub</span> – 실시간 모니터링 및 위협 탐지</li>
    <li><span class="aws-service">WAF / Shield Advanced</span> – DDoS 및 애플리케이션 공격 방어</li>
  </ul>

  <h2>4. 보안 자동화 및 탐지</h2>
  <p><span class="aws-service">EventBridge</span>와 <span class="aws-service">Lambda</span>를 결합해 각 리전에서 발생하는 보안 이벤트를 자동 대응한다. GuardDuty 경보 발생 시 해당 리전의 인스턴스를 자동 격리하고, <span class="aws-service">Security Hub</span>에서 전체 상태를 시각화한다.</p>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>CSPM + CNAPP 통합:</strong> <span class="aws-service">Security Hub</span>, <span class="aws-service">Config</span>, <span class="vendor">Prisma Cloud</span>를 연동해 리전별 보안 상태를 중앙 관리</li>
    <li><strong>Cross-Region SIEM:</strong> <span class="aws-service">CloudTrail</span> 로그를 <span class="vendor">Splunk Cloud</span>로 집계해 전 리전 탐지 규칙 일원화</li>
    <li><strong>자동화된 DR 검증:</strong> <span class="aws-service">Systems Manager Automation</span>으로 주기적 복구 테스트 수행</li>
    <li><strong>Zero Trust 구현:</strong> <span class="aws-service">Verified Access</span>로 리전별 접근 제어 강화</li>
  </ul>

  <h2>6. 요약</h2>
  <p>다중 리전 보안 아키텍처는 단순 데이터 복제가 아닌, 글로벌 수준의 <strong>보안 일관성, 탐지 자동화, 재해 복구 검증</strong>을 달성해야 한다. 이를 통해 장애 발생 시에도 서비스 보안이 저하되지 않는 탄력적 인프라를 구현한다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 글로벌 금융기관 A사의 다중 리전 DR 보안 설계</h3>
  <p><strong>시나리오:</strong> A사는 서울(ap-northeast-2)과 도쿄(ap-northeast-1) 리전에 걸쳐 금융 트랜잭션 서비스를 운영한다. 두 리전은 Active-Active 구조로 운영되며, 한 리전 장애 시에도 거래 지연 없이 즉시 전환되어야 한다. 또한 ISMS-P, PCI-DSS, FSS(금융보안원) 규제에 따라 암호화, 접근통제, 감사로그 무결성이 확보되어야 한다.</p>

  <p><strong>해설:</strong> 금융기관 A사의 보안 DR 아키텍처는 다음 표의 구성을 따른다.</p>

  <table>
    <thead>
      <tr><th>보안 영역</th><th>적용 서비스</th><th>구현 상세</th></tr>
    </thead>
    <tbody>
      <tr><td>DNS 라우팅</td><td><span class="aws-service">Route 53</span></td><td>리전별 헬스체크 및 지연시간 기반 라우팅으로 트래픽 자동 분배</td></tr>
      <tr><td>데이터 복제</td><td><span class="aws-service">S3 CRR</span>, <span class="aws-service">RDS Global Database</span></td><td>암호화된 전송 및 복제 시점 일관성 검증</td></tr>
      <tr><td>키 관리</td><td><span class="aws-service">KMS Multi-Region Keys</span></td><td>CMK 복제 및 Key Policy 동일화, 로그는 <span class="aws-service">CloudTrail</span>로 감시</td></tr>
      <tr><td>위협 탐지</td><td><span class="aws-service">GuardDuty</span>, <span class="aws-service">Security Hub</span></td><td>두 리전의 탐지 결과를 중앙화하여 상관분석</td></tr>
      <tr><td>자동 대응</td><td><span class="aws-service">EventBridge</span> + <span class="aws-service">Lambda</span></td><td>Critical 이벤트 발생 시 인스턴스 격리 및 보안 그룹 차단</td></tr>
      <tr><td>SIEM 통합</td><td><span class="vendor">Splunk Cloud</span></td><td>CloudTrail 및 VPC Flow Logs를 수집하여 상관 탐지 룰 적용</td></tr>
    </tbody>
  </table>

  <p>또한, 재해 상황 발생 시에는 <span class="aws-service">Systems Manager Automation</span> Runbook을 실행해 DR 절차를 자동 검증한다. 각 리전의 KMS 키는 동일 CMK ID로 복제되어 암호화 정책의 불일치 위험을 제거하며, CloudTrail 로그는 <span class="aws-service">S3 Object Lock</span>을 적용해 삭제 방지(WORM) 상태로 보존한다.</p>

  <p>감사 및 규제 대응은 <span class="aws-service">Security Hub</span>의 PCI-DSS 및 CIS AWS Foundation 표준을 기반으로 수행되며, <span class="vendor">Prisma Cloud</span>에서 컴플라이언스 대시보드를 통해 항목별 위반 내역을 자동 보고한다. 서비스 가용성은 <span class="aws-service">Global Accelerator</span>로 유지하고, <span class="aws-service">Shield Advanced</span>로 DDoS 공격을 완화한다.</p>

  <p class="highlight"><strong>핵심 요약:</strong> A사의 DR 보안 모델은 <strong>복제-탐지-대응</strong>의 3단계 체계를 갖추며, 다중 리전 환경에서도 실시간 탐지와 규제 대응을 보장하는 완전한 보안 아키텍처이다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>CloudTrail 로그를 리전 간 중앙 S3로 복제 및 WORM 보호</li>
    <li>Multi-Region KMS 키 정책 일관성 검증</li>
    <li>Security Hub PCI-DSS/CIS 표준 활성화</li>
    <li>EventBridge 기반 자동 대응 및 Runbook DR 검증 구성</li>
  </ul>
</body>
</html>

<!-- END OF 4-1-1 다중 지역 기반의 아키텍처와 보안.html -->

<!-- START OF 4-1-2 멀티 클라우드 기반의 아키텍처와 보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4-1-2 멀티 클라우드 기반의 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #fafafa; color: #222; line-height: 1.6; padding: 20px; }
    h1, h2, h3, h4 { color: #004880; }
    code { background: #eee; padding: 2px 5px; border-radius: 4px; }
    img { max-width: 100%; border-radius: 8px; margin: 10px 0; }
    table { width: 100%; border-collapse: collapse; margin: 15px 0; }
    th, td { border: 1px solid #ccc; padding: 8px; }
    th { background-color: #f2f7ff; }
    .highlight { background: #f0f8ff; padding: 10px; border-left: 4px solid #004880; }
    .aws-service { color: #d35400; font-weight: bold; }
    .azure-service { color: #0a61c9; font-weight: bold; }
    .gcp-service { color: #0f9d58; font-weight: bold; }
    .vendor { color: #2c3e50; font-style: italic; }
  </style>
</head>
<body>
  <h1>4-1-2 멀티 클라우드 기반의 아키텍처와 보안</h1>
  <p>이 절에서는 <strong>AWS, Azure, GCP</strong>를 결합하여 <strong>멀티 클라우드 환경의 고가용성과 일관된 보안 거버넌스</strong>를 구축하는 방법을 다룬다. 단일 플랫폼 종속을 피하면서도 각 클라우드의 고유 보안 기능을 통합 운영할 수 있는 설계 방안을 제시한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>클라우드 간 장애 격리 및 연속성 확보 (Cross-Cloud DR)</li>
    <li>다중 CSP의 정책/로그를 일원화한 거버넌스 체계 수립</li>
    <li>SIEM, SOAR, CNAPP을 결합한 자동화된 보안 감시</li>
    <li>규제 대응(ISO27001, ISMS-P, GDPR, HIPAA)에 필요한 증적 자동화</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <img src="https://miro.medium.com/v2/resize:fit:1200/1*yXoRwB5W1Xc4VwAx_6uQNg.png" alt="Multi-Cloud Security Architecture Diagram">
  <p>본 아키텍처는 각 클라우드(AWS, Azure, GCP)의 로그, 정책, 자산 정보를 중앙화 플랫폼(<span class="vendor">CNAPP</span> 및 <span class="vendor">SIEM</span>)으로 통합하여 보안 태세를 실시간으로 가시화한다. 거버넌스 계층은 <span class="vendor">Prisma Cloud</span>, <span class="vendor">Wiz</span> 등의 멀티클라우드 보안 솔루션을 통해 구성된다.</p>

  <h2>3. 주요 서비스 구성</h2>
  <ul>
    <li><span class="aws-service">CloudTrail</span>, <span class="azure-service">Sentinel</span>, <span class="gcp-service">Chronicle</span> — 중앙 SIEM 연동</li>
    <li><span class="aws-service">Security Hub</span>, <span class="azure-service">Defender for Cloud</span>, <span class="gcp-service">SCC</span> — CSPM 통합 관리</li>
    <li><span class="aws-service">KMS</span>, <span class="azure-service">Key Vault</span>, <span class="gcp-service">Cloud KMS</span> — 키 관리 및 암호화 통일</li>
    <li><span class="vendor">Prisma Cloud</span>, <span class="vendor">Wiz</span>, <span class="vendor">HashiCorp Vault</span> — 보안 거버넌스 및 비밀 관리</li>
  </ul>

  <h2>4. 보안 자동화 및 탐지</h2>
  <p><span class="aws-service">EventBridge</span>, <span class="azure-service">Logic Apps</span>, <span class="gcp-service">Eventarc</span>을 이용해 보안 이벤트를 실시간 수집·탐지하고, <span class="vendor">SOAR</span> 솔루션(<span class="vendor">Cortex XSOAR</span>, <span class="vendor">Splunk SOAR</span>)과 연동해 자동 조치한다.</p>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>Cross-Cloud SIEM:</strong> 로그를 표준화(OTel 기반)하여 중앙 분석</li>
    <li><strong>CNAPP 통합:</strong> CSPM, CWPP, CIEM을 단일 플랫폼에서 관리</li>
    <li><strong>자동화된 규제 대응:</strong> 규제별 요구사항을 IaC 검증으로 연계</li>
  </ul>

  <h2>6. 요약</h2>
  <p>멀티 클라우드 보안 아키텍처는 클라우드별 고유 기능을 유지하면서, 통합된 가시성과 자동화 대응 체계를 제공해야 한다. CNAPP과 SIEM을 연동함으로써 보안 태세를 지속적으로 개선할 수 있다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 글로벌 헬스케어 기업 A사의 멀티 클라우드 통합 보안 거버넌스 설계</h3>
  <p><strong>시나리오:</strong> 헬스케어 기업 A사는 AWS(임상 데이터 처리), Azure(사내 ERP), GCP(분석 및 머신러닝) 세 환경을 동시에 운영한다. 각 플랫폼의 보안 정책, 로그, 키 관리 체계가 상이하여 보안 관리의 복잡성이 증가하고 있으며, HIPAA 및 GDPR 규제에 따라 데이터 주권을 유지하면서도 일관된 감사 체계를 구축해야 한다.</p>

  <p><strong>해설:</strong> A사는 클라우드별 고유 서비스의 장점을 살리되, 중앙 통제 계층을 구축하여 통합 거버넌스를 실현해야 한다. 각 CSP의 보안 서비스를 아래 표와 같이 통합한다.</p>

  <table>
    <thead>
      <tr><th>보안 영역</th><th>AWS</th><th>Azure</th><th>GCP</th><th>중앙 관리/3rd Party</th></tr>
    </thead>
    <tbody>
      <tr><td>감사 로그</td><td>CloudTrail</td><td>Activity Log</td><td>Audit Log</td><td><span class="vendor">Splunk Cloud</span> (SIEM)</td></tr>
      <tr><td>키 관리</td><td>KMS</td><td>Key Vault</td><td>Cloud KMS</td><td><span class="vendor">HashiCorp Vault</span></td></tr>
      <tr><td>위협 탐지</td><td>GuardDuty</td><td>Defender for Cloud</td><td>SCC</td><td><span class="vendor">Prisma Cloud CNAPP</span></td></tr>
      <tr><td>자동 대응</td><td>EventBridge + Lambda</td><td>Logic Apps + Sentinel</td><td>Eventarc + Cloud Functions</td><td><span class="vendor">Cortex XSOAR</span></td></tr>
    </tbody>
  </table>

  <p>각 CSP의 감사 로그는 <span class="vendor">Splunk Cloud</span>로 전송되어 공통 탐지 규칙을 적용하며, HIPAA 로그 보존 요건에 따라 <span class="aws-service">S3 Glacier</span>와 <span class="azure-service">Blob Archive</span>에 장기 저장한다. 키 관리 체계는 <span class="vendor">Vault</span>를 중앙 루트로 설정하고 각 CSP의 KMS를 하위 엔진으로 구성하여 CMK 정책의 일관성을 유지한다.</p>

  <p>또한 <span class="vendor">Prisma Cloud</span>를 활용하여 클라우드 자산, IAM, 네트워크 보안 정책을 지속적으로 점검하며, HIPAA 및 GDPR 요구사항을 자동 평가한다. 데이터 위치는 리전 단위로 지정하며, PII 데이터는 암호화 상태에서 처리하도록 <span class="aws-service">Nitro Enclaves</span> 및 <span class="azure-service">Confidential Compute</span>를 사용한다.</p>

  <p class="highlight"><strong>핵심 요약:</strong> 단일 클라우드에 종속되지 않는 통합 거버넌스 구축이 목표이며, CSP 고유 서비스 + CNAPP + 중앙 SIEM/SOAR의 조합으로 규제 준수와 운영 효율성을 동시에 달성한다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>클라우드별 감사 로그 및 경보를 중앙 SIEM에 통합</li>
    <li>Vault 기반 키 관리 및 자동 회전 정책 수립</li>
    <li>Prisma/Wiz 기반 CNAPP 대시보드 구성</li>
    <li>HIPAA/GDPR 규제별 자동 검증 룰 세트 적용</li>
  </ul>
</body>
</html>

<!-- END OF 4-1-2 멀티 클라우드 기반의 아키텍처와 보안.html -->

<!-- START OF 4-1-3 컨테이너 기반 아키텍처와 보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4-1-3 컨테이너 기반 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #fafafa; color: #222; line-height: 1.6; padding: 20px; }
    h1, h2, h3, h4 { color: #004880; }
    code { background: #eee; padding: 2px 5px; border-radius: 4px; }
    img { max-width: 100%; border-radius: 8px; margin: 10px 0; }
    table { width: 100%; border-collapse: collapse; margin: 15px 0; }
    th, td { border: 1px solid #ccc; padding: 8px; }
    th { background-color: #f2f7ff; }
    .highlight { background: #f0f8ff; padding: 10px; border-left: 4px solid #004880; }
    .aws-service { color: #d35400; font-weight: bold; }
    .vendor { color: #2c3e50; font-style: italic; }
  </style>
</head>
<body>
  <h1>4-1-3 컨테이너 기반 아키텍처와 보안</h1>
  <p>이 절에서는 <strong>컨테이너 오케스트레이션 플랫폼(EKS, AKS, GKE)</strong>을 활용한 클라우드 네이티브 환경의 보안 아키텍처 설계를 다룬다. 마이크로서비스 확산에 따라 컨테이너 단위의 위협 탐지, 비밀 관리, 이미지 서명, 네트워크 세분화 등이 핵심 과제로 부상하고 있다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>컨테이너 이미지의 신뢰성 확보 및 서플라이 체인 위협 방어</li>
    <li>Pod·노드·네트워크·API 단위의 다층 보안 적용</li>
    <li>런타임 위협 탐지 및 자동 대응 체계 구축</li>
    <li>DevSecOps 기반의 지속적인 취약점 관리와 규제 대응</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <img src="https://d2908q01vomqb2.cloudfront.net/0e402ae6ef0b02adac9a3d04fa3b6b88f9e818c9/2022/06/27/eks-security-overview-diagram.png" alt="EKS Container Security Architecture">
  <p>본 아키텍처는 <span class="aws-service">Amazon EKS</span>를 기준으로, Azure AKS, GCP GKE와 동일한 보안 구성 패턴을 적용한다. 빌드-배포-운영의 전 단계에서 보안이 내재화되며, <span class="vendor">CNAPP</span> 솔루션을 통해 워크로드 단위 가시성과 위협 대응을 통합한다.</p>

  <h2>3. 주요 서비스 구성</h2>
  <ul>
    <li><span class="aws-service">EKS + Fargate</span> – 관리형 컨테이너 실행 환경</li>
    <li><span class="aws-service">ECR</span> – 이미지 취약점 스캔 및 서명(Signature)</li>
    <li><span class="aws-service">IAM Roles for Service Accounts (IRSA)</span> – 세분화된 권한 부여</li>
    <li><span class="aws-service">KMS</span> – Secret 암호화 및 K8s Secret 통합 관리</li>
    <li><span class="vendor">Aqua Security</span>, <span class="vendor">Sysdig</span>, <span class="vendor">Prisma Cloud</span> – 런타임 탐지 및 정책 엔진</li>
  </ul>

  <h2>4. 보안 자동화 및 탐지</h2>
  <p>CI/CD 단계에서는 <code>image scanning</code> 및 <code>policy-as-code</code> 검증을 통해 배포 전 취약점을 차단하고, 런타임에서는 <span class="vendor">Sysdig Falco</span> 기반으로 비정상 행위를 탐지한다. 탐지된 이벤트는 <span class="aws-service">EventBridge</span>를 통해 <span class="aws-service">Lambda</span>로 전달되어 자동 대응이 수행된다.</p>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>서플라이 체인 보호:</strong> <span class="aws-service">ECR</span> 이미지 서명 + <span class="vendor">Sigstore</span> 기반 검증</li>
    <li><strong>런타임 보호:</strong> eBPF 기반 행위 모니터링 및 자동 격리 (<span class="vendor">Sysdig</span>, <span class="vendor">Falco</span>)</li>
    <li><strong>DevSecOps 통합:</strong> CI/CD에 <span class="vendor">Trivy</span>, <span class="vendor">Checkov</span>을 연계해 IaC 취약점 검출</li>
  </ul>

  <h2>6. 요약</h2>
  <p>컨테이너 기반 아키텍처의 핵심은 <strong>Shift-left</strong> 전략이다. 개발 단계부터 이미지, 구성, 네트워크, 런타임까지 전 영역에서 보안이 내재화되어야 하며, 자동화된 탐지와 정책 적용이 필수적이다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 글로벌 커머스 기업 B사의 EKS 기반 컨테이너 보안 강화 프로젝트</h3>
  <p><strong>시나리오:</strong> B사는 전 세계 7개 리전에서 EKS 클러스터를 통해 웹 애플리케이션과 마이크로서비스를 운영하고 있다. 보안팀은 최근 공급망 공격(서드파티 이미지 취약점 및 잘못된 CI/CD 자격증명 사용)으로 인해 신규 보안 표준을 도입해야 했다. 또한 PCI-DSS v4.0 및 GDPR에 대응하기 위해 컨테이너 이미지 신뢰성, API 접근제어, 로그 무결성, 런타임 위협 대응 체계를 강화해야 한다.</p>

  <p><strong>해설:</strong> B사의 EKS 보안 아키텍처는 <strong>빌드–배포–운영</strong> 3단계로 구성되며, 각 단계별 주요 방어책은 다음과 같다.</p>

  <table>
    <thead>
      <tr><th>단계</th><th>보안 영역</th><th>적용 서비스/도구</th><th>구현 상세</th></tr>
    </thead>
    <tbody>
      <tr><td>빌드</td><td>이미지 검증</td><td><span class="aws-service">ECR Scan</span>, <span class="vendor">Trivy</span>, <span class="vendor">Sigstore</span></td><td>CI 파이프라인에서 취약점 검출 및 이미지 서명 후 검증; <code>cosign verify</code> 정책을 적용하여 무서명 이미지 배포 차단</td></tr>
      <tr><td>배포</td><td>정책 준수</td><td><span class="vendor">OPA/Gatekeeper</span>, <span class="aws-service">KMS</span></td><td>네임스페이스별 보안 정책 정의, Secret 암호화, 네트워크폴리시 자동검증</td></tr>
      <tr><td>운영</td><td>런타임 탐지</td><td><span class="vendor">Falco</span>, <span class="aws-service">EventBridge</span>, <span class="vendor">Prisma Cloud</span></td><td>비정상 프로세스·파일 접근·네트워크 활동 탐지 후 Lambda 자동 격리 수행</td></tr>
    </tbody>
  </table>

  <p>추가적으로, <span class="vendor">Prisma Cloud</span>는 모든 클러스터의 보안 상태를 수집하여 <strong>CNAPP 대시보드</strong>로 통합한다. 관리자는 리전별 EKS 상태, 노드그룹 취약점, 이미지 서명 여부, 런타임 위협 현황을 단일 화면에서 확인할 수 있다. 로그는 <span class="aws-service">CloudWatch</span>에서 중앙 수집 후 <span class="vendor">Splunk Cloud</span>로 전송되어 SIEM 탐지 규칙과 연동된다.</p>

  <p>개발팀은 CI/CD 과정에서 <span class="vendor">Checkov</span>을 이용해 Terraform 코드의 보안 구성을 사전에 검증하고, 배포 전 <span class="aws-service">IAM</span> 및 IRSA 정책의 최소권한을 자동 점검한다. 이러한 조치는 <strong>Shift-left DevSecOps</strong> 모델의 핵심으로, 인프라 보안 Drift를 방지하고 규제 준수를 보장한다.</p>

  <p class="highlight"><strong>핵심 요약:</strong> 컨테이너 기반 환경의 보안은 이미지 신뢰성, 정책 강제, 런타임 보호의 3축으로 구성된다. B사는 이를 통해 공급망 위협, 내부 오용, 런타임 침해를 실시간으로 방어하며 글로벌 보안 표준을 만족시킨다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>ECR 이미지 서명 및 CI/CD 취약점 스캔 자동화</li>
    <li>OPA/Gatekeeper를 이용한 Pod 배포 정책 강제</li>
    <li>Falco 기반 런타임 위협 탐지 및 Lambda 자동 대응</li>
    <li>Prisma Cloud CNAPP 통합 대시보드 구성</li>
    <li>Terraform 보안 검증 파이프라인 (Checkov + OPA)</li>
  </ul>
</body>
</html>

<!-- END OF 4-1-3 컨테이너 기반 아키텍처와 보안.html -->

<!-- START OF 4_2_1_오토_스케일_업_아웃_성능_보장_아키텍처와_보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4-2-1 오토 스케일 업/아웃 성능 보장 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .badge { display:inline-block; padding:2px 8px; border-radius:999px; font-size:12px; background:#eef6ff; color:#004880; }
    .note { color:#666; font-size:12px; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-2-1 오토 스케일 업/아웃 성능 보장 아키텍처와 보안</h1>
  <p>본 절은 <strong>수요 급등/급감</strong> 상황에서도 <strong>SLO(가용성·지연시간)</strong>을 보장하기 위한 <strong>오토 스케일 업/아웃</strong> 아키텍처와 보안 통합 설계를 제시한다. AWS 네이티브 중심에 서드파티(CNAPP/SIEM) 연계를 포함한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li><strong>예측·반응형 스케일링</strong>으로 p95 지연시간과 오류율을 SLO 이하로 유지</li>
    <li><strong>보안/거버넌스</strong>가 스케일 변동과 무관하게 일관 적용 (IAM, KMS, WAF, GuardDuty)</li>
    <li>스팟/온디맨드/예약 조합으로 <strong>성능-비용 최적화</strong>, 중단 시 자동 치유</li>
    <li>관찰성(로그·메트릭·트레이스)과 <strong>SIEM/SOAR</strong> 자동 대응 연계</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <div class="highlight small">외부 이미지 없이 인라인 SVG로 개요를 제공합니다.</div>
  <!-- Inline SVG Diagram: Auto Scale & Security Pipeline -->
  <svg viewBox="0 0 1100 420" width="100%" height="auto" aria-label="오토 스케일 및 보안 개요">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <!-- Ingress -->
    <rect x="30" y="40" width="200" height="120" class="box"/>
    <text x="40" y="65" class="title">엣지/인입</text>
    <text x="40" y="90" class="txt">CloudFront, ALB/NLB</text>
    <text x="40" y="110" class="txt">WAF, Shield Adv.</text>

    <!-- Compute -->
    <rect x="260" y="40" width="260" height="120" class="box"/>
    <text x="270" y="65" class="title">컴퓨트 계층</text>
    <text x="270" y="90" class="txt">EC2 ASG (Warm Pool)</text>
    <text x="270" y="110" class="txt">EKS + Karpenter</text>

    <!-- Async -->
    <rect x="550" y="40" width="220" height="120" class="box"/>
    <text x="560" y="65" class="title">비동기 완충</text>
    <text x="560" y="90" class="txt">SQS, SNS, EventBridge</text>
    <text x="560" y="110" class="txt">Step Fn / Lambda</text>

    <!-- Data -->
    <rect x="800" y="40" width="260" height="120" class="box"/>
    <text x="810" y="65" class="title">데이터/캐시</text>
    <text x="810" y="90" class="txt">Aurora / DynamoDB</text>
    <text x="810" y="110" class="txt">ElastiCache (Redis)</text>

    <!-- SecOps -->
    <rect x="150" y="200" width="760" height="160" class="box"/>
    <text x="160" y="225" class="title">보안/관찰성/거버넌스</text>
    <text x="160" y="250" class="txt">CloudTrail, CloudWatch, X-Ray, OpenTelemetry</text>
    <text x="160" y="270" class="txt">Security Hub, GuardDuty, Config, IAM, KMS</text>
    <text x="160" y="290" class="txt">SIEM/SOAR(예: Splunk, XSOAR), CNAPP(Wiz/Prisma)</text>

    <!-- Arrows -->
    <line x1="230" y1="100" x2="260" y2="100" class="arrow"/>
    <line x1="520" y1="100" x2="550" y2="100" class="arrow"/>
    <line x1="770" y1="100" x2="800" y2="100" class="arrow"/>
    <line x1="530" y1="160" x2="530" y2="200" class="arrow"/>
  </svg>

  <h2>3. 주요 서비스 구성</h2>
  <div class="grid grid-2">
    <div>
      <h3>성능/가용성</h3>
      <ul>
        <li><span class="aws">EC2 Auto Scaling</span> (Target/Step/예측 스케일링, Warm Pools)</li>
        <li><span class="aws">EKS</span> + Karpenter / Cluster Autoscaler (Pod 대기시간 기반 즉시 확장)</li>
        <li><span class="aws">Application Auto Scaling</span> (ECS, DynamoDB, Aurora, Lambda 동적 확장)</li>
        <li><span class="aws">Global Accelerator</span>, ALB/NLB, <span class="aws">CloudFront</span></li>
      </ul>
    </div>
    <div>
      <h3>보안/거버넌스</h3>
      <ul>
        <li><span class="aws">WAF</span>, <span class="aws">Shield Advanced</span>, <span class="aws">Shield RTBH</span></li>
        <li><span class="aws">IAM</span>/IAM Identity Center, SCP, <span class="aws">KMS</span>, Secrets Manager</li>
        <li><span class="aws">Security Hub</span>, <span class="aws">GuardDuty</span>, Detective, Config</li>
        <li>중앙 SIEM: <span class="vendor">Splunk</span>/<span class="vendor">Elastic</span>; CNAPP: <span class="vendor">Wiz</span>/<span class="vendor">Prisma Cloud</span></li>
      </ul>
    </div>
  </div>

  <h2>4. 보안 자동화 및 탐지</h2>
  <ul>
    <li>확장/축소 이벤트를 <span class="aws">EventBridge</span>로 캡처 → 태그·IAM·KMS 정책 <strong>자동 검증</strong></li>
    <li><span class="aws">GuardDuty</span> 고심각도 탐지 시 ASG 인스턴스 <strong>격리 런북</strong> 수행(Lambda/SSM)</li>
    <li>스팟 중단 알림(2분) 수신 → <strong>Drain + 교체</strong> (Karpenter, Lifecycle Hooks)</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>성능-보안 동기화:</strong> 스케일아웃 시 <em>필수 보안 에이전트</em>(eBPF/EDR/FIM) <strong>무중단 부착</strong> 검증</li>
    <li><strong>사전 웜업:</strong> 예측 스케일링 + Warm Pool로 <em>콜드 스타트</em> 제거</li>
    <li><strong>백프레셔 & 회로차단기:</strong> ALB 5xx 증가 시 SQS 큐잉 전환, 과부하 흡수</li>
    <li><strong>멀티테넌트 격리:</strong> 보안 그룹·네임스페이스·IRSA로 <em>가드레일</em> 일괄 적용</li>
  </ul>

  <h2>6. 요약</h2>
  <p>오토 스케일은 <strong>성능</strong>만이 아니라 <strong>보안 일관성</strong>까지 확대해야 한다. 확장과 동시에 IAM/KMS/WAF/에이전트가 자동 배포·검증되어야 하며, 관찰성과 SOAR 연계로 이상 상황을 빠르게 우회·차단한다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 대규모 티켓팅 서비스 X사의 T-0 초단기 피크 대응 아키텍처</h3>
  <p><strong>시나리오:</strong> X사는 글로벌 동시 접속 최고치가 <strong>분당 120만 요청(RPM)</strong>까지 급증하는 온라인 티켓팅 이벤트를 월 2회 진행한다. SLO는 <strong>p95 응답 180ms 이하</strong>, 오류율 <strong>0.3% 이하</strong>이다. 피크는 T-10분부터 T+20분까지 3단계(준피크→최대피크→잔존피크)로 나타난다. 과거 장애는 (1) ASG 콜드 스타트로 초기 5분 동안 5xx 급증, (2) Spot 회수 동시 다발 발생 시 KMS·EDR 에이전트 누락으로 보안 기준 미충족, (3) WAF 규칙 전파 지연으로 봇 폭주, (4) Aurora 연결 폭주로 <em>connection storm</em> 발생이었다.</p>

  <p><strong>해설:</strong> X사는 <em>사전 웜업 + 예측·목표 기반 스케일링</em>과 <em>보안·관찰성 자동화</em>를 결합한다.</p>

  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>KPI/임계치</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>엣지/인입</td>
        <td><span class="aws">CloudFront</span>, <span class="aws">WAF</span>, <span class="aws">Shield Adv.</span>, <span class="aws">Global Accelerator</span></td>
        <td>레이트리밋·봇차단 룰 프리배포; GA로 최근접 엔드포인트 라우팅</td>
        <td>WAF 차단율 ≥ 98%, 엣지 캐시 히트 ≥ 85%</td>
      </tr>
      <tr>
        <td>웹/API 계층</td>
        <td>ALB, <span class="aws">EC2 ASG</span>(Warm Pool), <span class="aws">Auto Scaling</span> 예측/타깃</td>
        <td>T-15분 Warm Pool 프리워밍(AMI 미리 패치 & 에이전트 탑재); T-10분부터 예측 규모로 증설</td>
        <td>인스턴스 초기화 ≤ 60s, ALB Target Healthy ≥ 99.5%</td>
      </tr>
      <tr>
        <td>컨테이너</td>
        <td><span class="aws">EKS</span> + Karpenter, Pod Disruption Budget</td>
        <td>큐 길이·대기시간 기반 스케일아웃; 스팟 회수 시 <code>drain</code> + 대체 노드 60s 내 가용</td>
        <td>대기중 Pod 0 유지, 노드 교체 ≤ 60s</td>
      </tr>
      <tr>
        <td>비동기 완충</td>
        <td>SQS, EventBridge, Lambda</td>
        <td>최대피크 시 일부 요청을 큐에 적재해 완충; <em>DLQ</em>로 실패 재처리</td>
        <td>SQS Approx. Backlog ≤ 30s 처리량</td>
      </tr>
      <tr>
        <td>데이터/캐시</td>
        <td>Aurora(MySQL) + <span class="aws">Aurora Serverless v2</span>, ElastiCache Redis</td>
        <td>읽기 트래픽을 리더로 분산, <em>connection pooling</em>; Redis에 인기 조회 캐시</td>
        <td>DB 연결 사용률 ≤ 70%, 캐시 히트 ≥ 90%</td>
      </tr>
      <tr>
        <td>보안/관찰성</td>
        <td><span class="aws">Security Hub</span>, <span class="aws">GuardDuty</span>, CloudTrail, CloudWatch, X-Ray</td>
        <td>스케일 이벤트를 EventBridge로 포착해 <strong>IAM 태그·KMS 암호화·EDR 부착</strong> 검증 런북 실행</td>
        <td>EDR 누락 0건, 암호화 미적용 0건, 탐지→격리 ≤ 30s</td>
      </tr>
    </tbody>
  </table>

  <p><u>운영 플레이북</u>: (1) T-20분: 예측 스케일링 계획 확인, WAF 룰 셋 프리배포, RDS 리더 증설. (2) T-15분: ASG Warm Pool 인스턴스 준비상태 점검(EDR/KMS/CloudWatch Agent). (3) T-10분: Karpenter 최대할당량 상향, SQS 처리 동시성 확장. (4) T+0~20분: p95 지연시간과 5xx 추적, 큐 대기시간 상승 시 추가 증설. (5) T+25분: 스케일인은 단계적(10분 단위)으로 실시, 캐시·DB 연결 급감에 대비한 커넥션 풀 축소.</p>

  <p class="highlight"><strong>핵심 요약:</strong> X사는 “예측+웜업+완충+관찰성” 4요소를 결합해 T-0 피크를 흡수한다. 확장과 동시에 <strong>보안 기준선</strong>(IAM/KMS/에이전트)이 자동 검증되어 성능과 보안을 함께 보장한다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>ASG Warm Pool 및 예측 스케일링 활성화, AMI 사전 패치/에이전트 번들</li>
    <li>EKS Karpenter 한도/프로비저너 정책 정의, 스팟 회수 대응 드레인</li>
    <li>WAF 봇/레이틀리밋 룰 프리배포, GA/CloudFront 엣지 캐시 최적화</li>
    <li>EventBridge 기반 스케일 이벤트 보안 검증( IAM 태그·KMS·EDR ) 런북</li>
    <li>Aurora 리더 확장·커넥션 풀·Redis 캐시 전략 수립</li>
    <li>SIEM/CNAPP 대시보드에서 성능·보안 지표 동시 모니터링</li>
  </ul>

  <hr/>
  <p class="note">본 문서는 외부 이미지 링크를 사용하지 않으며, 인라인 SVG로 도식화했습니다. 동일 포맷으로 이어지는 장(4-2-2 등)도 제공 가능합니다.</p>
</body>
</html>

<!-- END OF 4_2_1_오토_스케일_업_아웃_성능_보장_아키텍처와_보안.html -->

<!-- START OF 4_2_2_faa_s를_통한_성능_보장_아키텍처와_보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>4-2-2 FaaS를 통한 성능이 보장된 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-2-2 FaaS를 통한 성능이 보장된 아키텍처와 보안</h1>
  <p>본 절은 <strong>서버리스(Function as a Service)</strong>를 통해 급변하는 워크로드에도 안정적으로 <strong>SLO</strong>를 유지하고, <strong>권한·비밀·데이터·로깅</strong>을 일관되게 보호하는 아키텍처를 제시한다. AWS Lambda 중심으로 설계하되, 필요 시 3rd-Party(CNAPP/SIEM) 연계를 병행한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>콜드스타트 최소화와 동시성 제어로 <strong>p95 응답</strong>을 목표 이하로 유지</li>
    <li>서버리스 특성에 맞춘 <strong>세분화 권한(IAM)</strong> 및 <strong>비밀 관리</strong> 일원화</li>
    <li>실시간 <strong>관찰성·보안탐지</strong> 및 런북 기반 자동 대응</li>
    <li>비용 효율을 유지하며 <strong>대규모 버스트</strong>를 흡수</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <!-- Inline SVG Diagram: FaaS Security Architecture -->
  <svg viewBox="0 0 1100 420" width="100%" height="auto" aria-label="FaaS 보안 아키텍처 개요">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="30" y="40" width="230" height="120" class="box"/>
    <text x="40" y="65" class="title">엣지/인입</text>
    <text x="40" y="90" class="txt">API Gateway, ALB</text>
    <text x="40" y="110" class="txt">WAF, Shield Adv.</text>

    <rect x="290" y="40" width="260" height="120" class="box"/>
    <text x="300" y="65" class="title">서버리스 계층</text>
    <text x="300" y="90" class="txt">Lambda (Provisioned / On-Demand)</text>
    <text x="300" y="110" class="txt">Step Fn, EventBridge</text>

    <rect x="580" y="40" width="240" height="120" class="box"/>
    <text x="590" y="65" class="title">데이터/메시지</text>
    <text x="590" y="90" class="txt">SQS, SNS, Kinesis</text>
    <text x="590" y="110" class="txt">DynamoDB, Aurora</text>

    <rect x="850" y="40" width="220" height="120" class="box"/>
    <text x="860" y="65" class="title">보안/관찰성</text>
    <text x="860" y="90" class="txt">CloudTrail, CloudWatch Logs</text>
    <text x="860" y="110" class="txt">Security Hub, GuardDuty</text>

    <line x1="260" y1="100" x2="290" y2="100" class="arrow"/>
    <line x1="550" y1="100" x2="580" y2="100" class="arrow"/>
    <line x1="820" y1="100" x2="850" y2="100" class="arrow"/>
  </svg>

  <h2>3. 주요 서비스 구성</h2>
  <div class="grid grid-2">
    <div>
      <h3>성능/확장성</h3>
      <ul>
        <li><span class="aws">Lambda</span> 동시성 제한·보류 큐(Reserved/Provisioned Concurrency)</li>
        <li><span class="aws">API Gateway</span> 스로틀, 캐싱, Usage Plan</li>
        <li><span class="aws">SQS/Kinesis</span>로 버스트 흡수 및 재처리(DLQ)</li>
        <li><span class="aws">DynamoDB</span> On-Demand/Adaptive Capacity, <span class="aws">Aurora Serverless v2</span></li>
      </ul>
    </div>
    <div>
      <h3>보안/거버넌스</h3>
      <ul>
        <li><span class="aws">IAM</span> 최소권한, <span class="aws">KMS</span>로 데이터/환경변수 암호화</li>
        <li><span class="aws">WAF</span> Bot Control, <span class="aws">Shield Advanced</span></li>
        <li><span class="aws">Security Hub</span>, <span class="aws">GuardDuty</span>, <span class="aws">Config</span></li>
        <li>중앙 SIEM: <span class="vendor">Splunk/Elastic</span>, CNAPP: <span class="vendor">Wiz/Prisma</span></li>
      </ul>
    </div>
  </div>

  <h2>4. 보안 자동화 및 탐지</h2>
  <ul>
    <li>Lambda <em>동시성 급증</em> → <span class="aws">EventBridge</span> 경보 → <strong>자동 완충</strong>(SQS로 우회) 및 <strong>동시성 상향</strong> API 호출</li>
    <li>고심각도 WAF 차단/GuardDuty 탐지 → SOAR 런북(토큰 폐기, IP 차단, 키 회전)</li>
    <li>비밀 접근·KMS 사용 로그는 <strong>SIEM</strong>에서 상관 분석(시도/성공/실패 패턴)</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>제로트러스트 API:</strong> JWT/OAuth 스코프 + mTLS + WAF 스키마 검증</li>
    <li><strong>서플라이체인:</strong> Lambda 레이어/컨테이너 이미지 서명 및 해시 고정</li>
    <li><strong>비용-성능 균형:</strong> p95 기반 동시성 자동 조정 + 큐 기반 <em>백프레셔</em></li>
  </ul>

  <h2>6. 요약</h2>
  <p>서버리스 아키텍처에서는 <strong>동시성 관리</strong>와 <strong>비밀·키·권한</strong>의 일관된 통제가 핵심이다. 관찰성·SOAR와의 연계로 위협과 성능 이상을 자동 흡수한다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 글로벌 핀테크 Y사의 카드결제 API 서버리스 전환</h3>
  <p><strong>시나리오:</strong> Y사는 카드결제/정산 API를 모놀리식에서 서버리스로 전환한다. 요구사항은 (1) p95 응답 120ms 이하, (2) 초당 8,000 RPS 버스트 3분 유지, (3) <em>토큰화/암호화</em>로 PCI-DSS 준수, (4) 서드파티와의 웹훅/콜백 처리 안정성, (5) 위협 발생 시 자동 차단 및 증적 보존이다. 과거 장애는 <em>콜드스타트</em>, <em>Lambda 동시성 고갈</em>, <em>비밀 노출</em>, <em>웹훅 리트라이 폭주</em>였다.</p>

  <p><strong>해설:</strong> 다음 표의 <em>성능-보안 일체화</em> 설계를 적용한다.</p>

  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>KPI/임계</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>인입/API 보호</td>
        <td><span class="aws">API Gateway</span>, <span class="aws">WAF</span>, <span class="aws">Shield Adv.</span></td>
        <td>스키마 검증 + 레이트리밋 + 시그니처 검증; mTLS/키 회전 정책</td>
        <td>오탐 < 1%, 차단율 ≥ 97%</td>
      </tr>
      <tr>
        <td>Lambda 실행</td>
        <td><span class="aws">Lambda</span> (Provisioned/Reserved Concurrency)</td>
        <td>핫패스는 Provisioned로 예열, 백그라운드는 On-Demand</td>
        <td>콜드스타트 비율 < 0.5%</td>
      </tr>
      <tr>
        <td>백프레셔</td>
        <td><span class="aws">SQS</span>, <span class="aws">EventBridge</span></td>
        <td>버스트 시 일부 호출 큐잉, 재시도는 지수 백오프 + DLQ</td>
        <td>Backlog 처리 지연 ≤ 30s</td>
      </tr>
      <tr>
        <td>데이터 계층</td>
        <td><span class="aws">DynamoDB</span>, <span class="aws">Aurora Serverless v2</span>, <span class="aws">KMS</span></td>
        <td>PII/카드데이터는 토큰화, KMS로 필드 암호화; Point-in-time Recovery</td>
        <td>암호화 미적용 0건</td>
      </tr>
      <tr>
        <td>비밀·권한</td>
        <td><span class="aws">Secrets Manager</span>, <span class="aws">IAM</span></td>
        <td>단기 자격증명(STS), 시크릿 버전·로테이션·네트워크 경계 내부화</td>
        <td>하드코딩 비밀 0건</td>
      </tr>
      <tr>
        <td>관찰성/탐지</td>
        <td>CloudWatch, X-Ray, <span class="aws">Security Hub</span>, <span class="aws">GuardDuty</span></td>
        <td>오탐 감소 룰 튜닝, SOAR 런북(토큰 폐기·IP 차단·키 회전)</td>
        <td>탐지→조치 ≤ 30s</td>
      </tr>
      <tr>
        <td>SIEM/CNAPP</td>
        <td><span class="vendor">Splunk/Elastic</span>, <span class="vendor">Wiz/Prisma</span></td>
        <td>로그 상관·규제 증적 자동화, 서버리스 자산 리스크 점검</td>
        <td>규제 미준수 0건</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> Y사는 Provisioned Concurrency + 큐 기반 완충 + 키·비밀 중앙화로 버스트와 위협을 동시에 흡수한다. SOAR 연계로 탐지 후 30초 내 자동 조치가 가능하다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>핫패스 Lambda에 Provisioned Concurrency, 백그라운드 On-Demand</li>
    <li>API Gateway 스키마 검증·레이트리밋·캐싱·WAF 룰 셋</li>
    <li>SQS/DLQ·EventBridge로 재시도/폭주 제어</li>
    <li>KMS/Secrets Manager로 필드 암호화·시크릿 로테이션</li>
    <li>CloudWatch/X-Ray 지표·트레이스 기반 동시성 자동 조정</li>
    <li>SIEM/CNAPP 연동으로 규제 증적 자동화 및 리스크 가시화</li>
  </ul>
</body>
</html>

<!-- END OF 4_2_2_faa_s를_통한_성능_보장_아키텍처와_보안.html -->

<!-- START OF 4_2_3_성능이_보장된_전용_할당_자원으로_구축된_아키텍처와_보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>4-2-3 성능이 보장된 전용 할당 자원으로 구축된 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-2-3 성능이 보장된 전용 할당 자원으로 구축된 아키텍처와 보안</h1>
  <p>본 절은 <strong>전용 호스트/전용 인스턴스/전용 클러스터</strong> 등 <strong>Single-Tenant</strong> 자원을 활용하여 <strong>성능의 일관성(지연·스루풋)과 규제 준수</strong>를 동시에 보장하는 아키텍처와 보안 프레임워크를 제시한다. 금융·헬스케어·공공과 같이 <em>노이즈 네이버</em>의 영향을 최소화해야 하는 워크로드에 적합하다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>하드웨어 수준 격리로 <strong>지연 분산 최소화</strong> 및 성능 일관성 확보</li>
    <li>규제·감사(PCI-DSS, ISMS-P, HIPAA, FSI) 요건 충족(테넌시·키·로그 무결성)</li>
    <li>용량 보장(EC2 Capacity Reservation, Dedicated Host)과 <strong>장애격리</strong></li>
    <li>확장/축소 시에도 <strong>보안 기준선</strong>(IAM/KMS/에이전트) 자동 적용</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <!-- Inline SVG: Dedicated Capacity Security Architecture -->
  <svg viewBox="0 0 1100 420" width="100%" height="auto" aria-label="전용 자원 기반 보안 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="30" y="40" width="240" height="120" class="box"/>
    <text x="40" y="65" class="title">전용 컴퓨트</text>
    <text x="40" y="90" class="txt">EC2 <tspan class="title">Dedicated Host</tspan>, Dedicated Instance</text>
    <text x="40" y="110" class="txt">Placement Group, EFA/ENA</text>

    <rect x="300" y="40" width="260" height="120" class="box"/>
    <text x="310" y="65" class="title">컨테이너/데이터</text>
    <text x="310" y="90" class="txt">EKS 전용 노드그룹, IRSA</text>
    <text x="310" y="110" class="txt">Aurora Provisioned IOPS, DynamoDB</text>

    <rect x="590" y="40" width="230" height="120" class="box"/>
    <text x="600" y="65" class="title">네트워크</text>
    <text x="600" y="90" class="txt">전용 서브넷, NACL/SG, NFW</text>
    <text x="600" y="110" class="txt">PrivateLink/VPC Endpoint</text>

    <rect x="850" y="40" width="220" height="120" class="box"/>
    <text x="860" y="65" class="title">보안/거버넌스</text>
    <text x="860" y="90" class="txt">KMS, CloudTrail, Config</text>
    <text x="860" y="110" class="txt">Security Hub, GuardDuty, SIEM</text>

    <line x1="270" y1="100" x2="300" y2="100" class="arrow"/>
    <line x1="560" y1="100" x2="590" y2="100" class="arrow"/>
    <line x1="820" y1="100" x2="850" y2="100" class="arrow"/>
  </svg>

  <h2>3. 주요 서비스 구성</h2>
  <div class="grid grid-2">
    <div>
      <h3>성능/격리</h3>
      <ul>
        <li><span class="aws">EC2 Dedicated Hosts</span> / <span class="aws">Dedicated Instances</span></li>
        <li><span class="aws">EC2 Capacity Reservation</span>, Zonal RI(용량 보장)</li>
        <li><span class="aws">Placement Groups</span>(Cluster/Spread)로 지연 최소화</li>
        <li><span class="aws">ENA</span>/EFA, <span class="aws">SR-IOV</span>, Nitro 기반 가상화 오버헤드 최소화</li>
        <li><span class="aws">EBS io2/io2 Block Express</span> + <span class="aws">Multi-Attach</span></li>
      </ul>
    </div>
    <div>
      <h3>보안/거버넌스</h3>
      <ul>
        <li><span class="aws">KMS</span> (CMEK), CloudHSM(필요 시), NitroTPM</li>
        <li><span class="aws">AWS Network Firewall</span>, <span class="aws">WAF</span>, <span class="aws">Shield Advanced</span></li>
        <li><span class="aws">Security Hub</span>, <span class="aws">GuardDuty</span>, Detective, Config, CloudTrail</li>
        <li>중앙 SIEM: <span class="vendor">Splunk/Elastic</span>; CNAPP: <span class="vendor">Wiz/Prisma</span>; EDR: <span class="vendor">CrowdStrike/Trend Micro</span></li>
      </ul>
    </div>
  </div>

  <h2>4. 보안 자동화 및 탐지</h2>
  <ul>
    <li>전용 호스트 할당/해제 이벤트를 <span class="aws">EventBridge</span>로 캡처 → <strong>에이전트·KMS·태깅</strong> 기준 자동 검증</li>
    <li>Config 규칙으로 <em>tenancy=dedicated</em> 위반 탐지 → <strong>격리 런북</strong>(NACL 차단·IAM deny)</li>
    <li>GuardDuty 고심각도 이벤트 → SOAR(차단/격리/키회전) 실행</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>초저지연 패스:</strong> Cluster Placement + ENA/EFA + 고정 MTU, IRQ pinning(전용 AMI 튜닝)</li>
    <li><strong>키 분리:</strong> CloudHSM + KMS <em>HSM-backed CMK</em>, 키 사용 증적 SIEM 전송</li>
    <li><strong>전용 EKS:</strong> 전용 노드그룹/PodSecurity/IRSA + <span class="vendor">Falco</span>/eBPF 런타임 보호</li>
  </ul>

  <h2>6. 요약</h2>
  <p>전용 자원은 <strong>성능의 일관성</strong>과 <strong>컴플라이언스</strong>를 동시에 요구하는 워크로드에서 최적이다. 용량 보장과 하드웨어 격리를 기초로, <em>키·로그·네트워크</em>를 명시적으로 통제하고 SOAR로 자동 대응한다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 초저지연 트레이딩 기업 Z사의 Single-Tenant 전환</h3>
  <p><strong>시나리오:</strong> Z사는 파생상품 트레이딩 엔진을 클라우드로 이전한다. 요구사항: (1) <strong>왕복 지연(RTT) 5ms 이하</strong>의 일관성, (2) 거래 급증 시 <strong>초당 150k 메시지</strong> 처리, (3) <strong>단일 테넌트</strong> 하드웨어 사용 증적, (4) <strong>HSM 기반 키 관리</strong>, (5) 시장접속 게이트웨이와의 <em>고정 경로</em> 및 내부망 격리. 과거 장애는 <em>노이즈 네이버</em>에 의한 지연 스파이크, EBS 크레딧 소진, 장애 시 용량 미확보로 인한 복구 실패였다.</p>

  <p><strong>해설:</strong> 다음 표의 전용자원 아키텍처를 적용한다.</p>

  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>KPI/임계</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>컴퓨트</td>
        <td><span class="aws">EC2 Dedicated Host</span> (c7i/m7i 계열), <span class="aws">Capacity Reservation</span></td>
        <td>전용 호스트 풀 미리 확보, 스팟 미사용. NUMA awareness, CPU pinning, 고정 주파수 터보 비활성 검토</td>
        <td>p99.9 지연 분산 ≤ 1.5ms, 호스트 가용률 ≥ 99.99%</td>
      </tr>
      <tr>
        <td>스토리지</td>
        <td><span class="aws">EBS io2 Block Express</span>, <span class="aws">Instance Store</span></td>
        <td>저지연 로그/큐는 인스턴스 스토어, 영속 데이터는 io2(Provisioned IOPS ≥ 64k)</td>
        <td>EBS 지연 p95 ≤ 1ms, Burst Credit 0</td>
      </tr>
      <tr>
        <td>네트워크</td>
        <td><span class="aws">Placement Group(Cluster)</span>, <span class="aws">ENA/EFA</span>, <span class="aws">Network Firewall</span></td>
        <td>같은 AZ 내 랙 근접 배치, 고정 MTU, Security Group에 정적 룰, NFW로 동적 정책</td>
        <td>RTT ≤ 5ms, 패킷 드롭율 ≤ 0.01%</td>
      </tr>
      <tr>
        <td>데이터/DB</td>
        <td><span class="aws">Aurora MySQL</span> (Provisioned IOPS), <span class="aws">DynamoDB DAX</span></td>
        <td>쓰기 경로 최적화, 읽기 캐시(DAX)로 지연 감소, 연결 풀링/고정 커넥션</td>
        <td>DB p95 ≤ 3ms, 스로틀 0</td>
      </tr>
      <tr>
        <td>키/암호화</td>
        <td><span class="aws">CloudHSM</span> + <span class="aws">KMS</span> (HSM-backed CMK)</td>
        <td>서명/복호화 HSM 위임, 키 접근은 JIT 승인, 키 사용 로그 SIEM 전송</td>
        <td>키 접근 지연 ≤ 5ms, 무단 접근 0</td>
      </tr>
      <tr>
        <td>관찰성/보안</td>
        <td>CloudTrail, CloudWatch, <span class="aws">GuardDuty</span>, <span class="aws">Security Hub</span></td>
        <td>전용 호스트 이벤트 상관분석, 위반 시 SOAR로 자동 격리(보안그룹·NACL)</td>
        <td>탐지→조치 ≤ 20s</td>
      </tr>
      <tr>
        <td>컴플라이언스</td>
        <td><span class="vendor">Splunk</span>/<span class="vendor">Elastic</span>, <span class="vendor">Wiz/Prisma</span></td>
        <td>단일 테넌시 증적(Host ID, Allocation Log), CIS/PCI 규칙 자동 평가</td>
        <td>규제 미준수 0건</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> Z사는 전용 호스트 + 용량 예약 + HSM 백엔드 키관리로 <strong>예측 가능한 지연</strong>과 <strong>감사 가능성</strong>을 확보한다. 네트워크/스토리지/컴퓨트 최적화와 SOAR 자동화가 함께 작동해야 한다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>Dedicated Host/Capacity Reservation 사전 확보 및 호스트 플릿 운영</li>
    <li>Placement Group(Cluster) 설계, ENA/EFA 및 MTU/IRQ 튜닝</li>
    <li>EBS io2 Block Express IOPS/Throughput 계획, Burst 미사용 구성</li>
    <li>CloudHSM + KMS HSM-backed CMK, 키 접근 워크플로우(JIT) 구축</li>
    <li>Config 규칙으로 tenancy 위반 탐지, EventBridge로 자동 격리</li>
    <li>SIEM/CNAPP에서 단일 테넌시 증적 및 규제 자동 평가</li>
  </ul>
</body>
</html>

<!-- END OF 4_2_3_성능이_보장된_전용_할당_자원으로_구축된_아키텍처와_보안.html -->

<!-- START OF 4_2_4_글로벌_서비스_성능_제고를_고려한_아키텍처와_보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4-2-4 글로벌 서비스 성능 제고를 고려한 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-2-4 글로벌 서비스 성능 제고를 고려한 아키텍처와 보안</h1>
  <p>본 절은 <strong>전 세계 사용자</strong>에게 <strong>일관된 저지연</strong>과 <strong>고가용성</strong>을 제공하기 위해 <strong>엣지 전송·다중 리전 오리진·글로벌 데이터</strong>를 결합하는 아키텍처와 보안 프레임워크를 제시한다. CDN/Anycast/HTTP3/QUIC, 글로벌 데이터베이스(Aurora Global Database, DynamoDB Global Tables)와 함께 WAF/WAAP·봇 방어·TLS·키 관리·SIEM/CNAPP를 통합한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>전 세계 p95 응답 <strong>200ms 이하</strong> 및 가용성 <strong>99.99%</strong> 달성</li>
    <li>리전 장애 시 <strong>무중단 페일오버</strong> (RTO ≤ 1분, RPO ≤ 1초 ≤ 워크로드별 조정)</li>
    <li>엣지·오리진 전 구간 <strong>TLS 암호화</strong>, 봇/스크레이핑 방어, 데이터 주권 준수</li>
    <li>실사용자 모니터링(RUM)·합성(Synthetic)·SIEM·CNAPP로 <strong>성능-보안 동시 관측</strong></li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <!-- Inline SVG: Global Perf & Security -->
  <svg viewBox="0 0 1100 450" width="100%" height="auto" aria-label="글로벌 성능/보안 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="40" y="40" width="300" height="120" class="box"/>
    <text x="50" y="65" class="title">글로벌 엣지</text>
    <text x="50" y="90" class="txt">CloudFront(HTTP/3, QUIC), Anycast</text>
    <text x="50" y="110" class="txt">WAF Bot Control, TLS 1.3</text>

    <rect x="380" y="40" width="320" height="120" class="box"/>
    <text x="390" y="65" class="title">오리진(다중 리전)</text>
    <text x="390" y="90" class="txt">ALB/NLB, ECS/EKS/EC2</text>
    <text x="390" y="110" class="txt">Global Accelerator, Route 53 Latency</text>

    <rect x="730" y="40" width="330" height="120" class="box"/>
    <text x="740" y="65" class="title">글로벌 데이터</text>
    <text x="740" y="90" class="txt">Aurora Global DB, DynamoDB Global</text>
    <text x="740" y="110" class="txt">ElastiCache Global Datastore</text>

    <rect x="140" y="200" width="820" height="160" class="box"/>
    <text x="150" y="225" class="title">보안/관찰성</text>
    <text x="150" y="250" class="txt">CloudTrail, CloudWatch, X-Ray, OpenTelemetry, RUM/Synthetic</text>
    <text x="150" y="270" class="txt">Security Hub, GuardDuty, Config, SIEM(Splunk/Elastic), CNAPP(Wiz/Prisma)</text>

    <line x1="340" y1="100" x2="380" y2="100" class="arrow"/>
    <line x1="700" y1="100" x2="730" y2="100" class="arrow"/>
    <line x1="550" y1="160" x2="550" y2="200" class="arrow"/>
  </svg>

  <h2>3. 주요 서비스 구성</h2>
  <div class="grid grid-2">
    <div>
      <h3>성능/전송</h3>
      <ul>
        <li><span class="aws">CloudFront</span> (HTTP/3/QUIC, Regional Edge Caches, Origin Shield)</li>
        <li><span class="aws">Global Accelerator</span> (Anycast 가속, 헬스 기반 페일오버)</li>
        <li><span class="aws">Route 53</span> 지연시간/건강검사 라우팅</li>
        <li>이미지/동영상 최적화: <span class="aws">Lambda@Edge</span>/CloudFront Functions</li>
      </ul>
    </div>
    <div>
      <h3>데이터/애플리케이션</h3>
      <ul>
        <li><span class="aws">Aurora Global Database</span>, <span class="aws">DynamoDB Global Tables</span></li>
        <li><span class="aws">ElastiCache Global Datastore</span> (세션/인기 키 글로벌 캐시)</li>
        <li>컴퓨트: ALB + <span class="aws">EKS/ECS/EC2 Auto Scaling</span></li>
      </ul>
    </div>
  </div>

  <h2>4. 보안 자동화 및 탐지</h2>
  <ul>
    <li>엣지 봇 탐지·차단(WAF Bot Control), TLS 정책 강제(TLS 1.2/1.3, HSTS)</li>
    <li>리전 장애 감지 시 GA/Route 53 수준의 <strong>자동 페일오버</strong></li>
    <li>CloudFront/WAF/ALB 로그를 SIEM에 수집, Geo·User-Agent·AS 기반 상관 탐지</li>
    <li>Config/Security Hub를 통한 규정 준수(암호화·보존·접근제어) 자동 평가</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>제로트러스트 엣지:</strong> mTLS, JWT 스코프, 서명 검증 + 스키마 검증</li>
    <li><strong>인터넷 경로 가시성:</strong> <span class="vendor">ThousandEyes/Catchpoint</span>로 경로 성능 모니터링</li>
    <li><strong>WAAP 고도화:</strong> <span class="vendor">Cloudflare/Akamai/Fastly</span>와의 멀티-WAAP 전략(필요 시)</li>
  </ul>

  <h2>6. 요약</h2>
  <p>글로벌 성능은 <strong>엣지 캐시</strong>·<strong>Anycast 가속</strong>·<strong>다중 리전 오리진</strong>·<strong>글로벌 데이터</strong>의 조합으로 달성된다. 보안은 WAF/WAAP, TLS, 봇 방어, SIEM/CNAPP와 결합되어야 하며, 장애에 즉시 대응하는 자동 페일오버가 필수다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 글로벌 OTT 서비스 M사의 초고화질 스트리밍 성능/보안 고도화</h3>
  <p><strong>시나리오:</strong> M사는 4K/HDR 스트리밍을 6개 권역(미주/유럽/아시아/중동/남미/오세아니아)에서 제공한다. 요구사항: (1) 권역별 p95 응답 200ms 이하, (2) 프라임타임 동시 시청자 400만, (3) DRM/TLS 강제 및 불법 다운로드/스크레이핑 방지, (4) 리전 장애 시 무중단 서비스, (5) 서브샤딩된 메타데이터(시청기록·즐겨찾기)의 지역 일관성 유지. 과거 장애는 엣지 캐시 미스 폭주로 오리진 과부하, 특정 국가 ISP 구간 지연, 리전 WAF 규칙 불일치, Aurora 리더 랙 경합이었다.</p>

  <p><strong>해설:</strong> 다음 표의 <em>글로벌 최적화 + 보안</em> 전략을 적용한다.</p>

  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>KPI/임계</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>엣지 전송</td>
        <td><span class="aws">CloudFront</span> (Origin Shield, Regional Edge Cache), <span class="aws">WAF</span></td>
        <td>HLS/DASH 세그먼트 캐싱, <em>signed URL</em>·<em>token auth</em>, Bot Control로 스크레이핑 차단</td>
        <td>캐시 히트 ≥ 92%, 봇 차단율 ≥ 98%</td>
      </tr>
      <tr>
        <td>전세계 가속</td>
        <td><span class="aws">Global Accelerator</span>, <span class="aws">Route 53</span></td>
        <td>지연시간 기반 라우팅 + GA 헬스체크로 리전 장애 즉시 우회</td>
        <td>페일오버 ≤ 60s, 헬시 엔드포인트 ≥ 99.99%</td>
      </tr>
      <tr>
        <td>오리진 스케일</td>
        <td>ALB + <span class="aws">EKS/ECS Auto Scaling</span></td>
        <td>프라임타임 전 Warm-up; 버전 롤아웃은 블루/그린 + 가드레일</td>
        <td>5xx ≤ 0.3%, 배포 실패 롤백 ≤ 5분</td>
      </tr>
      <tr>
        <td>글로벌 데이터</td>
        <td><span class="aws">Aurora Global Database</span>, <span class="aws">DynamoDB Global Tables</span>, <span class="aws">ElastiCache Global</span></td>
        <td>읽기 로컬화, 쓰기 리더 리전 집약, 메타데이터는 글로벌 테이블로 eventual 일관</td>
        <td>리플리케이션 지연 ≤ 1s, 캐시 히트 ≥ 90%</td>
      </tr>
      <tr>
        <td>보안/권리</td>
        <td><span class="aws">WAF</span> WAAP 룰, TLS 1.3, DRM KMS</td>
        <td>도메인 서명, 키 회전, 국가/ASN 블록, 토큰 재생 방지</td>
        <td>DRM 실패율 ≤ 0.1%, 키 유출 0</td>
      </tr>
      <tr>
        <td>관찰성/성능</td>
        <td>CloudWatch, X-Ray, OpenTelemetry, <span class="vendor">Datadog/ThousandEyes</span></td>
        <td>RUM으로 실제 사용자 p95 추적, ISP 구간 지연은 인터넷 헬스 대시보드로 분석</td>
        <td>권역 p95 ≤ 200ms, SLA 위반 알람 MTTA ≤ 2분</td>
      </tr>
      <tr>
        <td>SIEM/CNAPP</td>
        <td><span class="vendor">Splunk/Elastic</span>, <span class="vendor">Wiz/Prisma</span></td>
        <td>엣지·오리진·데이터 로그 상관, 취약 구성/자산 리스크 상시 평가</td>
        <td>고위험 미조치 0건(24h 이내 조치율 100%)</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> M사는 CloudFront+GA+다중 리전 오리진+글로벌 데이터 계층을 조합해 지연과 장애를 동시에 흡수한다. WAF/DRM/TLS와 SIEM/CNAPP 연계를 통해 권리보호와 규제 준수를 보장한다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>CloudFront Origin Shield/Regional Cache, HTTP/3/QUIC 활성화</li>
    <li>Global Accelerator + Route 53 지연/헬스 라우팅, 페일오버 리허설</li>
    <li>Aurora Global DB, DynamoDB Global Tables 설계(쓰기 집약/읽기 로컬)</li>
    <li>WAF WAAP 룰/봇 제어, TLS 정책(HSTS, TLS1.2/1.3), 서명 URL/쿠키</li>
    <li>RUM + Synthetic + OTel 수집, SIEM/CNAPP 상관 분석</li>
    <li>국가/지역 데이터 주권 정책 반영(CMK 지역 고정, 보존·파기 수명주기)</li>
  </ul>
</body>
</html>

<!-- END OF 4_2_4_글로벌_서비스_성능_제고를_고려한_아키텍처와_보안.html -->

<!-- START OF 4_3_1_하이브리드_클라우드_기반의_데이터_아키텍처와_보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4-3-1 하이브리드 클라우드 기반의 데이터 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-3-1 하이브리드 클라우드 기반의 데이터 아키텍처와 보안</h1>
  <p>본 절에서는 온프레미스와 퍼블릭 클라우드를 결합한 <strong>하이브리드 클라우드 데이터 아키텍처</strong>에서, 데이터의 <strong>보안성·일관성·지속성</strong>을 보장하는 방법을 제시한다. AWS의 <span class="aws">Storage Gateway</span>, <span class="aws">DataSync</span>, <span class="aws">Direct Connect</span>를 중심으로, <span class="vendor">NetApp, Veeam</span> 등 3rd-Party 백업 솔루션과의 연계를 포함한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>온프레미스와 클라우드 간 <strong>보안적 데이터 이동</strong>과 일관된 암호화 체계 확립</li>
    <li>전송 중·저장 중 데이터에 대한 <strong>End-to-End 보호</strong></li>
    <li>동기/비동기 복제를 통한 RPO/RTO 준수 (RTO ≤ 5분, RPO ≤ 30초)</li>
    <li>감사·규제 대응(금융, 공공, 의료)을 위한 <strong>로그 무결성</strong> 및 <strong>키 관리</strong></li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <svg viewBox="0 0 1100 420" width="100%" height="auto" aria-label="하이브리드 데이터 보안 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="40" y="60" width="320" height="140" class="box"/>
    <text x="50" y="85" class="title">온프레미스 데이터센터</text>
    <text x="50" y="110" class="txt">SAN/NAS, Database, Local Backup</text>
    <text x="50" y="130" class="txt">VPN, Direct Connect Gateway</text>

    <rect x="400" y="60" width="320" height="140" class="box"/>
    <text x="410" y="85" class="title">전송 및 동기화 계층</text>
    <text x="410" y="110" class="txt">AWS Storage Gateway, DataSync</text>
    <text x="410" y="130" class="txt">TLS 1.3, VPC Endpoint, PrivateLink</text>

    <rect x="760" y="60" width="300" height="140" class="box"/>
    <text x="770" y="85" class="title">클라우드 스토리지</text>
    <text x="770" y="110" class="txt">S3, EBS, FSx, RDS, Redshift</text>
    <text x="770" y="130" class="txt">KMS 암호화, CloudTrail 로깅</text>

    <rect x="180" y="230" width="700" height="140" class="box"/>
    <text x="190" y="255" class="title">보안/감사/거버넌스 계층</text>
    <text x="190" y="280" class="txt">Security Hub, GuardDuty, Macie, Config, Audit Manager</text>
    <text x="190" y="300" class="txt">SIEM (<span class="vendor">Splunk, Elastic</span>), CNAPP (<span class="vendor">Wiz, Prisma Cloud</span>)</text>

    <line x1="360" y1="130" x2="400" y2="130" class="arrow"/>
    <line x1="720" y1="130" x2="760" y2="130" class="arrow"/>
    <line x1="560" y1="200" x2="560" y2="230" class="arrow"/>
  </svg>

  <h2>3. 주요 서비스 구성</h2>
  <div class="grid grid-2">
    <div>
      <h3>데이터 전송 및 동기화</h3>
      <ul>
        <li><span class="aws">AWS Storage Gateway</span> (File/Volume/Tape)로 온프레미스 ↔ 클라우드 연계</li>
        <li><span class="aws">AWS DataSync</span>를 통한 실시간 증분 복제 및 암호화 전송(TLS 1.3)</li>
        <li>전용선 연결: <span class="aws">Direct Connect</span> + Transit Gateway(VPC Private Path)</li>
      </ul>
    </div>
    <div>
      <h3>보안 및 규제 대응</h3>
      <ul>
        <li><span class="aws">KMS</span>로 데이터 암호화, CloudHSM으로 HSM 백업</li>
        <li><span class="aws">Macie</span>로 개인정보 검출 및 자동 분류</li>
        <li><span class="aws">Security Hub</span>, <span class="aws">GuardDuty</span>로 이상 탐지</li>
        <li>SIEM: <span class="vendor">Splunk/Elastic</span>, CNAPP: <span class="vendor">Wiz/Prisma</span></li>
      </ul>
    </div>
  </div>

  <h2>4. 보안 자동화 및 탐지</h2>
  <ul>
    <li>데이터 복제 이벤트를 <span class="aws">EventBridge</span>로 수집 → CloudTrail 로그와 상관 분석</li>
    <li><span class="aws">Macie</span> 탐지 결과를 기반으로 <strong>PII 데이터 접근 차단</strong> 정책 자동화</li>
    <li>암호화 누락/버킷 퍼블릭 노출은 <span class="aws">Config</span> 규칙 위반으로 탐지 후 <strong>SOAR</strong> 런북으로 격리</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>데이터 주권 분리:</strong> 리전/계정 단위 KMS 키 관리, 국가별 암호화 스코프 적용</li>
    <li><strong>데이터 전송 가시성:</strong> <span class="vendor">ThousandEyes</span>로 WAN 전송 지연·패킷 손실 모니터링</li>
    <li><strong>AI 기반 탐지:</strong> <span class="vendor">Wiz</span> CNAPP으로 클라우드-온프레 전역 데이터 자산 탐지</li>
  </ul>

  <h2>6. 요약</h2>
  <p>하이브리드 데이터 아키텍처는 전송·저장·감사의 전 단계에서 <strong>암호화·감사·가시성</strong>을 확보해야 한다. AWS 네이티브와 서드파티 CNAPP/SIEM을 결합하여 <strong>규제 대응형 보안 체계</strong>를 완성한다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 글로벌 제조기업 A사의 온프레미스 ERP 백업 클라우드 전환</h3>
  <p><strong>시나리오:</strong> A사는 유럽·한국에 각각 ERP 서버를 보유하고 있으며, 매일 새벽 데이터 백업과 주간 리포트 파일을 AWS로 이전한다. 요구사항은 (1) 전송 중 데이터의 암호화 및 무결성 보장, (2) 24시간 내 복구 가능(RTO 5분), (3) 개인정보 포함 파일에 대한 자동 탐지·차단, (4) 감사 로그의 위변조 방지이다. 과거 문제는 DataSync 작업 오류 시 복제 누락, KMS 키 지역 불일치, Macie 미탐지로 인한 GDPR 위반이었다.</p>

  <p><strong>해설:</strong> 다음 표는 A사의 하이브리드 백업 보안 구조다.</p>
  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>KPI/임계치</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>데이터 전송</td>
        <td><span class="aws">DataSync</span> + <span class="aws">Direct Connect</span></td>
        <td>TLS 1.3 암호화 채널 + 증분 복제; 실패 시 재시도 및 경보(EventBridge)</td>
        <td>복제 성공률 ≥ 99.9%</td>
      </tr>
      <tr>
        <td>저장/암호화</td>
        <td><span class="aws">S3</span> + <span class="aws">KMS</span>(CMK) + <span class="aws">CloudHSM</span></td>
        <td>계정별 CMK 분리, CloudHSM 백업, 키 사용 로그는 SIEM 전송</td>
        <td>암호화 누락 0건</td>
      </tr>
      <tr>
        <td>개인정보 탐지</td>
        <td><span class="aws">Macie</span> + <span class="vendor">Wiz</span> CNAPP</td>
        <td>Macie PII 패턴 탐지 → SOAR를 통해 IAM deny 정책 자동 적용</td>
        <td>PII 미탐률 ≤ 1%</td>
      </tr>
      <tr>
        <td>감사/로깅</td>
        <td><span class="aws">CloudTrail</span> + <span class="vendor">Splunk</span></td>
        <td>로그 해시 서명 및 무결성 검증; GDPR Audit Trail 생성</td>
        <td>로그 무결성 오류 0건</td>
      </tr>
      <tr>
        <td>가시성/대응</td>
        <td><span class="aws">Security Hub</span>, <span class="aws">GuardDuty</span>, <span class="vendor">Elastic</span></td>
        <td>이상 트래픽, 비정상 복제 시 경보 및 자동 차단</td>
        <td>탐지→조치 ≤ 30초</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> A사는 DataSync+Direct Connect+KMS+Macie 연계로 안전한 데이터 이동·저장·감사를 달성한다. CNAPP/SIEM 결합을 통해 GDPR 등 글로벌 규제 대응을 자동화할 수 있다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>DataSync 작업 로그 검증 및 실패 알림 설정(EventBridge)</li>
    <li>KMS 키 지역별 관리(리전 별 CMK) 및 HSM 백업</li>
    <li>Macie PII 패턴 업데이트 및 SOAR 정책 자동화</li>
    <li>CloudTrail 로그 무결성 서명 활성화</li>
    <li>SIEM/CNAPP 연동으로 전체 데이터 흐름 상관분석</li>
  </ul>
</body>
</html>

<!-- END OF 4_3_1_하이브리드_클라우드_기반의_데이터_아키텍처와_보안.html -->

<!-- START OF 4_3_2_애플리케이션_데이터_암호화_기반의_아키텍처와_보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4-3-2 애플리케이션/데이터 암호화 기반의 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-3-2 애플리케이션/데이터 암호화 기반의 아키텍처와 보안</h1>
  <p>본 절은 애플리케이션 계층과 데이터 계층에서 <strong>암호화(At-Rest/In-Transit/In-Use)</strong>를 체계화하는 방법을 제시한다. AWS 네이티브(<span class="aws">KMS</span>, <span class="aws">CloudHSM</span>, <span class="aws">Private CA</span>, <span class="aws">Secrets Manager</span>, <span class="aws">ACM</span>)를 기본으로, 필요 시 <span class="vendor">HashiCorp Vault</span>, <span class="vendor">Thales CipherTrust</span>, <span class="vendor">Fortanix DSM</span>, <span class="vendor">Venafi</span> 등 3rd-Party 솔루션으로 <strong>차세대 보안</strong>을 보완한다. 탐지·거버넌스는 SIEM과 <span class="vendor">CNAPP</span>(예: <span class="vendor">Wiz</span>, <span class="vendor">Prisma Cloud</span>)로 통합한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li><strong>데이터 수명주기</strong>(수집→저장→처리→전송→폐기) 전 구간 암호화 일관성</li>
    <li>키/비밀 관리의 <strong>분리된 신뢰경계</strong>와 자동 로테이션</li>
    <li>암호화 상태에서도 처리 가능한 <strong>In-Use 보호</strong>(SGX/Enclave, TEE)</li>
    <li>감사/규제(PCI-DSS, ISMS-P, GDPR) <strong>증적 자동화</strong></li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <!-- Inline SVG: Encryption Architecture End-to-End -->
  <svg viewBox="0 0 1100 460" width="100%" height="auto" aria-label="애플리케이션/데이터 암호화 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="40" y="50" width="300" height="120" class="box"/>
    <text x="50" y="75" class="title">키/비밀 관리</text>
    <text x="50" y="100" class="txt">KMS(대칭/비대칭), CloudHSM
    </text>
    <text x="50" y="118" class="txt">Secrets Manager, Private CA/ACM</text>

    <rect x="380" y="50" width="300" height="120" class="box"/>
    <text x="390" y="75" class="title">애플리케이션 계층</text>
    <text x="390" y="100" class="txt">TLS(ACM), 앱 레벨 암호화(AEAD)</text>
    <text x="390" y="118" class="txt">Nitro Enclaves / SGX(인유즈 보호)</text>

    <rect x="720" y="50" width="340" height="120" class="box"/>
    <text x="730" y="75" class="title">데이터 계층</text>
    <text x="730" y="100" class="txt">S3, EBS, RDS/Aurora, DynamoDB</text>
    <text x="730" y="118" class="txt">CMEK, TDE, KMS 연동, PITR</text>

    <rect x="150" y="210" width="800" height="160" class="box"/>
    <text x="160" y="235" class="title">감사/탐지/거버넌스</text>
    <text x="160" y="260" class="txt">CloudTrail, CloudWatch, Macie, Security Hub, Config</text>
    <text x="160" y="280" class="txt">SIEM(Splunk/Elastic), CNAPP(Wiz/Prisma), SOAR</text>

    <line x1="340" y1="110" x2="380" y2="110" class="arrow"/>
    <line x1="680" y1="110" x2="720" y2="110" class="arrow"/>
    <line x1="550" y1="170" x2="550" y2="210" class="arrow"/>
  </svg>

  <h2>3. 주요 서비스 구성</h2>
  <div class="grid grid-2">
    <div>
      <h3>키/비밀/인증서</h3>
      <ul>
        <li><span class="aws">KMS</span> (대칭/비대칭 CMK, MRK), <span class="aws">CloudHSM</span> (HSM-backed 키)
        </li>
        <li><span class="aws">AWS Private CA</span> + <span class="aws">ACM</span> (TLS 인증서 수명주기)</li>
        <li><span class="aws">Secrets Manager</span> 버전/자동 로테이션, <span class="vendor">HashiCorp Vault</span> 대체/보완</li>
      </ul>
    </div>
    <div>
      <h3>애플리케이션/데이터 암호화</h3>
      <ul>
        <li>전송: <span class="aws">ALB/API Gateway</span> + TLS 1.2/1.3 강제, HSTS</li>
        <li>앱 레벨: AEAD(GCM/ChaCha20-Poly1305) + <em>Envelope Encryption</em>(KMS)</li>
        <li>저장: S3 SSE-KMS, EBS/EFS 암호화, RDS TDE, DynamoDB KMS, Redshift CEK</li>
      </ul>
    </div>
  </div>

  <h2>4. 보안 자동화 및 탐지</h2>
  <ul>
    <li>키 사용/권한 변화를 <span class="aws">CloudTrail</span>로 수집, <strong>SIEM</strong> 상관(이상 접근 패턴 탐지)</li>
    <li><span class="aws">Macie</span>로 PII/민감데이터 자동 분류 → <strong>암호화 미적용/공개 노출</strong> 차단</li>
    <li><span class="aws">Config</span> 규칙으로 SSE/CMK 미적용 리소스를 <strong>자동 격리</strong> (SCP/태그 기반)</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>인유즈(In-Use) 보호:</strong> <span class="aws">Nitro Enclaves</span> + <span class="vendor">Fortanix</span>/SGX 기반 비밀 처리</li>
    <li><strong>키 수명주기 거버넌스:</strong> <span class="vendor">Venafi</span>로 기기·워크로드 인증서/키 카탈로그 관리</li>
    <li><strong>다계정 키 분리:</strong> 조직/리전 단위 <span class="aws">MRK</span> + <em>키 그라프</em>(소유·사용 경로) 문서화</li>
  </ul>

  <h2>6. 요약</h2>
  <p>암호화 중심 아키텍처는 <strong>키/비밀/인증서</strong>의 일관된 거버넌스와 <strong>앱·데이터</strong> 레이어의 표준화가 핵심이다. SIEM/CNAPP와의 연동으로 증적을 자동 수집하고, 규제·감사 대응을 <strong>코드화</strong>하여 반복 가능하게 만든다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 글로벌 커머스 C사의 카드결제/프로필 데이터 암호화 표준화</h3>
  <p><strong>시나리오:</strong> C사는 카드결제 토큰(PAN 대체), 고객 프로필(PII), 주문/배송정보를 다중 리전에서 처리한다. 과거 사고는 (1) S3 일부 버킷의 SSE 미적용, (2) 서비스 계정의 과도 권한으로 KMS 키 남용, (3) 만료 인증서로 TLS 실패, (4) 분석 파이프라인에서 PII가 평문으로 임시 저장된 문제였다. 목표는 <strong>PCI-DSS v4.0</strong>, <strong>ISMS-P</strong>, <strong>GDPR</strong>을 만족하면서 p95 응답 150ms를 유지하는 것이다.</p>

  <p><strong>해설:</strong> 다음 표는 C사의 <em>암호화 표준화</em> 설계다.</p>
  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>KPI/임계</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>키 관리</td>
        <td><span class="aws">KMS</span> + <span class="aws">CloudHSM</span> + <span class="vendor">Venafi</span>
        </td>
        <td>CMK 분리(계정·리전별), 키 정책/그랜트 최소화, 인증서/키 카탈로그 자동화</td>
        <td>불필요 그랜트 0건, 키 회전 주기 365d</td>
      </tr>
      <tr>
        <td>비밀/토큰</td>
        <td><span class="aws">Secrets Manager</span>, <span class="vendor">HashiCorp Vault</span></td>
        <td>STS 단기 자격증명, 토큰화(서드파티 결제) 및 Vault Transit로 필드 암호화</td>
        <td>하드코딩 비밀 0건, 노출 사고 0</td>
      </tr>
      <tr>
        <td>전송</td>
        <td><span class="aws">ACM</span>/Private CA, ALB/API GW</td>
        <td>TLS 1.2/1.3, HSTS, mTLS(서버-서버), 인증서 만료 알림/교체 자동화</td>
        <td>TLS 실패율 < 0.1%</td>
      </tr>
      <tr>
        <td>저장</td>
        <td>S3/EBS/EFS/RDS/DynamoDB + KMS</td>
        <td>SSE-KMS 필수, RDS TDE 활성화, DynamoDB KMS 필수, 버킷 퍼블릭 차단</td>
        <td>암호화 미적용 0건, 퍼블릭 버킷 0</td>
      </tr>
      <tr>
        <td>인유즈</td>
        <td><span class="aws">Nitro Enclaves</span>, <span class="vendor">Fortanix</span></td>
        <td>민감 연산(토큰 발급/복호화)은 Enclave로 격리, SGX/TEE 활용</td>
        <td>키 접근 지연 ≤ 5ms</td>
      </tr>
      <tr>
        <td>탐지/감사</td>
        <td>CloudTrail, Macie, <span class="aws">Security Hub</span>, SIEM</td>
        <td>키 사용/접근 이상 상관분석, PII 평문 저장 탐지→SOAR로 차단</td>
        <td>탐지→조치 ≤ 30s</td>
      </tr>
      <tr>
        <td>CNAPP</td>
        <td><span class="vendor">Wiz/Prisma Cloud</span></td>
        <td>자산-데이터-권한 그래프 기반 위협 우선순위화, 규정 준수 자동평가</td>
        <td>고위험 미조치 0건(24h 이내)</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> C사는 "키·비밀·인증서" 거버넌스를 중심에 두고, 앱 레벨-저장-전송-인유즈 암호화를 표준화한다. SIEM/CNAPP와 연계하여 위협을 조기에 탐지·차단하고, 규제 증적을 자동 생성한다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>계정/리전별 CMK 분리 및 키 그랜트 최소권한 설정</li>
    <li>Secrets Manager/Vault 연계, 자동 로테이션 파이프라인</li>
    <li>ALB/API Gateway TLS 정책(HSTS, TLS1.2/1.3, mTLS) 강제</li>
    <li>S3/EBS/EFS/RDS/DynamoDB SSE-KMS/TDE 일괄 강제 및 퍼블릭 차단</li>
    <li>Macie + SIEM 상관분석으로 평문 PII 탐지/차단</li>
    <li>Nitro Enclaves/SGX 기반 인유즈 보호 적용</li>
  </ul>
</body>
</html>

<!-- END OF 4_3_2_애플리케이션_데이터_암호화_기반의_아키텍처와_보안.html -->

<!-- START OF 4_4_1_저렴한_클라우드_서비스로_구축한_클라우드_아키텍처와_보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4-4-1 저렴한 클라우드 서비스로 구축한 클라우드 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-4-1 저렴한 클라우드 서비스로 구축한 클라우드 아키텍처와 보안</h1>
  <p>본 절은 비용 효율을 최우선으로 하면서도 <strong>보안 기준선</strong>을 유지하는 아키텍처를 제시한다. 서버리스/매니지드/스팟/저가형 스토리지 등 <strong>저비용 옵션</strong>을 적극 활용하되, <strong>성능·가용성·보안</strong> 리스크를 가드레일로 통제한다. SIEM과 <span class="vendor">CNAPP</span>(Gartner) 연계를 통해 <strong>가시성</strong>과 <strong>규정 준수</strong>를 유지한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>월 비용을 기준 대비 <strong>30~60%</strong> 절감하면서 핵심 SLO 유지</li>
    <li>저비용 리소스(스팟/서버리스/저장계층) 사용 시 <strong>보안·가용성 가드레일</strong> 내재화</li>
    <li>자동화된 <strong>FinOps + SecOps</strong> 파이프라인으로 낭비와 위험 동시 감시</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <!-- Inline SVG: Cost-Optimized & Secure Architecture -->
  <svg viewBox="0 0 1100 460" width="100%" height="auto" aria-label="저비용 보안 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="30" y="40" width="260" height="120" class="box"/>
    <text x="40" y="65" class="title">엣지/인입</text>
    <text x="40" y="90" class="txt">CloudFront(캐시), API GW</text>
    <text x="40" y="110" class="txt">WAF, Shield Standard</text>

    <rect x="320" y="40" width="280" height="120" class="box"/>
    <text x="330" y="65" class="title">애플리케이션</text>
    <text x="330" y="90" class="txt">Lambda/ECS Fargate Spot</text>
    <text x="330" y="110" class="txt">Graviton, Auto Scaling</text>

    <rect x="630" y="40" width="220" height="120" class="box"/>
    <text x="640" y="65" class="title">데이터/저장</text>
    <text x="640" y="90" class="txt">DynamoDB On-Demand</text>
    <text x="640" y="110" class="txt">S3 IA/Glacier, RDS gp3</text>

    <rect x="880" y="40" width="190" height="120" class="box"/>
    <text x="890" y="65" class="title">보안/거버넌스</text>
    <text x="890" y="90" class="txt">CloudTrail, Config</text>
    <text x="890" y="110" class="txt">Security Hub, GuardDuty</text>

    <rect x="120" y="200" width="820" height="180" class="box"/>
    <text x="130" y="225" class="title">FinOps + SecOps</text>
    <text x="130" y="250" class="txt">Cost Explorer, Budgets, Compute Optimizer</text>
    <text x="130" y="270" class="txt">SIEM(Splunk/Elastic), CNAPP(Wiz/Prisma), CloudZero/Apptio</text>

    <line x1="290" y1="100" x2="320" y2="100" class="arrow"/>
    <line x1="600" y1="100" x2="630" y2="100" class="arrow"/>
    <line x1="850" y1="100" x2="880" y2="100" class="arrow"/>
    <line x1="530" y1="160" x2="530" y2="200" class="arrow"/>
  </svg>

  <h2>3. 주요 서비스 구성</h2>
  <div class="grid grid-2">
    <div>
      <h3>비용 최적화</h3>
      <ul>
        <li><span class="aws">Lambda</span>, <span class="aws">Fargate Spot</span>, <span class="aws">EC2 Spot</span> + <em>중단 대비</em>(Lifecycle Hook, Drain)</li>
        <li><span class="aws">Graviton</span> 기반 런타임(최대 20~40% 비용/성능 개선, 워크로드 의존)</li>
        <li>스토리지: <span class="aws">S3 Intelligent-Tiering/IA/Glacier</span>, <span class="aws">EBS gp3</span>, 로그는 S3+Athena</li>
        <li>데이터베이스: <span class="aws">DynamoDB On-Demand</span> 또는 <span class="aws">Aurora Serverless v2</span></li>
        <li>약정: <span class="aws">Savings Plans/Reserved Instances</span>(핵심 베이스로드), 나머지는 Spot</li>
      </ul>
    </div>
    <div>
      <h3>보안/거버넌스</h3>
      <ul>
        <li><span class="aws">WAF</span>, <span class="aws">Shield Standard</span>, <span class="aws">KMS</span>, <span class="aws">IAM</span> 최소권한</li>
        <li><span class="aws">Security Hub</span>, <span class="aws">GuardDuty</span>, <span class="aws">Config</span>, <span class="aws">CloudTrail</span></li>
        <li>SIEM: <span class="vendor">Splunk/Elastic</span>; CNAPP: <span class="vendor">Wiz/Prisma Cloud</span></li>
        <li>FinOps: <span class="aws">Cost Explorer</span>, <span class="aws">AWS Budgets</span>, <span class="aws">Compute Optimizer</span>, <span class="vendor">CloudZero/Apptio Cloudability</span></li>
      </ul>
    </div>
  </div>

  <h2>4. 보안 자동화 및 탐지</h2>
  <ul>
    <li>스팟 중단 신호 수신 시 <strong>무중단 드레인</strong> 및 대체 노드 자동 프로비저닝(EKS Karpenter/ASG)</li>
    <li>저가 스토리지 전환 시 <span class="aws">Config</span> 규칙으로 <strong>암호화/보존</strong> 준수 검증(WORM: S3 Object Lock)</li>
    <li>Security Hub 고심각도 → SOAR(토큰 폐기, SG 차단, 키 회전) 자동 실행</li>
    <li>CloudTrail/ALB/WAF 로그를 SIEM으로 수집해 <strong>비정상 트래픽·권한 남용</strong> 상관 탐지</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>저비용 WAAP 다계층:</strong> WAF 기반 WAAP + <span class="vendor">Cloudflare/Akamai/Fastly</span> (필요 시 멀티-WAAP)</li>
    <li><strong>서플라이체인 보호:</strong> 컨테이너/함수 이미지 서명(<span class="vendor">Sigstore</span>), 취약점 스캔(Trivy) 파이프라인</li>
    <li><strong>데이터 수명주기 비용/보안 동기화:</strong> S3수명주기 + Macie/Access Analyzer 동시 적용</li>
  </ul>

  <h2>6. 요약</h2>
  <p>저비용 아키텍처는 <strong>스팟/서버리스/저장계층</strong>을 적극 활용하되, <strong>가드레일</strong>(IAM/KMS/로깅/WAF/Config)과 <strong>FinOps+SecOps</strong> 자동화를 결합해 위험을 제어해야 한다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 미디어 스타트업 S사의 "절감 50%" 목표 아키텍처 리디자인</h3>
  <p><strong>시나리오:</strong> S사는 월 1.2억 요청의 VOD/썸네일 서비스를 운영한다. 현 비용은 월 1억원 수준이며, <strong>50% 절감</strong>을 목표로 한다. 과거 과금 급증의 원인은 (1) EKS 온디맨드 과다, (2) S3 Standard 장기 보관, (3) ALB/데이터 전송 비용 증가, (4) 보안 이벤트 증가로 SIEM 요금 급등이었다. SLO는 <em>p95 250ms</em>, 가용성 99.9% 이상, 보안 기준은 <span class="aws">Security Hub</span> 기본 표준과 <span class="vendor">CNAPP</span> High Severity 0건 유지이다.</p>

  <p><strong>해설:</strong> 다음 표의 <em>저비용·보안 동시 달성</em> 계획을 적용한다.</p>
  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>절감/지표</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>컴퓨트</td>
        <td><span class="aws">Fargate Spot</span> + <span class="aws">Lambda</span> + <span class="aws">Graviton</span></td>
        <td>비핵심 워크로드는 Spot, 핫패스는 Lambda; 아키텍처 ARM 최적화</td>
        <td>컴퓨트 비용 ↓ 35~60%</td>
      </tr>
      <tr>
        <td>전송/엣지</td>
        <td><span class="aws">CloudFront</span> + 압축/WebP/AVIF</td>
        <td>엣지 캐시 적중률 향상, 이미지 최적화</td>
        <td>데이터 전송 ↓ 20~40%, p95 ↓</td>
      </tr>
      <tr>
        <td>스토리지</td>
        <td><span class="aws">S3 Intelligent‑Tiering</span> / Glacier, <span class="aws">EBS gp3</span></td>
        <td>오브젝트 수명주기 전환, gp3로 IOPS/스루풋 분리 조정</td>
        <td>스토리지 ↓ 30~70%</td>
      </tr>
      <tr>
        <td>DB</td>
        <td><span class="aws">DynamoDB On‑Demand</span> / <span class="aws">Aurora Serverless v2</span></td>
        <td>트래픽 변동 큰 테이블/쿼리를 온디맨드/서버리스로</td>
        <td>DB 비용 ↓ 20~50%</td>
      </tr>
      <tr>
        <td>로깅/가시성</td>
        <td>CloudWatch Log 수명주기 + S3/Athena</td>
        <td>고가 스토리지 장기보관 제거, 콜드쿼리는 Athena</td>
        <td>로그 비용 ↓ 30~60%</td>
      </tr>
      <tr>
        <td>보안</td>
        <td><span class="aws">WAF</span>, <span class="aws">Shield Standard</span>, <span class="aws">KMS</span></td>
        <td>기본 WAAP, 필드 암호화, 최소권한</td>
        <td>CNAPP High Sev 0, Hub 규정 위반 0</td>
      </tr>
      <tr>
        <td>FinOps</td>
        <td><span class="aws">Budgets</span>/<span class="aws">Cost Explorer</span>/<span class="aws">Compute Optimizer</span>, <span class="vendor">CloudZero/Apptio</span></td>
        <td>예산 경보, 비효율 권고 자동 적용</td>
        <td>초과청구 0, 예산 초과 알람 MTTA ≤ 5m</td>
      </tr>
      <tr>
        <td>SIEM/CNAPP</td>
        <td><span class="vendor">Splunk/Elastic</span>, <span class="vendor">Wiz/Prisma</span></td>
        <td>로그 샘플링/필터링, 고위험 우선순위화</td>
        <td>SIEM 비용 ↓ 20~40%</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> S사는 Spot/서버리스/저장계층 전환과 엣지 최적화로 큰 폭의 비용 절감을 달성한다. 동시에 WAF/KMS/Config/GuardDuty와 SIEM/CNAPP 가드레일로 보안 기준선을 유지한다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>Fargate/EC2 Spot 중단 대응(드레인/치환) + Warm‑pool/예측 스케일링</li>
    <li>S3 수명주기 정책(Intelligent‑Tiering/IA/Glacier) + Object Lock(WORM)</li>
    <li>CloudWatch Logs 보존기간 단축, 장기보관은 S3+Athena로 이관</li>
    <li>Budgets/Cost Explorer/Compute Optimizer 경보와 자동화 액션</li>
    <li>Security Hub/Config/GuardDuty 상시 평가, SIEM/CNAPP 상관 분석</li>
    <li>그라비톤/ARM 호환성 테스트(성능 회귀 테스트 포함)</li>
  </ul>
</body>
</html>

<!-- END OF 4_4_1_저렴한_클라우드_서비스로_구축한_클라우드_아키텍처와_보안.html -->

<!-- START OF 4_4_2_서비스_환경에_따른_자원의_유연성을_수반하는_아키텍처와_보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4-4-2 서비스 환경에 따른 자원의 유연성을 수반하는 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-4-2 서비스 환경에 따른 자원의 유연성을 수반하는 아키텍처와 보안</h1>
  <p>본 절은 개발/스테이징/프로덕션/배치/실시간 등 <strong>서로 다른 서비스 환경</strong>에 맞춰 <strong>컴퓨트·스토리지·네트워크</strong>를 유연하게 할당하고, 환경별 <strong>보안 기준선</strong>을 자동 적용하는 프레임워크를 제시한다. 다계정·다VPC 구조에서 <span class="aws">Organizations/SCP</span>, <span class="aws">Control Tower</span>, <span class="aws">Service Catalog</span>로 거버넌스를 표준화하고, <span class="vendor">CNAPP</span>(Wiz/Prisma)과 SIEM(Splunk/Elastic)으로 가시성을 통합한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>환경별(DEV/STG/PRD/BATCH/REALTIME) <strong>성능·비용·보안</strong> 목표에 맞는 자원 자동 할당</li>
    <li>계정/리전/태그 단위 <strong>보안 기준선</strong>(IAM/KMS/네트워크/로깅) 일괄 적용</li>
    <li>워크로드 특성에 따른 <strong>오토 스케일</strong> 및 <strong>스케줄드 스케일</strong> 동시 운용</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <!-- Inline SVG: Environment-aware Flexible Resource & Security -->
  <svg viewBox="0 0 1100 500" width="100%" height="auto" aria-label="환경별 유연 자원/보안 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="40" y="40" width="290" height="130" class="box"/>
    <text x="50" y="65" class="title">거버넌스 계층</text>
    <text x="50" y="90" class="txt">AWS Organizations/Control Tower</text>
    <text x="50" y="110" class="txt">SCP, IAM Identity Center, Service Catalog</text>

    <rect x="360" y="40" width="330" height="130" class="box"/>
    <text x="370" y="65" class="title">환경 템플릿</text>
    <text x="370" y="90" class="txt">DEV/STG/PRD/BATCH/REALTIME</text>
    <text x="370" y="110" class="txt">Terraform/CDK + Tag 기반 정책</text>

    <rect x="720" y="40" width="330" height="130" class="box"/>
    <text x="730" y="65" class="title">보안/관찰성</text>
    <text x="730" y="90" class="txt">CloudTrail, Config, Security Hub</text>
    <text x="730" y="110" class="txt">GuardDuty, Detective, SIEM/CNAPP</text>

    <rect x="140" y="210" width="820" height="220" class="box"/>
    <text x="150" y="235" class="title">자원 풀 & 배치 정책</text>
    <text x="150" y="260" class="txt">EC2 ASG/EKS/ECS/Lambda, Spot/On‑Demand/RI/Savings Plans</text>
    <text x="150" y="280" class="txt">S3/EBS/EFS/FSx, RDS/Aurora/DynamoDB, ElastiCache</text>
    <text x="150" y="300" class="txt">VPC, NACL/SG, Network Firewall, PrivateLink, WAF</text>

    <line x1="330" y1="105" x2="360" y2="105" class="arrow"/>
    <line x1="690" y1="105" x2="720" y2="105" class="arrow"/>
    <line x1="550" y1="170" x2="550" y2="210" class="arrow"/>
  </svg>

  <h2>3. 환경별 표준 설정</h2>
  <table>
    <thead>
      <tr><th>환경</th><th>컴퓨트</th><th>스토리지/DB</th><th>네트워크</th><th>보안 기준선</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>DEV</td>
        <td>EC2 Spot/EKS Fargate Spot, 
          <span class="aws">Auto Scaling</span> + 스케줄드 오프(야간/주말)</td>
        <td>S3 Intelligent‑Tiering, RDS Dev Small, DynamoDB On‑Demand</td>
        <td>단일 AZ 허용, NAT 게이트웨이 공유</td>
        <td>CloudTrail/Config 필수, <span class="aws">KMS</span> SSE‑KMS, WAF 기본 룰, GuardDuty</td>
      </tr>
      <tr>
        <td>STG</td>
        <td>EKS/EC2 혼합, Spot/On‑Demand 70/30</td>
        <td>RDS Multi‑AZ(리드레플리카), S3 IA</td>
        <td>이중 AZ, 서브넷 분리, <span class="aws">Network Firewall</span> 샘플 정책</td>
        <td>Security Hub 표준 + 침투테스트/퍼포먼스 테스트용 예외 태그</td>
      </tr>
      <tr>
        <td>PRD</td>
        <td>ASG/EKS On‑Demand + RI/SP, 예측/목표 스케일링</td>
        <td>Aurora/RDS Multi‑AZ, DynamoDB PIOPS, S3 Standard + Origin Shield</td>
        <td>다중 AZ, GA/Route53, PrivateLink, WAF 고급룰</td>
        <td>CloudTrail 조직기반, <span class="aws">KMS</span> MRK, <span class="aws">Shield Advanced</span>, SIEM/CNAPP 필수</td>
      </tr>
      <tr>
        <td>BATCH</td>
        <td>AWS Batch + EC2 Spot(대체 인스턴스 선택), 스케줄드 실행</td>
        <td>S3 Glacier Deep Archive, EBS gp3</td>
        <td>프라이빗 서브넷 + 게이트웨이형 엔드포인트</td>
        <td>작업별 <span class="aws">IAM</span> role 격리, <span class="aws">Macie</span>로 출력물 검사</td>
      </tr>
      <tr>
        <td>REALTIME</td>
        <td>Lambda/GA + ALB, EKS Karpenter 초단기 확장</td>
        <td>Aurora Serverless v2, ElastiCache Redis</td>
        <td>Anycast 가속(GA), HTTP/3, 레이트리밋</td>
        <td><span class="aws">WAF Bot Control</span>, <span class="aws">GuardDuty</span> 상시, SOAR 30s 내 대응</td>
      </tr>
    </tbody>
  </table>

  <h2>4. 보안 자동화 및 탐지</h2>
  <ul>
    <li>태그/환경 변수 기반 <strong>정책-as-Code</strong>: 
      배포 시 <span class="aws">OPA/Gatekeeper</span>·SCP·Config Rules로 환경별 가드레일 자동 강제</li>
    <li>스케줄드/오토 스케일 이벤트를 <span class="aws">EventBridge</span>로 수집 → 
      <strong>EDR/로깅/KMS</strong> 기준 충족 여부 검증(미충족 시 격리)</li>
    <li>CloudTrail/GuardDuty/Config 결과를 SIEM(<span class="vendor">Splunk/Elastic</span>)에 연동해 
      <strong>환경간 정책 불일치</strong> 탐지</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>서비스 메시 표준화:</strong> <span class="aws">VPC Lattice</span> 또는 App Mesh로 환경 간 서비스 접근 제어/가시성 확보</li>
    <li><strong>권한격리 자동화:</strong> <span class="vendor">Satori</span>/<span class="vendor">Veza</span> 등 권한 그래프 도구로 데이터/서비스 권한 차등 적용</li>
    <li><strong>CNAPP 연계:</strong> <span class="vendor">Wiz/Prisma Cloud</span>로 환경별 Drift/위험 우선순위화</li>
  </ul>

  <h2>6. 요약</h2>
  <p>환경별 유연 자원 전략은 <strong>템플릿화/태깅/정책-as-Code</strong>가 핵심이다. DEV에서 실험을 자유롭게 하면서도 PRD의 강력한 가드레일을 유지해 <strong>속도·안정·보안</strong>을 동시에 달성한다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 커머스 플랫폼 R사의 환경별 자원/보안 표준화와 비용/성능 균형</h3>
  <p><strong>시나리오:</strong> R사는 DEV/STG/PRD/BATCH/REALTIME 다섯 환경을 다계정으로 운영한다. 문제는 DEV 리소스 방치, STG 정책 불일치, PRD 급증 트래픽 시 보안 에이전트 누락, BATCH 야간 과금 폭증, REALTIME 봇 트래픽으로 인한 폭주다. 목표는 <em>PRD p95 180ms</em>, 월 비용 30% 절감, 규정 준수(PCI/ISMS-P) 유지이다.</p>

  <p><strong>해설:</strong> 다음 표의 <em>환경별 표준화 + 자동화</em> 계획을 적용한다.</p>
  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>KPI/임계</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>거버넌스</td>
        <td><span class="aws">Organizations/Control Tower</span>, SCP, Service Catalog</td>
        <td>환경 템플릿/계정 자동 생성, 태그 거버넌스, 표준 네트워크 구성 배포</td>
        <td>템플릿 이탈 0, 비인가 계정 0</td>
      </tr>
      <tr>
        <td>컴퓨트</td>
        <td>ASG/EKS/ECS/Lambda + Spot/RI/SP</td>
        <td>DEV는 스케줄드 오프/Spot, PRD는 RI/SP + 예측 스케일, REALTIME은 Lambda</td>
        <td>컴퓨트 비용 ↓ 25~45%, PRD p95 ≤ 180ms</td>
      </tr>
      <tr>
        <td>스토리지/DB</td>
        <td>S3/EBS/EFS/FSx, RDS/Aurora/DynamoDB</td>
        <td>수명주기/계층화, STG는 샘플 데이터만 보관, PRD는 PITR/멀티AZ</td>
        <td>보관 비용 ↓ 30~60%, 복구 RTO ≤ 5m</td>
      </tr>
      <tr>
        <td>네트워크</td>
        <td>VPC/TGW/PrivateLink, <span class="aws">WAF</span>/Network Firewall</td>
        <td>PRD는 멀티AZ/GA, REALTIME은 GA+WAF Bot Control, DEV는 NAT 공유</td>
        <td>5xx ≤ 0.3%, 봇 차단 ≥ 97%</td>
      </tr>
      <tr>
        <td>보안 기준선</td>
        <td><span class="aws">CloudTrail</span>, <span class="aws">Config</span>, <span class="aws">Security Hub</span>, <span class="aws">GuardDuty</span>, <span class="aws">KMS</span></td>
        <td>정책-as-Code로 환경별 차등 강제(예: DEV 완화, PRD 엄격), 키는 MRK</td>
        <td>Hub 규정 위반 0, 암호화 누락 0</td>
      </tr>
      <tr>
        <td>관찰성/SIEM/CNAPP</td>
        <td>CloudWatch/X-Ray, <span class="vendor">Splunk/Elastic</span>, <span class="vendor">Wiz/Prisma</span></td>
        <td>환경간 정책 불일치/드리프트 상관 탐지, SOAR로 자동 조치</td>
        <td>탐지→조치 ≤ 45s, 고위험 미조치 0(24h)</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> R사는 <em>환경 템플릿 + 태그 + 정책-as-Code</em>로 자원과 보안을 동시에 표준화한다. DEV의 유연성·STG의 유사성·PRD의 엄격함을 병행해 속도/비용/보안을 균형 있게 달성한다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>Control Tower로 계정 자동 생성, 환경 템플릿(Service Catalog) 배포</li>
    <li>환경 태그(Env, Owner, DataClass, Compliance) 강제 및 비용/보안 정책 연동</li>
    <li>스케줄드 오프/온(DEV/BATCH) + 예측/목표 스케일(PRD/REALTIME)</li>
    <li>정책-as-Code(OPA/SCP/Config)로 환경별 가드레일 자동 적용</li>
    <li>SIEM/CNAPP 연계로 정책 불일치/드리프트 탐지 및 SOAR 자동 조치</li>
  </ul>
</body>
</html>

<!-- END OF 4_4_2_서비스_환경에_따른_자원의_유연성을_수반하는_아키텍처와_보안.html -->

<!-- START OF 4_4_3_자원_소비_패턴으로_할인된_자원을_사용하는_아키텍처와_보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4-4-3 자원 소비 패턴으로 할인된 자원을 사용하는 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-4-3 자원 소비 패턴으로 할인된 자원을 사용하는 아키텍처와 보안</h1>
  <p>본 절은 장·단기 <strong>자원 소비 패턴</strong>을 분석해 <strong>할인형 자원</strong>(Spot, Savings Plans, Reserved Instances, DynamoDB 리저브드, S3 수명주기/아카이브)을 안전하게 적용하는 아키텍처를 제시한다. 비용 절감과 함께 <strong>보안 기준선</strong>과 <strong>SLO</strong>를 유지하기 위해 <span class="aws">Config/CloudTrail/Security Hub/GuardDuty</span>와 <span class="vendor">SIEM</span>(Splunk/Elastic), <span class="vendor">CNAPP</span>(Wiz/Prisma) 연계를 포함한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>12개월 TCO 기준 <strong>30~65%</strong> 절감(워크로드별 상이)</li>
    <li>할인 자원 사용 시에도 <strong>가용성·보안·컴플라이언스</strong> 불변</li>
    <li>소비 패턴 기반 <strong>정책-as-Code</strong>로 자동 전환/회수, 이탈 즉시 탐지</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <!-- Inline SVG: Pattern-driven Discounted Resource & Security -->
  <svg viewBox="0 0 1100 480" width="100%" height="auto" aria-label="소비 패턴 기반 할인 자원 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="40" y="40" width="280" height="130" class="box"/>
    <text x="50" y="65" class="title">소비 패턴 분석</text>
    <text x="50" y="90" class="txt">Cost Explorer/Cur, Compute Optimizer</text>
    <text x="50" y="110" class="txt">CloudWatch 지표, X-Ray 추적</text>

    <rect x="350" y="40" width="340" height="130" class="box"/>
    <text x="360" y="65" class="title">할인 자원 계층</text>
    <text x="360" y="90" class="txt">EC2/ECS/EKS Spot, RI, Savings Plans</text>
    <text x="360" y="110" class="txt">DynamoDB Reserved, S3 수명주기/Glacier</text>

    <rect x="720" y="40" width="330" height="130" class="box"/>
    <text x="730" y="65" class="title">보안/거버넌스</text>
    <text x="730" y="90" class="txt">CloudTrail, Config, Security Hub</text>
    <text x="730" y="110" class="txt">GuardDuty, SIEM, CNAPP</text>

    <rect x="140" y="210" width="820" height="220" class="box"/>
    <text x="150" y="235" class="title">자동화/운영</text>
    <text x="150" y="260" class="txt">EventBridge + Lambda (전환 정책), Auto Scaling MixedInstancesPolicy</text>
    <text x="150" y="280" class="txt">Karpenter/EKS, Lifecycle Hook, S3 Object Lock(WORM)</text>

    <line x1="320" y1="105" x2="350" y2="105" class="arrow"/>
    <line x1="690" y1="105" x2="720" y2="105" class="arrow"/>
    <line x1="550" y1="170" x2="550" y2="210" class="arrow"/>
  </svg>

  <h2>3. 주요 서비스 구성</h2>
  <div class="grid grid-2">
    <div>
      <h3>할인 적용</h3>
      <ul>
        <li><span class="aws">EC2 Auto Scaling</span> MixedInstancesPolicy(온디맨드/스팟 비율, 인스턴스 패밀리 다변화)</li>
        <li><span class="aws">Savings Plans</span>(Compute/EC2), <span class="aws">Reserved Instances</span>(RI), <span class="aws">DynamoDB Reserved Capacity</span></li>
        <li><span class="aws">S3 Intelligent‑Tiering/Glacier</span>, <span class="aws">EBS gp3</span>로 IOPS/Throughput 분리</li>
        <li><span class="aws">Graviton</span> 채택(워크로드 적합 시 비용/성능 개선)</li>
      </ul>
    </div>
    <div>
      <h3>보안/가드레일</h3>
      <ul>
        <li><span class="aws">KMS</span> 필수(Logs/DB/S3/EBS), <span class="aws">IAM</span> 최소권한, <span class="aws">Shield/WAF</span> 인입 보호</li>
        <li><span class="aws">Security Hub</span> 표준, <span class="aws">GuardDuty</span> 위협 탐지, <span class="aws">Config</span> 암호화/공개 규칙</li>
        <li>중앙 SIEM: <span class="vendor">Splunk/Elastic</span>, CNAPP: <span class="vendor">Wiz/Prisma Cloud</span></li>
      </ul>
    </div>
  </div>

  <h2>4. 보안 자동화 및 탐지</h2>
  <ul>
    <li>스팟 <em>중단 통지</em>(2분 전) → <strong>Lifecycle Hook/EKS Drain</strong> + 대체 노드 자동 가동(Karpenter)</li>
    <li>RI/SP 적용률이 하락하면 <span class="aws">EventBridge</span> + <span class="aws">Budgets</span> 경보 → 예약/약정 최적화 런북 실행</li>
    <li>S3 수명주기 이동 시 <span class="aws">Object Lock(WORM)</span>·버전·암호화(<span class="aws">SSE‑KMS</span>) 준수 여부 <span class="aws">Config</span>로 검증</li>
    <li>CloudTrail, VPC Flow, ALB/WAF 로그를 SIEM으로 수집, <strong>권한 남용·이상 트래픽</strong> 상관 탐지</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>가격·위협 동시 최적화:</strong> <span class="vendor">ProsperOps</span>/<span class="vendor">Zesty</span> 등 약정 최적화 + CNAPP의 위험 점수 결합</li>
    <li><strong>데이터 주권 준수형 아카이브:</strong> 리전·계정 분리 CMK, <span class="aws">S3 Glacier Vault Lock</span> 정책 코드화</li>
    <li><strong>서플라이체인:</strong> 컨테이너/함수 이미지 서명(<span class="vendor">Sigstore</span>), CI 시 취약점 스캔(Trivy/GitHub Advanced Security)</li>
  </ul>

  <h2>6. 요약</h2>
  <p>소비 패턴을 기반으로 할인 자원을 <strong>자동 선택·전환</strong>하면 큰 폭의 비용 절감이 가능하다. 단, 스팟 중단·아카이브 복구 지연 등 <strong>위험 시나리오</strong>를 가정해 보안 기준선(IAM/KMS/로깅/WAF/Config)과 <strong>SOAR</strong> 자동화를 결합해야 한다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 스트리밍 분석 기업 Q사의 "패턴 기반 할인 포트폴리오" 구축</h3>
  <p><strong>시나리오:</strong> Q사는 스트리밍 로그 수집·정규화·실시간 대시보드 서비스를 운영한다. 트래픽 패턴은 (1) 주간 업무시간 고정 60% 베이스로드, (2) 배치 ETL이 22:00~02:00 사이 피크, (3) 불규칙적 실험 워크로드가 간헐적으로 발생한다. 목표는 <em>월 비용 40% 절감</em>, <em>p95 200ms</em> 유지, <em>PII 로그의 암호화·WORM 보존</em>, <em>스팟 중단 무중단</em>이다. 과거 이슈는 스팟 회수로 인한 컨슈머 지연, 수명주기 전환 시 암호화 누락, 약정 구매 과다/과소로 인한 낭비였다.</p>

  <p><strong>해설:</strong> 다음 표는 Q사의 <em>패턴 기반 할인 + 보안</em> 설계다.</p>
  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>KPI/임계</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>베이스로드</td>
        <td><span class="aws">Savings Plans</span> + <span class="aws">Reserved Instances</span></td>
        <td>주간 고정 60%는 약정으로 커버(Compute SP + Zonal RI 혼합)</td>
        <td>약정 커버리지 ≥ 55%, 커밋 활용률 ≥ 95%</td>
      </tr>
      <tr>
        <td>버스트/야간 ETL</td>
        <td><span class="aws">EC2/ECS/EKS Spot</span>, <span class="aws">AWS Batch</span></td>
        <td>MixedInstancesPolicy + Karpenter, 배치는 Spot 전용 큐로 격리</td>
        <td>스팟 중단 후 대체 ≤ 60s, 실패 작업 자동 재시도 100%</td>
      </tr>
      <tr>
        <td>서버리스 경량 경로</td>
        <td><span class="aws">Lambda</span> + <span class="aws">Kinesis</span>/SQS</td>
        <td>저빈도/단기 워크로드는 서버리스로 이동, DLQ로 내구성 확보</td>
        <td>콜드스타트 비율 < 1%, DLQ 처리율 100%</td>
      </tr>
      <tr>
        <td>스토리지/보존</td>
        <td><span class="aws">S3 Intelligent‑Tiering</span>/Glacier + <span class="aws">Object Lock</span></td>
        <td>PII 로그는 WORM + SSE‑KMS, 보존정책(7/90/365일) 차등 적용</td>
        <td>암호화/버전 미적용 0, WORM 위반 0</td>
      </tr>
      <tr>
        <td>데이터베이스</td>
        <td><span class="aws">DynamoDB Reserved</span>, <span class="aws">Aurora Serverless v2</span></td>
        <td>핫 키 테이블은 리저브드, 변동 큰 트랜잭션은 서버리스로</td>
        <td>RCU/WCU 스로틀 0, p95 ≤ 20ms</td>
      </tr>
      <tr>
        <td>관찰성/거버넌스</td>
        <td>CloudWatch/Cost Explorer/Compute Optimizer, <span class="aws">Security Hub</span>/<span class="aws">Config</span></td>
        <td>약정/스팟/수명주기 이탈 감지 시 EventBridge 경보 → SOAR 조치</td>
        <td>탐지→조치 ≤ 60s, 규정 위반 0</td>
      </tr>
      <tr>
        <td>SIEM/CNAPP</td>
        <td><span class="vendor">Splunk/Elastic</span>, <span class="vendor">Wiz/Prisma</span></td>
        <td>권한 남용·공개 버킷·비암호화 리소스 상관 탐지 및 우선순위화</td>
        <td>High Sev 미조치 0건(24h)</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> Q사는 베이스로드는 약정으로, 가변 부하는 스팟/서버리스로 분리하고, 스토리지는 수명주기와 WORM으로 보호한다. <em>약정 커버리지·스팟 대체 시간·암호화 준수율</em>을 핵심 KPI로 관리한다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>MixedInstancesPolicy(최소 3개 패밀리/사이즈) + Karpenter 스팟 대체</li>
    <li>Savings Plans/RI 커버리지 목표 설정·자동 추천(Compute Optimizer) 적용</li>
    <li>S3 수명주기 + Object Lock(WORM) + SSE‑KMS, 퍼블릭 차단/액세스 애널라이저</li>
    <li>Budgets/Cost Anomaly Detection 경보 → EventBridge → SOAR 자동 조치</li>
    <li>Security Hub/Config/GuardDuty 규정 위반 0 목표, SIEM/CNAPP 상관탐지</li>
  </ul>
</body>
</html>

<!-- END OF 4_4_3_자원_소비_패턴으로_할인된_자원을_사용하는_아키텍처와_보안.html -->

<!-- START OF 4_4_4_유지_비용에_따른_서비스_수준을_선택하는_아키텍처와_보안.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4-4-4 유지 비용에 따른 서비스 수준을 선택하는 아키텍처와 보안</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
  </style>
</head>
<body>
  <h1>4-4-4 유지 비용에 따른 서비스 수준을 선택하는 아키텍처와 보안</h1>
  <p>본 절은 서비스의 중요도, 운영 예산, 규제 요구사항에 따라 <strong>서비스 수준(Availability Class)</strong>을 구분하고 이에 맞는 <strong>보안 및 인프라 수준</strong>을 선택하는 아키텍처를 제시한다. AWS의 <span class="aws">SLA 등급</span>과 <span class="vendor">CNAPP</span> 및 <span class="vendor">SIEM</span> 통합을 통해 비용 대비 최적의 보안·성능 균형을 달성한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>서비스 중요도에 따른 <strong>SLA Tier(Platinum/Gold/Silver/Bronze)</strong> 정의</li>
    <li>가용성·복구·보안 수준을 계층별 차등 적용</li>
    <li>각 수준별 운영/보안 비용과 SLO 매핑을 표준화</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <svg viewBox="0 0 1100 480" width="100%" height="auto" aria-label="비용 기반 서비스 수준 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="40" y="50" width="260" height="120" class="box"/>
    <text x="50" y="75" class="title">SLA 등급별 자원 선택</text>
    <text x="50" y="100" class="txt">Platinum: Multi-Region Active-Active</text>
    <text x="50" y="120" class="txt">Gold: Multi-AZ Active-Passive</text>

    <rect x="330" y="50" width="350" height="120" class="box"/>
    <text x="340" y="75" class="title">비용/성능 제어</text>
    <text x="340" y="100" class="txt">Savings Plans, Auto Scaling, Tiered Storage</text>
    <text x="340" y="120" class="txt">Lambda/Spot + On-Demand Hybrid</text>

    <rect x="710" y="50" width="330" height="120" class="box"/>
    <text x="720" y="75" class="title">보안/거버넌스</text>
    <text x="720" y="100" class="txt">KMS, IAM, CloudTrail, Security Hub</text>
    <text x="720" y="120" class="txt">GuardDuty, SIEM, CNAPP</text>

    <line x1="300" y1="110" x2="330" y2="110" class="arrow"/>
    <line x1="680" y1="110" x2="710" y2="110" class="arrow"/>
  </svg>

  <h2>3. SLA Tier별 구성 비교</h2>
  <table>
    <thead>
      <tr><th>Tier</th><th>가용성/복구</th><th>보안 수준</th><th>운영비용</th><th>적용 서비스 예시</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>Platinum</td>
        <td>Multi-Region Active-Active, Cross-Region DR</td>
        <td>전구간 암호화(KMS MRK), WAF BotControl, Shield Advanced</td>
        <td>최고(기준 대비 +100%)</td>
        <td>금융결제, 인증 API, 고객식별</td>
      </tr>
      <tr>
        <td>Gold</td>
        <td>Multi-AZ Active-Passive, RDS Cross AZ</td>
        <td>IAM 최소권한, CloudTrail/Config, GuardDuty</td>
        <td>중상(+50%)</td>
        <td>주요 백엔드, 주문/결제처리</td>
      </tr>
      <tr>
        <td>Silver</td>
        <td>단일 AZ, 주기적 백업</td>
        <td>KMS 기본, CloudWatch 알람, WAF 기본룰</td>
        <td>보통(+10~20%)</td>
        <td>내부 포털, QA/테스트</td>
      </tr>
      <tr>
        <td>Bronze</td>
        <td>단일 AZ, 수동 복구</td>
        <td>기본 IAM/KMS, 로그 보존 30일</td>
        <td>최저(기준 대비 -40%)</td>
        <td>POC, 임시 서비스</td>
      </tr>
    </tbody>
  </table>

  <h2>4. 보안 자동화 및 탐지</h2>
  <ul>
    <li>Tier별 보안 정책을 <span class="aws">Config</span> Rule과 <span class="aws">Service Catalog</span> Portfolio로 코드화하여 자동 강제</li>
    <li>Platinum/Gold: <span class="aws">Security Hub</span> + <span class="vendor">CNAPP</span> 상관 분석으로 고위험 즉시 탐지</li>
    <li>Silver/Bronze: <span class="aws">GuardDuty</span> + CloudWatch 경보로 최소 기준 유지</li>
    <li>모든 Tier에서 <span class="aws">CloudTrail</span>·<span class="aws">Config</span> 로그를 중앙 SIEM(<span class="vendor">Splunk/Elastic</span>)으로 통합</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>SLA 기반 비용 예측:</strong> <span class="aws">Compute Optimizer</span> + <span class="vendor">CloudZero</span>로 Tier별 TCO/ROI 산출</li>
    <li><strong>정책 기반 배포 승인:</strong> <span class="aws">Service Catalog</span> + <span class="aws">Control Tower</span>로 등급별 배포 승인 워크플로우</li>
    <li><strong>가용성-보안 동시 시뮬레이션:</strong> <span class="vendor">ChaosMesh</span>·<span class="vendor">Steadybit</span>으로 장애·침해 내성 테스트</li>
  </ul>

  <h2>6. 종합 문제 및 해설</h2>
  <h3>문제. 글로벌 핀테크 기업 F사의 "SLA 기반 아키텍처 등급제" 설계</h3>
  <p><strong>시나리오:</strong> F사는 결제/정산/고객지원/리포트 서비스를 하나의 플랫폼에서 운영한다. 현황은 단일 Multi-AZ 구조로 모든 서비스가 동일한 보안·가용성 수준을 사용해 과도한 비용이 발생한다. 목표는 중요도에 따라 Platinum/Gold/Silver/Bronze 등급을 구분하고, 연간 35% 비용 절감과 PCI DSS·ISMS-P 준수를 유지하는 것이다.</p>

  <p><strong>해설:</strong> 다음 표는 F사의 <em>서비스 수준별 분류 및 보안 설계</em>를 나타낸다.</p>
  <table>
    <thead>
      <tr><th>Tier</th><th>서비스 예시</th><th>아키텍처</th><th>보안</th><th>비용효과</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>Platinum</td>
        <td>결제 API, 인증 서비스</td>
        <td>Multi-Region Active-Active + Cross-Region DR</td>
        <td>Shield Advanced, MRK, SIEM/CNAPP 완전 연계</td>
        <td>고비용(기준 대비 +100%), RTO ≤ 30s</td>
      </tr>
      <tr>
        <td>Gold</td>
        <td>정산, 주문, 청구</td>
        <td>Multi-AZ Active-Passive, Aurora Multi-AZ</td>
        <td>GuardDuty, Config, Security Hub, KMS 기본키</td>
        <td>중간비용(+40%), RTO ≤ 5m</td>
      </tr>
      <tr>
        <td>Silver</td>
        <td>리포트, 로그 조회</td>
        <td>단일 AZ, 백업 중심 복구</td>
        <td>WAF 기본, IAM 최소권한, CloudWatch 경보</td>
        <td>저비용(-25%), RTO ≤ 1h</td>
      </tr>
      <tr>
        <td>Bronze</td>
        <td>테스트, PoC</td>
        <td>단일 AZ, 수동 복원</td>
        <td>CloudTrail/Config만 유지, 보안 룰 최소화</td>
        <td>최저비용(-60%), RTO ≤ 6h</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> F사는 SLA 등급별로 자원·보안·가용성을 세분화함으로써 <em>운영비 절감과 보안 준수</em>를 동시에 달성한다. 고가용성은 Critical 서비스에 집중하고, 저비용 Tier는 표준 가드레일로 통제한다.</p>

  <h2>7. 구축 체크리스트</h2>
  <ul>
    <li>Platinum/Gold/Silver/Bronze 등급 정의 및 서비스 매핑</li>
    <li>Tier별 CloudFormation/Terraform 템플릿 생성 및 Service Catalog 등록</li>
    <li>Config Rule로 등급별 필수 자원(KMS, Logging, Multi-AZ) 검증</li>
    <li>Security Hub/CNAPP 통합 리포트로 Tier별 보안상태 모니터링</li>
    <li>Chaos 테스트로 RTO/RPO 검증 및 Tier간 복원 시뮬레이션</li>
  </ul>
</body>
</html>

<!-- END OF 4_4_4_유지_비용에_따른_서비스_수준을_선택하는_아키텍처와_보안.html -->

<!-- START OF 4_5_1_자동화_배포_프로세스가_적용된_보안_아키텍처.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4-5-1 자동화 배포 프로세스가 적용된 보안 아키텍처</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-5-1 자동화 배포 프로세스가 적용된 보안 아키텍처</h1>
  <p>본 절은 <strong>CI/CD 전 과정</strong>에 보안을 내재화하는 <strong>보안형 소프트웨어 공급망 아키텍처</strong>를 제시한다. 코드 커밋부터 이미지 빌드·서명·취약점 스캔·시크릿 검사·정책 검증·승인·배포·런타임 탐지까지 전 단계를 자동화하며, <span class="aws">CodePipeline/CodeBuild/CodeDeploy/ECR</span>과 <span class="aws">Inspector</span>, <span class="aws">Security Hub</span>, <span class="aws">CloudTrail</span>을 중심으로 <span class="vendor">SIEM</span>(Splunk/Elastic)과 <span class="vendor">CNAPP</span>(Wiz/Prisma Cloud) 및 SLSA/SBOM 툴체인(<span class="vendor">Sigstore, Syft/Grype</span>)을 결합한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li><strong>Shift-Left 보안</strong>: PR 단계에서 시크릿·취약점·정책 위반 차단</li>
    <li><strong>서플라이체인 무결성</strong>: SBOM 생성, 아티팩트 서명/검증, 재현 가능한 빌드</li>
    <li><strong>표준화된 승인 흐름</strong>: 위험도 기반 게이팅(High는 배포 차단, Medium은 승인 필요)</li>
    <li><strong>가시성/추적성</strong>: Code to Cloud 전 구간의 <em>증적 자동화</em>와 SIEM 상관분석</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <!-- Inline SVG: Secure CI/CD & Supply Chain -->
  <svg viewBox="0 0 1100 520" width="100%" height="auto" aria-label="보안 내재화 CI/CD 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="40" y="40" width="300" height="140" class="box"/>
    <text x="50" y="65" class="title">소스/PR 보안</text>
    <text x="50" y="92" class="txt">사전 커밋 훅(시크릿/키 검사), CodeGuru/ESLint</text>
    <text x="50" y="112" class="txt">정책 as Code(OPA), 브랜치 보호/서명 커밋</text>

    <rect x="380" y="40" width="320" height="140" class="box"/>
    <text x="390" y="65" class="title">빌드/아티팩트</text>
    <text x="390" y="92" class="txt">CodeBuild, ECR, SBOM(Syft), Scan(Inspector/Grype)</text>
    <text x="390" y="112" class="txt">서명(Sign): Sigstore(fulcio/cosign)</text>

    <rect x="730" y="40" width="330" height="140" class="box"/>
    <text x="740" y="65" class="title">배포/런타임</text>
    <text x="740" y="92" class="txt">CodeDeploy/EKS/ECS/Lambda</text>
    <text x="740" y="112" class="txt">WAAP(WAF), Runtime Scan/Agent, X-Ray</text>

    <rect x="140" y="220" width="820" height="200" class="box"/>
    <text x="150" y="245" class="title">거버넌스/관찰성</text>
    <text x="150" y="270" class="txt">Security Hub, CloudTrail, Config, CloudWatch, Audit Manager</text>
    <text x="150" y="290" class="txt">SIEM(Splunk/Elastic), CNAPP(Wiz/Prisma), SOAR</text>

    <line x1="340" y1="110" x2="380" y2="110" class="arrow"/>
    <line x1="700" y1="110" x2="730" y2="110" class="arrow"/>
    <line x1="550" y1="180" x2="550" y2="220" class="arrow"/>
  </svg>

  <h2>3. 주요 서비스 구성</h2>
  <div class="grid grid-2">
    <div>
      <h3>CI/CD 및 공급망</h3>
      <ul>
        <li><span class="aws">CodePipeline</span> 오케스트레이션, <span class="aws">CodeBuild</span> 빌드</li>
        <li><span class="aws">ECR</span> 이미지 저장소 + <span class="aws">Inspector</span> 컨테이너/OS 취약점 스캔</li>
        <li>SBOM: <span class="vendor">Syft</span>, 취약점: <span class="vendor">Grype</span>, 서명: <span class="vendor">Sigstore(cosign)</span></li>
        <li>배포: <span class="aws">CodeDeploy</span> / <span class="aws">EKS</span> 롤링/블루그린, <span class="aws">Lambda</span></li>
      </ul>
    </div>
    <div>
      <h3>보안/거버넌스</h3>
      <ul>
        <li><span class="aws">Security Hub</span>, <span class="aws">GuardDuty</span>, <span class="aws">Config</span>, <span class="aws">CloudTrail</span></li>
        <li>비밀: <span class="aws">Secrets Manager</span>, 키: <span class="aws">KMS</span>, 인증서: <span class="aws">ACM/Private CA</span></li>
        <li>SIEM: <span class="vendor">Splunk/Elastic</span>, CNAPP: <span class="vendor">Wiz/Prisma Cloud</span></li>
      </ul>
    </div>
  </div>

  <h2>4. 보안 자동화 및 게이팅</h2>
  <ul>
    <li><strong>PR 단계</strong>: 시크릿 스캔(GitLeaks), 정적 분석(CodeGuru/CodeQL), 정책 as Code(OPA)로 실패 시 Merge 차단</li>
    <li><strong>빌드 단계</strong>: SBOM 생성(Syft) → 취약점 스캔(Inspector/Grype) → <em>cosign</em> 서명 → 서명 검증 실패 시 아티팩트 폐기</li>
    <li><strong>배포 단계</strong>: 위험도 High 발견 시 <span class="aws">CodePipeline</span> <em>manual approval</em> 요구, Medium은 Change Manager 승인</li>
    <li><strong>런타임</strong>: <span class="aws">WAF</span>·봇 제어·레이트리밋, CNAPP/EDR 에이전트로 행위 이상 탐지 → SOAR로 자동 격리/롤백</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>SLSA 3/4 단계로의 고도화</strong>: 재현 가능 빌드, 격리된 빌드 프라노(예: <span class="aws">CodeBuild</span> 전용 VPC + 프라이빗 서브넷)</li>
    <li><strong>정책 중앙집중</strong>: <span class="vendor">Open Policy Agent</span> + <span class="aws">Verified Permissions</span>로 권한/정책 그래프 통합</li>
    <li><strong>서명/키 관리</strong>: <span class="aws">KMS</span>와 <span class="vendor">Venafi</span>로 조직 전역 키·인증서 수명주기</li>
  </ul>

  <h2>6. 요약</h2>
  <p>자동화 배포 프로세스는 보안 없이는 완성되지 않는다. <strong>PR→빌드→배포→운영</strong> 전 단계에 <strong>게이팅·서명·스캔·정책</strong>을 내재화하고, 결과를 <strong>SIEM/CNAPP</strong>으로 상관 분석해야 한다.</p>

  <h2>7. 종합 문제 및 해설</h2>
  <h3>문제. 글로벌 SaaS 기업 S사의 "제로터치 배포 보안" 구현</h3>
  <p><strong>시나리오:</strong> S사는 주 50회 배포, 마이크로서비스 180개, 12개 리전에서 운영한다. 과거 사고는 (1) 서드파티 라이브러리 Log4j 미패치 이미지가 배포됨, (2) 개발자가 실수로 시크릿을 깃에 커밋, (3) EKS 런타임에서 컨테이너가 과도 권한으로 실행된 경우였다. 목표는 <em>배포 속도 유지(1일 7회/서비스)</em>와 함께 <em>High 취약점의 프로덕션 유입 0</em>, <em>시크릿 노출 0</em>, <em>런타임 권한 오남용 0</em>이다.</p>

  <p><strong>해설:</strong> 다음 표는 S사의 <em>제로터치 배포 보안</em> 설계다.</p>
  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>KPI/임계</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>소스/PR</td>
        <td>Git 보호 규칙, GitLeaks, OPA</td>
        <td>서명 커밋, PR 시 시크릿/정책 검사 실패시 Merge 금지</td>
        <td>시크릿 커밋 0, 정책 위반 Merge 0</td>
      </tr>
      <tr>
        <td>빌드/이미지</td>
        <td><span class="aws">ECR</span>, <span class="aws">Inspector</span>, <span class="vendor">Syft/Grype</span>, <span class="vendor">cosign</span></td>
        <td>SBOM 생성→스캔→서명→서명 검증 실패/High 발견 시 파이프라인 중단</td>
        <td>High 미처리 이미지 배포 0</td>
      </tr>
      <tr>
        <td>배포</td>
        <td><span class="aws">CodePipeline/CodeDeploy</span>, Change Manager</td>
        <td>High는 수동 승인 필수, Medium은 위험기반 승인, 배포 전 정책 검증</td>
        <td>승인 누락 0, 롤백 MTTR ≤ 5m</td>
      </tr>
      <tr>
        <td>런타임</td>
        <td><span class="aws">WAF</span>, <span class="aws">GuardDuty</span>, <span class="vendor">Wiz/Prisma</span></td>
        <td>WAAP 보호, CNAPP/EDR로 과권한/비정상 행위 탐지→SOAR 자동 격리</td>
        <td>과권한 컨테이너 0, 탐지→조치 ≤ 60s</td>
      </tr>
      <tr>
        <td>감사/가시성</td>
        <td><span class="aws">CloudTrail/Config/Security Hub</span>, SIEM</td>
        <td>파이프라인/배포/런타임 이벤트 전부 중앙 SIEM 상관분석</td>
        <td>고위험 미조치 0건(24h)</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> S사는 PR에서 배포, 그리고 런타임까지 <em>서명·스캔·게이트</em>를 일관되게 적용한다. SBOM과 서명을 표준화하고, High 취약점은 <strong>자동 차단</strong>, Medium은 <strong>위험기반 승인</strong>으로 처리한다.</p>

  <h2>8. 구축 체크리스트</h2>
  <ul>
    <li>브랜치 보호/서명 커밋, PR 템플릿에 시큐리티 체크리스트 포함</li>
    <li>CodeBuild 격리(VPC 프라이빗) + 캐시 서명 검증, SBOM 생성/보관</li>
    <li>ECR 이미지 스캔(Inspector) + cosign 서명/검증, 만료/철회 키 관리(KMS)</li>
    <li>배포 전 정책 as Code(OPA)/구성 검증(Config), 위험기반 승인 흐름</li>
    <li>런타임 CNAPP/EDR 연동, WAF/Shield, SIEM 상관분석 + SOAR 자동 조치</li>
  </ul>
</body>
</html>

<!-- END OF 4_5_1_자동화_배포_프로세스가_적용된_보안_아키텍처.html -->

<!-- START OF 4_5_2_인프라_자동_구축_기반의_보안_아키텍처.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4-5-2 인프라 자동 구축 기반의 보안 아키텍처</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-5-2 인프라 자동 구축 기반의 보안 아키텍처</h1>
  <p>본 절은 다계정·다리전 AWS 환경에서 <strong>IaC(Infra as Code)</strong>와 <strong>정책-as-Code</strong>를 활용해 <strong>완전 자동화 인프라 프로비저닝</strong>을 구현하는 보안 아키텍처를 제시한다. 핵심은 <span class="aws">Organizations/Control Tower/Account Factory</span>로 계정 표준화를 하고, <span class="aws">CloudFormation/StackSets</span>·<span class="aws">CDK</span>·<span class="vendor">Terraform</span> 파이프라인에 <span class="aws">Config/CloudTrail/Security Hub</span> 및 정책 검증(<span class="vendor">OPA/Conftest, Checkov, cfn-nag</span>)을 결합하는 것이다. 탐지·거버넌스는 <span class="vendor">SIEM</span>(Splunk/Elastic)과 <span class="vendor">CNAPP</span>(Wiz/Prisma Cloud)로 통합한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>수동 콘솔 변경 <strong>완전 금지</strong>(예외: Break-Glass 승인형)</li>
    <li>계정 생성→네트워크/VPC→공통 보안→워크로드 스택까지 <strong>제로터치</strong> 자동화</li>
    <li>모든 리소스는 <strong>태그·암호화·로깅</strong> 기준선 자동 부여</li>
    <li>드리프트(Drift) 실시간 탐지와 <strong>자가 복구</strong>(Auto Remediation)</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <!-- Inline SVG: Secure IaC Factory -->
  <svg viewBox="0 0 1100 520" width="100%" height="auto" aria-label="인프라 자동 구축 보안 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="40" y="40" width="300" height="140" class="box"/>
    <text x="50" y="65" class="title">계정/거버넌스 팩토리</text>
    <text x="50" y="92" class="txt">Organizations, Control Tower, SCP</text>
    <text x="50" y="112" class="txt">Account Factory, IAM Identity Center</text>

    <rect x="380" y="40" width="320" height="140" class="box"/>
    <text x="390" y="65" class="title">IaC 파이프라인</text>
    <text x="390" y="92" class="txt">CloudFormation/StackSets, CDK</text>
    <text x="390" y="112" class="txt">Terraform(Cloud/Enterprise), Atlantis</text>

    <rect x="730" y="40" width="330" height="140" class="box"/>
    <text x="740" y="65" class="title">정책/보안 검증</text>
    <text x="740" y="92" class="txt">OPA/Conftest, Checkov, cfn-nag</text>
    <text x="740" y="112" class="txt">Security Hub, Config, CloudTrail</text>

    <rect x="140" y="220" width="820" height="200" class="box"/>
    <text x="150" y="245" class="title">관찰성/상관분석</text>
    <text x="150" y="270" class="txt">CloudWatch, Detective, Audit Manager</text>
    <text x="150" y="290" class="txt">SIEM(Splunk/Elastic), CNAPP(Wiz/Prisma), SOAR</text>

    <line x1="340" y1="110" x2="380" y2="110" class="arrow"/>
    <line x1="700" y1="110" x2="730" y2="110" class="arrow"/>
    <line x1="550" y1="180" x2="550" y2="220" class="arrow"/>
  </svg>

  <h2>3. 주요 서비스 구성</h2>
  <div class="grid grid-2">
    <div>
      <h3>거버넌스/계정</h3>
      <ul>
        <li><span class="aws">Organizations</span> + <span class="aws">Control Tower</span>로 OU/SCP 구조화, <span class="aws">Account Factory</span>로 자동 계정 생성</li>
        <li>아이덴티티: <span class="aws">IAM Identity Center</span> + Permission Sets, <span class="aws">KMS</span> MRK</li>
        <li>공통 보안: <span class="aws">CloudTrail</span>(조직), <span class="aws">Config</span> Conformance Packs, <span class="aws">Security Hub</span></li>
      </ul>
    </div>
    <div>
      <h3>프로비저닝/IaC</h3>
      <ul>
        <li><span class="aws">CloudFormation</span>/StackSets, <span class="aws">CDK</span></li>
        <li><span class="vendor">Terraform</span>(TFC/TFE) + <span class="vendor">Atlantis</span> PR 플로우</li>
        <li>네트워크: <span class="aws">VPC</span>, <span class="aws">Transit Gateway</span>, <span class="aws">PrivateLink</span>, <span class="aws">Network Firewall</span></li>
      </ul>
    </div>
  </div>

  <h2>4. 정책-as-Code/검증</h2>
  <ul>
    <li>PR 시 <span class="vendor">Checkov</span>/<span class="vendor">cfn-nag</span> 정적 검증, <span class="vendor">OPA/Conftest</span>로 조직 정책 위반 차단</li>
    <li><span class="aws">Config</span> 규칙 &amp; <span class="aws">Service Catalog</span> 제품으로 <strong>배포 전/후</strong> 이중 검증</li>
    <li>예외(허용목록)는 OU/태그 기반으로 제한, 만료일 자동부여</li>
  </ul>

  <h2>5. 자동 복구(자가 치유)</h2>
  <ul>
    <li><strong>드리프트 탐지</strong>: <span class="aws">CloudFormation Drift</span>, <span class="aws">Config</span> + <span class="aws">EventBridge</span> 트리거</li>
    <li><strong>자동 롤백/재배포</strong>: Stack 실패/변경 감지 → 파이프라인 재실행 또는 <span class="aws">SSM Automation</span> 런북</li>
    <li><strong>Break‑Glass</strong>: <span class="aws">IAM</span> 제한 계정으로 시간 제한 접근(5~15분), <span class="aws">CloudTrail</span> 전수 로깅</li>
  </ul>

  <h2>6. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>권한 그래프</strong>: <span class="vendor">Veza</span>/<span class="vendor">Satori</span>로 계정·데이터 권한 관계 시각화</li>
    <li><strong>프로톤 기반 PaaS</strong>: <span class="aws">AWS Proton</span>으로 표준 서비스 템플릿 제공(네트워크/보안 내장)</li>
    <li><strong>서플라이체인</strong>: IaC 모듈 서명(예: <span class="vendor">Sigstore</span> cosign for modules), 모듈 신뢰 레지스트리</li>
  </ul>

  <h2>7. 요약</h2>
  <p>인프라 자동 구축 보안은 <strong>거버넌스 팩토리 + IaC 파이프라인 + 정책-as-Code + 자가 치유</strong>의 조합이다. 수동 변경을 제거하고, 모든 변경을 코드로 추적·검증·롤백할 수 있어야 한다.</p>

  <h2>8. 종합 문제 및 해설</h2>
  <h3>문제. 게임사 G사의 "멀티계정 IaC 팩토리"와 드리프트 제로 전략</h3>
  <p><strong>시나리오:</strong> G사는 글로벌 9개 리전·27개 AWS 계정을 운영한다. 과거 문제는 (1) 콘솔에서 수동 보안그룹 변경으로 외부 노출, (2) 스택 외 자원 생성으로 <em>IaC 비관리 리소스</em> 다수 발생, (3) 태그 누락으로 비용/보안 분류 실패, (4) VPC 표준 미준수로 피어링 루프였다. 목표는 <em>수동 변경 0</em>, <em>Config 위반 0</em>, <em>드리프트 자동 복구</em>, <em>배포 MTTR ≤ 10분</em>이다.</p>

  <p><strong>해설:</strong> 다음 표는 G사의 <em>IaC 팩토리 + 정책-as-Code + 자가 치유</em> 설계다.</p>
  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>KPI/임계</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>거버넌스</td>
        <td><span class="aws">Organizations/Control Tower</span>, SCP, Identity Center</td>
        <td>OU별 가드레일, Account Factory 자동 계정 생성, Permission Sets 표준화</td>
        <td>비인가 계정 0, OU 이탈 0</td>
      </tr>
      <tr>
        <td>네트워크 표준</td>
        <td><span class="aws">VPC</span>/TGW/PrivateLink, <span class="aws">Network Firewall</span></td>
        <td>표준 VPC 모듈, 서브넷/라우트/NACL/SG 정책 자동 생성</td>
        <td>루프 0, 퍼블릭 노출 0</td>
      </tr>
      <tr>
        <td>IaC 파이프라인</td>
        <td><span class="aws">CloudFormation</span>/CDK, <span class="vendor">Terraform</span>/Atlantis</td>
        <td>PR 단위 Plan/Apply, 멀티계정은 StackSets로 팬아웃</td>
        <td>배포 MTTR ≤ 10m, 실패 자동 롤백 100%</td>
      </tr>
      <tr>
        <td>정책/검증</td>
        <td><span class="vendor">OPA/Conftest</span>, <span class="vendor">Checkov</span>, cfn-nag</td>
        <td>퍼블릭 S3/오픈 SG/IAM*</td>
        <td>정책 위반 머지 0, 허용목록 만료율 100%</td>
      </tr>
      <tr>
        <td>드리프트/복구</td>
        <td>CloudFormation Drift, <span class="aws">Config</span>, <span class="aws">SSM Automation</span></td>
        <td>드리프트 감지→자동 재배포 또는 원상복구, 콘솔 변경 알림</td>
        <td>드리프트 평균 지속시간 ≤ 5m</td>
      </tr>
      <tr>
        <td>관찰성/감사</td>
        <td><span class="aws">CloudTrail</span>, Config, <span class="aws">Security Hub</span>, SIEM, CNAPP</td>
        <td>변경 이력 상관분석, 고위험 즉시 경보 및 SOAR 조치</td>
        <td>고위험 미조치 0(24h)</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> G사는 콘솔 수동 변경을 차단하고, IaC 파이프라인과 정책-as-Code를 통해 <em>표준화·검증·자동 복구</em>를 달성한다. CNAPP/SIEM과 연동해 변경·취약점·노출을 하나의 그래프로 가시화한다.</p>

  <h2>9. 구축 체크리스트</h2>
  <ul>
    <li>OU/SCP 설계, Account Factory 템플릿 확정(태그/로깅/KMS 공통 포함)</li>
    <li>표준 VPC/IAM/KMS/로깅 모듈화(CDK/Terraform Registry 사내 레포)</li>
    <li>PR 게이팅: OPA/Checkov/cfn-nag + Required reviewers + Plan 증적 첨부</li>
    <li>StackSets 멀티계정 팬아웃, Drift/Config 위반 → SSM Automation 자가 치유</li>
    <li>Break‑Glass 역할의 시간 제한/사후 리뷰, CloudTrail 전수 로깅</li>
    <li>SIEM/CNAPP 상관 대시보드(변경 이벤트↔노출/취약점 매핑)</li>
  </ul>
</body>
</html>

<!-- END OF 4_5_2_인프라_자동_구축_기반의_보안_아키텍처.html -->

<!-- START OF 4_5_3_애플리케이션_레벨의_서비스_형태를_활용하는_보안_아키텍처.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4-5-3 애플리케이션 레벨의 서비스 형태를 활용하는 보안 아키텍처</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>4-5-3 애플리케이션 레벨의 서비스 형태를 활용하는 보안 아키텍처</h1>
  <p>본 절은 애플리케이션 개발팀이 <strong>PaaS/FaaS/백엔드 서비스</strong>(API, 인증, 메시지, 서치, 데이터) 형태를 활용할 때 <strong>기본 보안 기능을 내장</strong>하고 <strong>데브옵스 효율</strong>을 극대화하는 아키텍처를 제시한다. AWS 네이티브(<span class="aws">API Gateway, App Runner, Lambda, Cognito, AppSync, OpenSearch, SQS/SNS, EventBridge, Step Functions</span>)를 기반으로, 필요 시 <span class="vendor">Auth0/Okta</span>, <span class="vendor">Kafka/MSK</span>, <span class="vendor">Datadog</span>, <span class="vendor">Wiz/Prisma</span> 등 3rd‑Party를 결합한다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li>비즈니스 팀이 <strong>애플리케이션 레벨</strong>에서 보안/확장성을 즉시 활용</li>
    <li>인증/인가/비밀/암호화를 <strong>플랫폼 내장</strong>으로 표준화</li>
    <li>런타임 보호/SIEM/CNAPP 연동으로 <strong>가시성</strong> 확보</li>
  </ul>

  <h2>2. 아키텍처 개요</h2>
  <!-- Inline SVG: App-level Services with Built-in Security -->
  <svg viewBox="0 0 1100 520" width="100%" height="auto" aria-label="애플리케이션 레벨 서비스 보안 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <rect x="40" y="40" width="310" height="140" class="box"/>
    <text x="50" y="65" class="title">엣지/API</text>
    <text x="50" y="92" class="txt">CloudFront + <tspan class="aws">WAF</tspan> + Shield</text>
    <text x="50" y="112" class="txt">API Gateway/ALB, mTLS, JWT 검사</text>

    <rect x="380" y="40" width="320" height="140" class="box"/>
    <text x="390" y="65" class="title">코어 서비스</text>
    <text x="390" y="92" class="txt">Lambda/App Runner/ECS Fargate</text>
    <text x="390" y="112" class="txt">AppSync(GraphQL), Step Functions</text>

    <rect x="730" y="40" width="330" height="140" class="box"/>
    <text x="740" y="65" class="title">데이터/이벤트</text>
    <text x="740" y="92" class="txt">Aurora/DynamoDB, OpenSearch</text>
    <text x="740" y="112" class="txt">SQS/SNS, EventBridge, MSK</text>

    <rect x="140" y="220" width="820" height="200" class="box"/>
    <text x="150" y="245" class="title">아이덴티티/보안/가시성</text>
    <text x="150" y="270" class="txt">Cognito/Okta, KMS, Secrets Manager, ACM</text>
    <text x="150" y="290" class="txt">CloudTrail, X-Ray, Security Hub, SIEM/CNAPP</text>

    <line x1="350" y1="110" x2="380" y2="110" class="arrow"/>
    <line x1="700" y1="110" x2="730" y2="110" class="arrow"/>
    <line x1="550" y1="180" x2="550" y2="220" class="arrow"/>
  </svg>

  <h2>3. 주요 서비스 구성</h2>
  <div class="grid grid-2">
    <div>
      <h3>API/엣지</h3>
      <ul>
        <li><span class="aws">API Gateway</span> + Lambda Authorizer/JWT 검증, <span class="aws">WAF</span> 규칙</li>
        <li><span class="aws">CloudFront</span> + Shield, Rate Limit, Bot Control</li>
        <li>mTLS/Mutual Auth(ACM/Private CA), <span class="aws">Certificate Manager</span></li>
      </ul>
    </div>
    <div>
      <h3>코어/데이터</h3>
      <ul>
        <li><span class="aws">App Runner</span>/Lambda/ECS Fargate, <span class="aws">AppSync</span>(GraphQL)</li>
        <li>데이터: <span class="aws">Aurora</span>/<span class="aws">DynamoDB</span>, <span class="aws">OpenSearch</span></li>
        <li>이벤트: <span class="aws">SQS/SNS</span>, <span class="aws">EventBridge</span>, <span class="aws">MSK</span></li>
      </ul>
    </div>
  </div>

  <h2>4. 보안 패턴</h2>
  <ul>
    <li><strong>제로트러스트 API</strong>: JWT 스코프/클레임 기반 인가, <span class="aws">Verified Permissions</span>로 ABAC 구현</li>
    <li><strong>시크릿/키</strong>: <span class="aws">Secrets Manager</span> + 자동 로테이션, <span class="aws">KMS</span> Envelope Encryption</li>
    <li><strong>데이터 보호</strong>: RDS TDE, DynamoDB KMS, S3 SSE‑KMS, 전송 TLS1.2/1.3</li>
    <li><strong>런타임 관찰성</strong>: X‑Ray, CloudWatch, <span class="vendor">Datadog</span>, SIEM/CNAPP 상관</li>
  </ul>

  <h2>5. 차세대 보안 구성 제안</h2>
  <ul>
    <li><strong>정책 그래프</strong>: <span class="aws">Verified Permissions</span> + <span class="vendor">OPA</span>로 멀티도메인 권한 그래프</li>
    <li><strong>서비스 메시</strong>: <span class="aws">VPC Lattice</span>/App Mesh로 워크로드 간 인증/인가/관찰성 표준화</li>
    <li><strong>공급망</strong>: 함수/컨테이너 아티팩트 서명(<span class="vendor">Sigstore</span>), 취약점 스캔(Inspector/Grype)</li>
  </ul>

  <h2>6. 종합 문제 및 해설</h2>
  <h3>문제. 소셜 앱 T사의 "앱 레벨 보안 내장" 서버리스 아키텍처</h3>
  <p><strong>시나리오:</strong> T사는 사진/라이브 피드 기능을 가진 소셜 앱을 글로벌 4리전으로 확장한다. 요구사항: (1) 공개/비공개 피드에 대한 세밀한 권한(ABAC), (2) 서버리스 우선, (3) 봇/스크레이핑 차단, (4) PII 암호화와 감사, (5) p95 180ms. 과거 이슈: 퍼블릭 S3 URL로 미승인 접근, 토큰 스코프 오구성, 라이브 피드 폭주 시 Lambda 콜드스타트 증가.</p>

  <p><strong>해설:</strong> 다음 표는 T사의 <em>앱 레벨 보안 내장</em> 설계다.</p>
  <table>
    <thead>
      <tr><th>영역</th><th>적용 서비스/도구</th><th>구현 상세</th><th>KPI/임계</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>인증/인가</td>
        <td><span class="aws">Cognito</span> + <span class="aws">Verified Permissions</span></td>
        <td>JWT 클레임(tenant,privacy,role) 기반 ABAC, 세션 mTLS(앱↔엣지)</td>
        <td>권한 오구성 사고 0, 인증 실패율 < 0.5%</td>
      </tr>
      <tr>
        <td>API/엣지</td>
        <td><span class="aws">CloudFront</span> + <span class="aws">WAF</span> Bot Control, <span class="aws">API Gateway</span></td>
        <td>레이트리밋·자동 차단 규칙, JWT 스코프 검증, 서명 URL(S3)</td>
        <td>봇 차단율 ≥ 98%, p95 ≤ 180ms</td>
      </tr>
      <tr>
        <td>데이터 보호</td>
        <td>S3 SSE‑KMS + 서명 URL, <span class="aws">Aurora</span>/<span class="aws">DynamoDB</span></td>
        <td>앨범은 프라이빗 버킷 + Origin Access Control, DB는 KMS 암호화</td>
        <td>퍼블릭 버킷 0, 암호화 누락 0</td>
      </tr>
      <tr>
        <td>이벤트/실시간</td>
        <td><span class="aws">AppSync</span> Subscriptions, <span class="aws">EventBridge</span>, <span class="aws">SQS</span></td>
        <td>라이브 피드/알림은 앱싱크 실시간, 백엔드는 비동기 파이프</td>
        <td>콜드스타트 < 1%, DLQ 미처리 0</td>
      </tr>
      <tr>
        <td>관찰성/거버넌스</td>
        <td>CloudWatch/X‑Ray, <span class="aws">Security Hub</span>, SIEM, CNAPP</td>
        <td>API/인증/데이터 이벤트 상관, 위험도 High 즉시 차단</td>
        <td>탐지→조치 ≤ 45s, High 미조치 0</td>
      </tr>
    </tbody>
  </table>

  <p class="highlight"><strong>핵심 요약:</strong> T사는 Cognito + Verified Permissions로 ABAC를 구현하고, CloudFront/WAF로 엣지 단계에서 위협을 차단한다. 데이터는 서명 URL과 KMS로 보호하며, 실시간 경로는 AppSync로 확장성과 보안을 동시에 달성한다.</p>

  <h2>7. 구축 체크리스트</h2>
  <ul>
    <li>API Gateway Authorizer(JWT/mTLS) 표준 템플릿화, WAF Bot 룰셋</li>
    <li>Verified Permissions 정책 그래프(리소스/주체/액션) 설계</li>
    <li>비밀/키: Secrets Manager 자동 로테이션, KMS 키 정책 최소권한</li>
    <li>S3 OAC + 서명 URL 강제, 퍼블릭 차단/액세스 애널라이저</li>
    <li>실시간 경로(AppSync)와 비동기 파이프(EventBridge/SQS) 분리</li>
    <li>CloudTrail/Hub/CNAPP/SIEM 연계 대시보드 구성</li>
  </ul>
</body>
</html>
<!-- END OF 4_5_3_애플리케이션_레벨의_서비스_형태를_활용하는_보안_아키텍처.html -->

<!-- START OF 5_종합적인_aws_클라우드의_차세대_보안_아키텍처.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5. 종합적인 AWS 클라우드의 차세대 보안 아키텍처</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background:#fafafa; color:#222; line-height:1.6; padding:20px; }
    h1, h2, h3, h4 { color:#004880; }
    code { background:#eee; padding:2px 5px; border-radius:4px; }
    table { width:100%; border-collapse:collapse; margin:14px 0; background:#fff; }
    th, td { border:1px solid #e6e6e6; padding:8px; vertical-align:top; }
    th { background:#f7fbff; }
    .highlight { background:#f0f8ff; padding:10px; border-left:4px solid #004880; }
    .aws { color:#d35400; font-weight:bold; }
    .vendor { color:#2c3e50; font-style:italic; }
    .grid { display:grid; gap:12px; }
    .grid-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
    .grid-3 { grid-template-columns: repeat(3, minmax(0,1fr)); }
    @media (max-width: 1100px){ .grid-3 { grid-template-columns: 1fr; } }
    @media (max-width: 900px){ .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <h1>5. 종합적인 AWS 클라우드의 차세대 보안 아키텍처</h1>
  <p>본 장은 멀티계정·멀티리전·하이브리드 환경을 대상으로 <strong>제로트러스트·보안형 공급망·CNAPP·CSPM·SIEM/SOAR</strong>를 통합한 <strong>엔드-투-엔드 차세대 보안 아키텍처</strong>를 제시한다. 모든 구성 요소는 <span class="aws">CloudTrail</span>을 중심으로 <strong>로그/이벤트 수집 → 분석(CNAPP/CSPM/SIEM) → 자동 대응(SOAR)</strong>으로 연결된다.</p>

  <h2>1. 설계 목표</h2>
  <ul>
    <li><strong>가시성 100%</strong>: 계정/자산/권한/네트워크/데이터/애플리케이션 전 범위 수집</li>
    <li><strong>정책-as-Code</strong>와 <strong>자동 대응</strong>으로 평균 대응시간(MTTR) &lt; 5분</li>
    <li><strong>규정 준수</strong>(PCI/ISO/ISMS-P/GDPR) 증적 자동화</li>
    <li>보안·성능·비용의 균형: <em>보안 기준선(Foundation) + 위험기반 고도화(Plus)</em></li>
  </ul>

  <h2>2. 레퍼런스 아키텍처 개요</h2>
  <!-- Inline SVG: End-to-End Next-Gen Security on AWS -->
  <svg viewBox="0 0 1180 620" width="100%" height="auto" aria-label="차세대 보안 종합 아키텍처">
    <defs>
      <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="#eef6ff"/>
        <stop offset="100%" stop-color="#ffffff"/>
      </linearGradient>
      <style>
        .box { fill:url(#g1); stroke:#cddff6; stroke-width:1.2; rx:10; }
        .title { font: bold 13px sans-serif; fill:#004880; }
        .txt { font: 12px sans-serif; fill:#333; }
        .arrow { stroke:#8aa9d6; stroke-width:2; marker-end:url(#ah); fill:none; }
      </style>
      <marker id="ah" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
        <path d="M 0 0 L 10 5 L 0 10 z" fill="#8aa9d6"/>
      </marker>
    </defs>

    <!-- Edge & Access -->
    <rect x="30" y="30" width="330" height="120" class="box"/>
    <text x="40" y="55" class="title">엣지/접근 제어</text>
    <text x="40" y="80" class="txt"><tspan class="aws">WAF</tspan>, Shield, CloudFront, Verified Access</text>
    <text x="40" y="100" class="txt">Cognito/IdC, IAM, SSO, mTLS, ZTNA</text>

    <!-- Workloads -->
    <rect x="390" y="30" width="350" height="120" class="box"/>
    <text x="400" y="55" class="title">워크로드/데이터</text>
    <text x="400" y="80" class="txt">EKS/ECS/Lambda, EC2, App Runner</text>
    <text x="400" y="100" class="txt">Aurora/RDS, DynamoDB, S3, OpenSearch</text>

    <!-- Network Hub -->
    <rect x="770" y="30" width="370" height="120" class="box"/>
    <text x="780" y="55" class="title">네트워크/연결</text>
    <text x="780" y="80" class="txt">VPC, TGW, PrivateLink, Network Firewall</text>
    <text x="780" y="100" class="txt">Direct Connect, VPN, Route 53 Resolver</text>

    <!-- Sec Data Lake -->
    <rect x="80" y="200" width="470" height="140" class="box"/>
    <text x="90" y="225" class="title">보안 데이터 레이크</text>
    <text x="90" y="250" class="txt"><tspan class="aws">CloudTrail</tspan>, VPC Flow, ALB/WAF, Route53, RDS/Aurora Logs</text>
    <text x="90" y="270" class="txt">Kinesis Firehose → S3 → Athena/Lake Formation</text>

    <!-- Analytics/Detect -->
    <rect x="580" y="200" width="270" height="140" class="box"/>
    <text x="590" y="225" class="title">탐지/평가</text>
    <text x="590" y="250" class="txt"><tspan class="aws">GuardDuty</tspan>, Detective, Security Hub, Macie</text>
    <text x="590" y="270" class="txt">Config, Access Analyzer, Inspector</text>

    <!-- CNAPP & SIEM -->
    <rect x="880" y="200" width="260" height="140" class="box"/>
    <text x="890" y="225" class="title">CNAPP/CSPM/SIEM</text>
    <text x="890" y="250" class="txt vendor">Wiz/Prisma, Orca (CNAPP)</text>
    <text x="890" y="270" class="txt vendor">Splunk/Elastic/Sentinel (SIEM)</text>

    <!-- SOAR/Automation -->
    <rect x="80" y="370" width="470" height="140" class="box"/>
    <text x="90" y="395" class="title">자동화/대응(SOAR)</text>
    <text x="90" y="420" class="txt">EventBridge, Step Functions, Lambda, SSM Automation</text>
    <text x="90" y="440" class="txt">PagerDuty/Jira/Slack 알림·변경관리</text>

    <!-- Governance -->
    <rect x="580" y="370" width="560" height="140" class="box"/>
    <text x="590" y="395" class="title">거버넌스/컴플라이언스</text>
    <text x="590" y="420" class="txt">Organizations/Control Tower, SCP, Audit Manager</text>
    <text x="590" y="440" class="txt">KMS(MRK), Key/Cert, Secrets Manager, Verified Permissions</text>

    <line x1="195" y1="150" x2="195" y2="200" class="arrow"/>
    <line x1="560" y1="150" x2="560" y2="200" class="arrow"/>
    <line x1="955" y1="150" x2="955" y2="200" class="arrow"/>
    <line x1="315" y1="340" x2="315" y2="370" class="arrow"/>
    <line x1="715" y1="340" x2="715" y2="370" class="arrow"/>
    <line x1="1010" y1="340" x2="1010" y2="370" class="arrow"/>
  </svg>

  <h2>3. 기능별 도구 매핑 (AWS ↔ 3rd‑Party)</h2>
  <table>
    <thead>
      <tr><th>기능</th><th>AWS 서비스</th><th>3rd‑Party</th><th>주요 역할/비고</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>로그/감사</td>
        <td><span class="aws">CloudTrail</span>, CloudWatch Logs, S3, Athena</td>
        <td class="vendor">Splunk, Elastic, Sumo Logic</td>
        <td>CloudTrail→SIEM 파이프라인(파서/상관), 장기보존은 S3+Athena</td>
      </tr>
      <tr>
        <td>위협 탐지(NDR/IDS)</td>
        <td><span class="aws">GuardDuty</span>, Detective, VPC Flow Logs</td>
        <td class="vendor">Palo Alto, Check Point, ExtraHop</td>
        <td>Flow 기반 이상 탐지 및 조사 그래프(Detective)</td>
      </tr>
      <tr>
        <td>취약점/이미지 스캔</td>
        <td><span class="aws">Inspector</span>, ECR Scan</td>
        <td class="vendor">Aqua, Snyk, Tenable</td>
        <td>이미지/OS 패키지 CVE 스캔, 파이프라인 게이팅</td>
      </tr>
      <tr>
        <td>권한/액세스</td>
        <td><span class="aws">IAM/IdC</span>, Access Analyzer, Verified Permissions</td>
        <td class="vendor">Okta/Auth0, Veza</td>
        <td>SSO, ABAC, 외부공개/오버퍼미션 탐지</td>
      </tr>
      <tr>
        <td>데이터 보안/개인정보</td>
        <td><span class="aws">KMS</span>, Macie, Secrets Manager</td>
        <td class="vendor">BigID, OneTrust</td>
        <td>PII 탐지/분류(Macie), 키·시크릿 관리</td>
      </tr>
      <tr>
        <td>네트워크 보안</td>
        <td><span class="aws">Network Firewall</span>, WAF, Shield, PrivateLink</td>
        <td class="vendor">Cloudflare/Akamai, Palo Alto</td>
        <td>L7/WAAP, DDoS, 인스펙션 VPC 패턴</td>
      </tr>
      <tr>
        <td>구성/준수(CSPM)</td>
        <td><span class="aws">Security Hub</span>, Config, Audit Manager</td>
        <td class="vendor">Wiz, Prisma Cloud, Orca</td>
        <td>보안 기준선 평가/증적, 다계정 리포팅</td>
      </tr>
      <tr>
        <td>CNAPP(클라우드 네이티브 보호)</td>
        <td>—</td>
        <td class="vendor">Wiz, Prisma, Orca, Lacework</td>
        <td>자산/권한/네트워크/이미지/런타임 상관 분석</td>
      </tr>
      <tr>
        <td>SIEM/SOAR</td>
        <td><span class="aws">EventBridge</span>, Step Functions, Lambda</td>
        <td class="vendor">Splunk/Elastic/Microsoft Sentinel, PagerDuty</td>
        <td><strong>CloudTrail→SIEM</strong> 상관, 티켓/온콜, 런북 자동화</td>
      </tr>
    </tbody>
  </table>

  <h2>4. 약어/용어 매핑 표</h2>
  <table>
    <thead>
      <tr><th>약어</th><th>의미</th><th>대표 제품/서비스</th><th>설명</th></tr>
    </thead>
    <tbody>
      <tr><td>CNAPP</td><td>Cloud Native Application Protection Platform</td><td class="vendor">Wiz, Prisma Cloud, Orca</td><td>클라우드 자산/구성/권한/취약점/런타임을 통합 가시화/탐지</td></tr>
      <tr><td>CSPM</td><td>Cloud Security Posture Management</td><td><span class="aws">Security Hub</span>, <span class="aws">Config</span>, <span class="vendor">Prisma/Wiz</span></td><td>클라우드 구성/정책 준수 평가 및 시정</td></tr>
      <tr><td>SIEM</td><td>Security Information and Event Management</td><td class="vendor">Splunk, Elastic, Sentinel</td><td>로그 집계·상관·경보. <strong>CloudTrail-SIEM</strong> 연계 핵심</td></tr>
      <tr><td>SOAR</td><td>Security Orchestration, Automation & Response</td><td class="vendor">Splunk SOAR, Cortex XSOAR</td><td>경보 기반 자동 조치(격리/키회전/SG 차단)</td></tr>
      <tr><td>WAAP</td><td>Web App & API Protection</td><td><span class="aws">WAF</span>, <span class="vendor">Cloudflare</span></td><td>웹/API 계층의 공격 방어(OWASP/봇)</td></tr>
      <tr><td>ZTNA</td><td>Zero Trust Network Access</td><td><span class="aws">Verified Access</span></td><td>네트워크 경계 대신 사용자·디바이스·컨텍스트 기반 접근</td></tr>
    </tbody>
  </table>

  <h2>5. CloudTrail → SIEM/CNAPP 데이터 흐름</h2>
  <ol>
    <li><strong>수집:</strong> 조직 단위 <span class="aws">CloudTrail</span> 다중 리전 활성화, <span class="aws">KMS</span> 암호화, S3 버전/버킷 잠금(Object Lock)</li>
    <li><strong>전송:</strong> <span class="aws">Kinesis Firehose</span>에서 포맷 변환/압축 → S3/Elastic/Splunk 인덱서</li>
    <li><strong>상관:</strong> SIEM에서 <em>사용자·역할·리소스</em> 기준 상관, CNAPP는 자산/권한 그래프에 매핑</li>
    <li><strong>대응:</strong> <span class="aws">EventBridge</span> 룰이 SIEM/CNAPP 고심각도 이벤트를 받아 <span class="aws">SSM Automation</span> 런북 실행</li>
  </ol>

  <h2>6. 보안 기준선(Foundation) 체크리스트</h2>
  <ul>
    <li>조직 단위 <span class="aws">CloudTrail</span>/<span class="aws">Config</span>/로그 아카이브 계정 분리, <span class="aws">Security Hub</span> 표준 활성화</li>
    <li><span class="aws">KMS</span> 기본/고급키(MRK) 전략 수립, <span class="aws">Secrets Manager</span> 자동 로테이션</li>
    <li>네트워크: <span class="aws">VPC Lattice</span>/PrivateLink, <span class="aws">Network Firewall</span> 검사 VPC, <span class="aws">WAF</span></li>
    <li>아이덴티티: <span class="aws">IAM Identity Center</span> SSO, Access Analyzer, 최소권한·권한 경로 점검</li>
    <li>데이터: <span class="aws">Macie</span>로 PII 식별, S3 퍼블릭 차단/버킷락, DynamoDB/RDS 암호화</li>
  </ul>

  <h2>7. 위험기반 고도화(Plus) 제안</h2>
  <ul>
    <li>CNAPP(<span class="vendor">Wiz/Prisma</span>)로 <em>권한 그래프 + 네트워크 경로 + 취약점</em> 상관 위협 모델링</li>
    <li>권한 그래프(<span class="vendor">Veza</span>)로 과권한/비사용 권한 제거, 데이터 권한(<span class="vendor">Satori</span>)</li>
    <li>서플라이체인: SBOM(Syft), 서명(Sigstore), 파이프라인 스캔(Inspector/Snyk)</li>
    <li>SOAR 플레이북: 키 유출/퍼블릭 버킷/의심 API 호출/토큰 탈취별 자동 조치</li>
  </ul>

  <h2>8. 종합 문제 & 해설 (3문제)</h2>
  <h3>문제 1. 다계정 핀테크의 "CloudTrail‑SIEM‑SOAR" 기반 이상 행위 자동 차단</h3>
  <p><strong>시나리오:</strong> 금융사 A는 20개 AWS 계정과 온프레미스 AD/Okta를 병행한다. 최근 외부 공급업체 계정 자격 증명 탈취로 IAM 역할 오남용 시도가 관찰되었다. 요구사항: (1) 모든 리전 CloudTrail/Config 중앙화, (2) SIEM에서 고위험 이벤트 실시간 상관(예: <em>AssumeRole from TOR IP + S3 ListBucket on PII</em>), (3) SOAR가 자동으로 <em>세션 정지, 액세스키 폐기, SG 차단</em>을 수행, (4) PCI DSS 증적 자동화. <em>과거 이슈:</em> CloudTrail 일부 리전 미활성, S3 퍼블릭 정책 드리프트, 키 회전 미준수, 경보 피로(Alert Fatigue).</p>
  <p><strong>해설:</strong></p>
  <table>
    <thead><tr><th>구성요소</th><th>선택</th><th>구현 상세</th><th>KPI/임계</th></tr></thead>
    <tbody>
      <tr><td>수집</td><td><span class="aws">CloudTrail(조직)</span>, <span class="aws">Config</span></td><td>다중 리전/다중 트레일, KMS 암호화, S3 Object Lock, Lake Formation</td><td>로그 손실 0, 무결성 위반 0</td></tr>
      <tr><td>상관</td><td class="vendor">Splunk/Elastic</td><td>유저/역할/IP/지오/리소스 상관. TOR/프록시·지오이상 탐지, UEBA 룰</td><td>탐지 ≤ 30s, 오탐 &lt; 3%</td></tr>
      <tr><td>대응</td><td><span class="aws">EventBridge</span> + <span class="aws">SSM Automation</span></td><td>SIEM 웹훅 → EB → 런북(키 폐기, STS 세션 무효화, SG 격리)</td><td>조치 ≤ 60s, 재발 0</td></tr>
      <tr><td>거버넌스</td><td><span class="aws">Security Hub</span>, Audit Manager</td><td>PCI DSS 컨트롤 맵핑·증적 자동 수집, 예외 태깅·만료</td><td>규정 위반 0, 증적 수집 자동화 100%</td></tr>
    </tbody>
  </table>
  <p class="highlight"><strong>핵심:</strong> <em>CloudTrail→SIEM→SOAR</em>의 폐루프를 만들고, 조직 트레일/KMS/Object Lock으로 무결성·보존을 보장한다.</p>

  <h3>문제 2. 글로벌 커머스의 CNAPP 기반 "권한 경로 + 네트워크 경로" 상관 위협 차단</h3>
  <p><strong>시나리오:</strong> B사는 60개 VPC/2000+ 보안그룹/수천 IAM 정책을 가진 대규모 환경이다. PII가 저장된 S3/RDS에 대해 <em>인터넷→ALB→ECS→RDS</em> 경로와 <em>개발자 역할→EC2→S3</em> 권한 경로가 교차한다. 요구: (1) CNAPP로 자산/권한/네트워크 그래프 생성, (2) <em>퍼블릭 경로 + 과권한</em> 조합을 High로 승격, (3) SOAR가 SG/NACL·Bucket 정책을 자동 수정, (4) 변화 감지 시 재평가. <em>과거 이슈:</em> SG 와일드카드, 비사용 권한 방치, 테스트용 퍼블릭 버킷 잔존.</p>
  <p><strong>해설:</strong></p>
  <table>
    <thead><tr><th>단계</th><th>도구</th><th>세부</th><th>성과</th></tr></thead>
    <tbody>
      <tr><td>가시화</td><td class="vendor">Wiz/Prisma/Orca</td><td>에셋/권한/네트워크 경로 자동 그래프, PII 태깅(Macie 연동)</td><td>위험 경로 식별 100%</td></tr>
      <tr><td>평가</td><td><span class="aws">Security Hub</span>, <span class="aws">Config</span></td><td>퍼블릭/암호화/로깅 규칙, 결과를 CNAPP에 피드백</td><td>규정 위반 0</td></tr>
      <tr><td>조치</td><td><span class="aws">Lambda</span>, <span class="aws">Step Functions</span></td><td>SG 0.0.0.0/0 차단, 버킷 정책 수리, IAM 권한 축소</td><td>수정 MTTR &lt; 5분</td></tr>
      <tr><td>지속</td><td><span class="aws">EventBridge</span></td><td>변경 이벤트 기반 재평가 트리거, 드리프트 감시</td><td>드리프트 0</td></tr>
    </tbody>
  </table>
  <p class="highlight"><strong>핵심:</strong> <em>권한그래프×네트워크경로×데이터민감도</em>의 교집합을 High로 승격하고 자동 시정까지 연결한다.</p>

  <h3>문제 3. 서버리스·컨테이너 혼합 환경의 공급망/런타임 종단 보안</h3>
  <p><strong>시나리오:</strong> C사는 Lambda/ECS/EKS가 혼재한다. 문제는 (1) SBOM 부재로 Log4Shell 재발 우려, (2) ECR 미스캔 이미지 배포, (3) 런타임에서 과권한 서비스어카운트, (4) 함수 환경변수에 평문 시크릿. 목표는 <em>High 취약점 프로덕션 진입 0</em>, <em>시크릿 평문 0</em>, <em>런타임 과권한 0</em>.</p>
  <p><strong>해설:</strong></p>
  <table>
    <thead><tr><th>영역</th><th>도구</th><th>구현</th><th>KPI</th></tr></thead>
    <tbody>
      <tr><td>공급망</td><td><span class="aws">CodePipeline</span>, <span class="aws">Inspector</span>, <span class="vendor">Syft/Grype</span>, <span class="vendor">Sigstore</span></td><td>SBOM 생성→스캔→서명→서명 검증 실패시 배포 중단</td><td>High 미처리 배포 0</td></tr>
      <tr><td>시크릿</td><td><span class="aws">Secrets Manager</span>, <span class="aws">KMS</span></td><td>함수/컨테이너 시크릿 참조, 환경변수 암호화, 자동 로테이션</td><td>평문 시크릿 0</td></tr>
      <tr><td>런타임</td><td class="vendor">Wiz/Prisma</td><td>과권한/네트워크 이상 탐지, EDR 연동로 격리</td><td>과권한 0, MTTR ≤ 5분</td></tr>
      <tr><td>거버넌스</td><td><span class="aws">Security Hub</span>, <span class="aws">Config</span></td><td>필수 규칙(암호화/퍼블릭 차단/로그) 강제</td><td>규정 위반 0</td></tr>
    </tbody>
  </table>
  <p class="highlight"><strong>핵심:</strong> 공급망에서 <em>서명·SBOM·스캔·게이팅</em>을 강제하고, 런타임은 CNAPP로 상시 감시·격리한다.</p>

  <h2>9. 운영 베스트프랙티스</h2>
  <ul>
    <li><strong>조직 계정 분리:</strong> 보안/로깅/공유서비스/프로덕션 계정 분리, SCP로 가드레일</li>
    <li><strong>데이터 레이크 우선:</strong> 모든 로그는 S3로 수렴, 파케이·압축, Athena/Glue 카탈로그</li>
    <li><strong>태깅/메타데이터:</strong> <code>Env, Owner, DataClass, Compliance</code> 태그로 정책·비용·가시성 일원화</li>
    <li><strong>Chaos/IR 드릴:</strong> 정기 침해 모의훈련, SOAR 런북 리허설</li>
  </ul>

  <h2>10. 최종 요약</h2>
  <p>차세대 보안 아키텍처는 <strong>CloudTrail</strong>을 중심으로 SIEM/CNAPP/CSPM이 삼각편대를 이루고, <strong>EventBridge→SSM</strong> 자동화를 통해 <em>탐지에서 조치까지</em>의 시간을 단축한다. <strong>정책-as-Code</strong>, <strong>키/시크릿 관리</strong>, <strong>데이터 보호</strong>, <strong>WAAP/네트워크 세그멘테이션</strong>이 그 토대를 이룬다.</p>
</body>
</html>

<!-- END OF 5_종합적인_aws_클라우드의_차세대_보안_아키텍처.html -->

</body>
</html>
