User: test
Model: Hello! I'm working and ready to help you. What would you like to test or discuss?
User: AWS ì°¨ì„¸ëŒ€ ë³´ì•ˆ ì•„í‚¤í…ì³ ì„¤ê³„ ê°€ì´ë“œ
Model: # AWS ì°¨ì„¸ëŒ€ ë³´ì•ˆ ì•„í‚¤í…ì³ ì„¤ê³„ ê°€ì´ë“œ

AWS í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ í˜„ëŒ€ì ì´ê³  ê°•ë ¥í•œ ë³´ì•ˆ ì•„í‚¤í…ì³ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•œ í¬ê´„ì ì¸ ê°€ì´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## 1. í•µì‹¬ ë³´ì•ˆ ì›ì¹™

### Zero Trust ì•„í‚¤í…ì³
- **ì›ì¹™**: "ì ˆëŒ€ ì‹ ë¢°í•˜ì§€ ë§ê³ , í•­ìƒ ê²€ì¦í•˜ë¼"
- ë„¤íŠ¸ì›Œí¬ ìœ„ì¹˜ì™€ ê´€ê³„ì—†ì´ ëª¨ë“  ì ‘ê·¼ ìš”ì²­ ê²€ì¦
- ìµœì†Œ ê¶Œí•œ ì›ì¹™(Least Privilege) ì ìš©

### Defense in Depth (ë‹¤ì¸µ ë°©ì–´)
- ì—¬ëŸ¬ ë³´ì•ˆ ê³„ì¸µ êµ¬ì¶•
- ë‹¨ì¼ ì‹¤íŒ¨ ì§€ì  ì œê±°
- ê° ê³„ì¸µë³„ ë…ë¦½ì ì¸ ë³´ì•ˆ í†µì œ

## 2. ê³„ì • ë° ì¡°ì§ ë³´ì•ˆ

### AWS Organizations êµ¬ì¡°
```
Root OU
â”œâ”€â”€ Security OU
â”‚   â”œâ”€â”€ Log Archive Account
â”‚   â””â”€â”€ Security Tooling Account
â”œâ”€â”€ Infrastructure OU
â”‚   â”œâ”€â”€ Network Account
â”‚   â””â”€â”€ Shared Services Account
â””â”€â”€ Workload OU
    â”œâ”€â”€ Production Account
    â”œâ”€â”€ Staging Account
    â””â”€â”€ Development Account
```

### ì£¼ìš” ì„¤ì •
- **SCP (Service Control Policies)** ì ìš©
- **AWS Control Tower** í™œìš©í•œ ê±°ë²„ë„ŒìŠ¤ ìë™í™”
- ê³„ì •ë³„ ì—­í•  ë¶„ë¦¬ (RBAC)

## 3. ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ì•„í‚¤í…ì³

### VPC ì„¤ê³„
```
Internet Gateway
       â†“
[Public Subnet - ALB/NLB]
       â†“
[Private Subnet - Application]
       â†“
[Isolated Subnet - Database]
```

### í•µì‹¬ êµ¬ì„±ìš”ì†Œ

**AWS Network Firewall**
- ìƒíƒœ ì €ì¥ ë°©í™”ë²½
- IDS/IPS ê¸°ëŠ¥
- Domain í•„í„°ë§

**Security Groups & NACLs**
- Security Groups: ìƒíƒœ ì €ì¥, ì¸ìŠ¤í„´ìŠ¤ ë ˆë²¨
- NACLs: ìƒíƒœ ë¹„ì €ì¥, ì„œë¸Œë„· ë ˆë²¨

**VPC Flow Logs**
- ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ëª¨ë‹ˆí„°ë§
- CloudWatch Logs ë˜ëŠ” S3ë¡œ ì „ì†¡

## 4. ë°ì´í„° ë³´í˜¸

### ì•”í˜¸í™” ì „ëµ

**ì „ì†¡ ì¤‘ ì•”í˜¸í™”**
- TLS 1.2 ì´ìƒ ê°•ì œ
- AWS Certificate Manager(ACM) í™œìš©
- VPN/Direct Connectë¥¼ í†µí•œ ì „ìš© ì—°ê²°

**ì €ì¥ ë°ì´í„° ì•”í˜¸í™”**
- AWS KMSë¥¼ í†µí•œ í‚¤ ê´€ë¦¬
- Customer Managed Keys(CMK) ì‚¬ìš©
- ìë™ í‚¤ ë¡œí…Œì´ì…˜ í™œì„±í™”

### ë°ì´í„° ë¶„ë¥˜ ë° ë³´í˜¸
```yaml
ë°ì´í„° ë¶„ë¥˜:
  Public: ì•”í˜¸í™” ì„ íƒ
  Internal: ì„œë²„ ì¸¡ ì•”í˜¸í™”(SSE)
  Confidential: CMK + ì ‘ê·¼ ë¡œê¹…
  Restricted: CMK + VPC Endpoint + ì ‘ê·¼ ì œí•œ
```

## 5. ì‹ë³„ ë° ì ‘ê·¼ ê´€ë¦¬ (IAM)

### IAM ëª¨ë²” ì‚¬ë¡€

**ì—­í•  ê¸°ë°˜ ì ‘ê·¼**
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],
      "Resource": "arn:aws:s3:::my-bucket/*",
      "Condition": {
        "StringEquals": {
          "aws:PrincipalOrgID": "o-xxxxxxxxx"
        }
      }
    }
  ]
}
```

**ê¶Œì¥ êµ¬ì„±**
- MFA í•„ìˆ˜ í™œì„±í™”
- ë£¨íŠ¸ ê³„ì • ì‚¬ìš© ê¸ˆì§€
- IAM Access Analyzer í™œìš©
- ê¶Œí•œ ê²½ê³„(Permission Boundaries) ì„¤ì •

### AWS SSO (Identity Center)
- ì¤‘ì•™ ì§‘ì¤‘ì‹ ì ‘ê·¼ ê´€ë¦¬
- SAML 2.0 ê¸°ë°˜ í˜ë”ë ˆì´ì…˜
- ì„ì‹œ ìê²© ì¦ëª… ì‚¬ìš©

## 6. ìœ„í˜‘ íƒì§€ ë° ëŒ€ì‘

### ë³´ì•ˆ ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ

**Amazon GuardDuty**
- ì§€ëŠ¥í˜• ìœ„í˜‘ íƒì§€
- VPC Flow Logs, CloudTrail, DNS ë¡œê·¸ ë¶„ì„
- ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ì´ìƒ íƒì§€

**AWS Security Hub**
- í†µí•© ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ
- ìë™í™”ëœ ì»´í”Œë¼ì´ì–¸ìŠ¤ ì ê²€
- CIS, PCI-DSS ë²¤ì¹˜ë§ˆí¬

**Amazon Detective**
- ë³´ì•ˆ ì¡°ì‚¬ ë° ë¶„ì„
- ì‹œê°í™”ëœ ì¡°ì‚¬ ê·¸ë˜í”„
- ê·¼ë³¸ ì›ì¸ ë¶„ì„

### SIEM í†µí•© ì•„í‚¤í…ì³
```
CloudTrail â”€â”€â”
GuardDuty â”€â”€â”€â”¤
Security Hub â”œâ”€â”€â†’ EventBridge â”€â”€â†’ Lambda â”€â”€â†’ SIEM
Config â”€â”€â”€â”€â”€â”€â”¤                              (Splunk/ELK)
Macie â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 7. ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ

### WAF & Shield
```yaml
AWS WAF ê·œì¹™:
  - Rate Limiting: ìš”ì²­ ì œí•œ
  - SQL Injection: ì°¨ë‹¨
  - XSS: í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìŠ¤í¬ë¦½íŒ… ë°©ì–´
  - Geo Blocking: ì§€ì—­ë³„ ì°¨ë‹¨
  - Bot Control: ë´‡ íƒì§€ ë° ê´€ë¦¬

AWS Shield:
  - Standard: ìë™ DDoS ë°©ì–´
  - Advanced: ê³ ê¸‰ DDoS ë°©ì–´ + SRT ì§€ì›
```

### Secrets Management
- **AWS Secrets Manager**: ìê²© ì¦ëª… ìë™ ë¡œí…Œì´ì…˜
- **Systems Manager Parameter Store**: êµ¬ì„± ë°ì´í„° ì €ì¥
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì—ì„œ í•˜ë“œì½”ë”© ê¸ˆì§€

## 8. ì»´í”Œë¼ì´ì–¸ìŠ¤ ë° ê±°ë²„ë„ŒìŠ¤

### AWS Config ê·œì¹™
```
ìë™ ê·œì • ì¤€ìˆ˜ ì ê²€:
âœ“ ì•”í˜¸í™”ë˜ì§€ ì•Šì€ EBS ë³¼ë¥¨ íƒì§€
âœ“ ê³µê°œ S3 ë²„í‚· ì‹ë³„
âœ“ ë¯¸ì‚¬ìš© IAM ìê²© ì¦ëª… íƒì§€
âœ“ Security Group ê°œë°© í¬íŠ¸ ì ê²€
```

### ê°ì‚¬ ë° ë¡œê¹…
- **CloudTrail**: ëª¨ë“  API í˜¸ì¶œ ê¸°ë¡
- **ë‹¤ì¤‘ ë¦¬ì „ ì¶”ì ** í™œì„±í™”
- **ë¡œê·¸ íŒŒì¼ ë¬´ê²°ì„± ê²€ì¦** ì„¤ì •
- S3 ë²„í‚· ì•”í˜¸í™” ë° MFA Delete í™œì„±í™”

## 9. ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ í”Œë ˆì´ë¶

### ìë™í™”ëœ ëŒ€ì‘ ì‹œë‚˜ë¦¬ì˜¤

**ì˜ˆì‹œ: ì˜ì‹¬ìŠ¤ëŸ¬ìš´ IAM í™œë™ íƒì§€**
```
GuardDuty ì•Œë¦¼
    â†“
EventBridge ê·œì¹™ íŠ¸ë¦¬ê±°
    â†“
Lambda í•¨ìˆ˜ ì‹¤í–‰
    â†“
1. ì‚¬ìš©ì ê²©ë¦¬ (ê¶Œí•œ ì œê±°)
2. SNS ì•Œë¦¼ ë°œì†¡
3. í‹°ì¼“ ìƒì„± (JIRA/ServiceNow)
4. í¬ë Œì‹ ìŠ¤ëƒ…ìƒ· ìƒì„±
```

### ëŒ€ì‘ ì²´í¬ë¦¬ìŠ¤íŠ¸
1. **íƒì§€**: GuardDuty/Security Hub ì•Œë¦¼
2. **ê²©ë¦¬**: ì˜í–¥ë°›ì€ ë¦¬ì†ŒìŠ¤ ë¶„ë¦¬
3. **ì¡°ì‚¬**: Detective/CloudWatch Logs ë¶„ì„
4. **ë³µêµ¬**: ì•ˆì „í•œ ë°±ì—…ì—ì„œ ë³µì›
5. **ì‚¬í›„ ê²€í† **: ê·¼ë³¸ ì›ì¸ ë¶„ì„ ë° ê°œì„ 

## 10. ì„œë²„ë¦¬ìŠ¤ ë³´ì•ˆ

### Lambda ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€
- **VPC ë‚´ Lambda ì‹¤í–‰** (í•„ìš”ì‹œ)
- **í™˜ê²½ ë³€ìˆ˜ ì•”í˜¸í™”** (KMS)
- **ìµœì†Œ ê¶Œí•œ IAM ì—­í• **
- **ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ ì •ì±…** í™œìš©

### API Gateway ë³´ì•ˆ
```yaml
ë³´ì•ˆ ê³„ì¸µ:
  - Lambda Authorizer (ì»¤ìŠ¤í…€ ì¸ì¦)
  - Cognito User Pools
  - API Keys + Usage Plans
  - Resource Policies
  - WAF í†µí•©
```

## 11. ì»¨í…Œì´ë„ˆ ë³´ì•ˆ

### EKS ë³´ì•ˆ ì•„í‚¤í…ì³
```
Pod Security Standards
    â†“
Network Policies (Calico)
    â†“
IRSA (IAM Roles for Service Accounts)
    â†“
Secrets (External Secrets Operator)
    â†“
Image Scanning (ECR)
```

### ì£¼ìš” ë„êµ¬
- **Amazon ECR Image Scanning**: ì·¨ì•½ì  ìŠ¤ìº”
- **Falco**: ëŸ°íƒ€ì„ ë³´ì•ˆ ëª¨ë‹ˆí„°ë§
- **OPA/Gatekeeper**: ì •ì±… ê¸°ë°˜ ê±°ë²„ë„ŒìŠ¤

## 12. ë¹„ìš© ìµœì í™”ëœ ë³´ì•ˆ

### ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì ‘ê·¼
```
í•„ìˆ˜ (Tier 1):
- IAM + MFA
- CloudTrail
- Security Groups
- Encryption at rest

ê¶Œì¥ (Tier 2):
- GuardDuty
- Security Hub
- Config

ê³ ê¸‰ (Tier 3):
- Macie
- Detective
- Network Firewall
```

## 13. ìë™í™” ë° IaC

### Terraform ì˜ˆì‹œ
```hcl
module "security_baseline" {
  source = "./modules/security"
  
  enable_guardduty    = true
  enable_security_hub = true
  enable_config       = true
  
  cloudtrail_bucket   = "org-audit-logs"
  log_retention_days  = 365
  
  tags = {
    Environment = "Production"
    Compliance  = "PCI-DSS"
  }
}
```

## 14. ì§€ì†ì ì¸ ë³´ì•ˆ ê°œì„ 

### DevSecOps íŒŒì´í”„ë¼ì¸
```
Code â†’ SAST â†’ Build â†’ Container Scan â†’ Deploy â†’ DAST â†’ Monitor
       â†“                    â†“                      â†“        â†“
   SonarQube            Trivy/Snyk            OWASP ZAP  GuardDuty
```

### ì •ê¸° ì ê²€ ì‚¬í•­
- [ ] ì›”ê°„ IAM ê¶Œí•œ ê²€í† 
- [ ] ë¶„ê¸°ë³„ ë³´ì•ˆ ê·¸ë£¹ ê°ì‚¬
- [ ] ë¶„ê¸°ë³„ ì¬í•´ ë³µêµ¬ í›ˆë ¨
- [ ] ë°˜ê¸°ë³„ ì¹¨íˆ¬ í…ŒìŠ¤íŠ¸
- [ ] ì—°ê°„ ì•„í‚¤í…ì³ ë¦¬ë·°

## 15. ì°¸ê³  ë¦¬ì†ŒìŠ¤

- **AWS Well-Architected Framework** - Security Pillar
- **CIS AWS Foundations Benchmark**
- **NIST Cybersecurity Framework**
- **AWS Security Best Practices Whitepaper**

---

ì´ ê°€ì´ë“œë¥¼ íŠ¹ì • ì‚°ì—…ì´ë‚˜ ì»´í”Œë¼ì´ì–¸ìŠ¤ ìš”êµ¬ì‚¬í•­(ì˜ˆ: HIPAA, GDPR, ê¸ˆìœµê¶Œ)ì— ë§ì¶° ë” ìƒì„¸íˆ ì„¤ëª…í•´ë“œë¦´ê¹Œìš”?
User: ìœ„ ë‚´ìš©ì„ ë¸Œë¼ìš°ì ¸ì—ì„œ ë³¼ìˆ˜ ìˆë„ë¡ html íŒŒì¼ë¡œ ë§Œë“¤ì–´ì¤˜
Model: ```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS ì°¨ì„¸ëŒ€ ë³´ì•ˆ ì•„í‚¤í…ì³ ì„¤ê³„ ê°€ì´ë“œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #232F3E 0%, #FF9900 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        nav {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 3px solid #FF9900;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }

        nav a {
            color: #232F3E;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s;
            font-weight: 500;
        }

        nav a:hover {
            background: #FF9900;
            color: white;
        }

        main {
            padding: 40px;
        }

        section {
            margin-bottom: 50px;
            scroll-margin-top: 80px;
        }

        h2 {
            color: #232F3E;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #FF9900;
        }

        h3 {
            color: #FF9900;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
        }

        h4 {
            color: #232F3E;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .architecture-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-left: 4px solid #FF9900;
            margin: 20px 0;
            font-family: monospace;
            white-space: pre;
            overflow-x: auto;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #0066cc;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ff9900;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        th {
            background: #232F3E;
            color: white;
            padding: 12px;
            text-align: left;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .checklist {
            list-style: none;
            margin-left: 0;
        }

        .checklist li:before {
            content: "â˜ ";
            color: #FF9900;
            font-weight: bold;
            margin-right: 10px;
        }

        footer {
            background: #232F3E;
            color: white;
            text-align: center;
            padding: 30px;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #FF9900;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 24px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        .back-to-top:hover {
            background: #232F3E;
            transform: translateY(-5px);
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            header h1 {
                font-size: 1.8em;
            }

            main {
                padding: 20px;
            }

            nav ul {
                flex-direction: column;
                align-items: stretch;
            }

            nav a {
                display: block;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ›¡ï¸ AWS ì°¨ì„¸ëŒ€ ë³´ì•ˆ ì•„í‚¤í…ì³ ì„¤ê³„ ê°€ì´ë“œ</h1>
            <p>í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ í˜„ëŒ€ì ì´ê³  ê°•ë ¥í•œ ë³´ì•ˆ ì•„í‚¤í…ì³ êµ¬ì¶•ì„ ìœ„í•œ í¬ê´„ì  ê°€ì´ë“œ</p>
        </header>

        <nav>
            <ul>
                <li><a href="#principles">ë³´ì•ˆ ì›ì¹™</a></li>
                <li><a href="#accounts">ê³„ì • ê´€ë¦¬</a></li>
                <li><a href="#network">ë„¤íŠ¸ì›Œí¬</a></li>
                <li><a href="#data">ë°ì´í„° ë³´í˜¸</a></li>
                <li><a href="#iam">IAM</a></li>
                <li><a href="#detection">ìœ„í˜‘ íƒì§€</a></li>
                <li><a href="#application">ì• í”Œë¦¬ì¼€ì´ì…˜</a></li>
                <li><a href="#compliance">ì»´í”Œë¼ì´ì–¸ìŠ¤</a></li>
                <li><a href="#incident">ì¸ì‹œë˜íŠ¸ ëŒ€ì‘</a></li>
                <li><a href="#serverless">ì„œë²„ë¦¬ìŠ¤</a></li>
                <li><a href="#container">ì»¨í…Œì´ë„ˆ</a></li>
                <li><a href="#automation">ìë™í™”</a></li>
            </ul>
        </nav>

        <main>
            <!-- Section 1: í•µì‹¬ ë³´ì•ˆ ì›ì¹™ -->
            <section id="principles">
                <h2>1. í•µì‹¬ ë³´ì•ˆ ì›ì¹™</h2>
                
                <h3>Zero Trust ì•„í‚¤í…ì³</h3>
                <div class="info-box">
                    <strong>í•µì‹¬ ì›ì¹™:</strong> "ì ˆëŒ€ ì‹ ë¢°í•˜ì§€ ë§ê³ , í•­ìƒ ê²€ì¦í•˜ë¼ (Never Trust, Always Verify)"
                </div>
                <ul>
                    <li>ë„¤íŠ¸ì›Œí¬ ìœ„ì¹˜ì™€ ê´€ê³„ì—†ì´ ëª¨ë“  ì ‘ê·¼ ìš”ì²­ì„ ê²€ì¦</li>
                    <li>ìµœì†Œ ê¶Œí•œ ì›ì¹™(Least Privilege) ì—„ê²© ì ìš©</li>
                    <li>ë§ˆì´í¬ë¡œ ì„¸ê·¸ë©˜í…Œì´ì…˜ì„ í†µí•œ ê³µê²© í‘œë©´ ìµœì†Œí™”</li>
                    <li>ì—°ì†ì ì¸ ëª¨ë‹ˆí„°ë§ ë° ê²€ì¦</li>
                </ul>

                <h3>Defense in Depth (ë‹¤ì¸µ ë°©ì–´)</h3>
                <ul>
                    <li>ì—¬ëŸ¬ ë³´ì•ˆ ê³„ì¸µì„ í†µí•œ ì¤‘ì²©ëœ ë°©ì–´ ì²´ê³„ êµ¬ì¶•</li>
                    <li>ë‹¨ì¼ ì‹¤íŒ¨ ì§€ì (Single Point of Failure) ì œê±°</li>
                    <li>ê° ê³„ì¸µë³„ ë…ë¦½ì ì¸ ë³´ì•ˆ í†µì œ ë©”ì»¤ë‹ˆì¦˜</li>
                    <li>ê³„ì¸µ ê°„ ìƒí˜¸ ë³´ì™„ì  ë³´ì•ˆ ì •ì±…</li>
                </ul>
            </section>

            <!-- Section 2: ê³„ì • ë° ì¡°ì§ ë³´ì•ˆ -->
            <section id="accounts">
                <h2>2. ê³„ì • ë° ì¡°ì§ ë³´ì•ˆ</h2>
                
                <h3>AWS Organizations êµ¬ì¡°</h3>
                <div class="architecture-diagram">Root Organization Unit (OU)
â”œâ”€â”€ Security OU
â”‚   â”œâ”€â”€ Log Archive Account (ì¤‘ì•™ ë¡œê·¸ ì €ì¥ì†Œ)
â”‚   â”œâ”€â”€ Security Tooling Account (ë³´ì•ˆ ë„êµ¬)
â”‚   â””â”€â”€ Audit Account (ê°ì‚¬ ë° ì»´í”Œë¼ì´ì–¸ìŠ¤)
â”‚
â”œâ”€â”€ Infrastructure OU
â”‚   â”œâ”€â”€ Network Account (ì „ì‚¬ ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬)
â”‚   â”œâ”€â”€ Shared Services Account (ê³µìœ  ì„œë¹„ìŠ¤)
â”‚   â””â”€â”€ DNS Account (Route 53 ê´€ë¦¬)
â”‚
â””â”€â”€ Workload OU
    â”œâ”€â”€ Production Account (ìš´ì˜ í™˜ê²½)
    â”œâ”€â”€ Staging Account (ìŠ¤í…Œì´ì§• í™˜ê²½)
    â””â”€â”€ Development Account (ê°œë°œ í™˜ê²½)</div>

                <h3>ì£¼ìš” ì„¤ì • ë° êµ¬ì„±</h3>
                <ul>
                    <li><strong>SCP (Service Control Policies)</strong>: ì¡°ì§ ì „ì²´ì— ì ìš©ë˜ëŠ” ê¶Œí•œ ê²½ê³„ ì„¤ì •</li>
                    <li><strong>AWS Control Tower</strong>: ë©€í‹° ì–´ì¹´ìš´íŠ¸ í™˜ê²½ì˜ ê±°ë²„ë„ŒìŠ¤ ìë™í™”</li>
                    <li><strong>ê³„ì •ë³„ ì—­í•  ë¶„ë¦¬ (RBAC)</strong>: ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ êµ¬í˜„</li>
                    <li><strong>í†µí•© ë¹Œë§</strong>: ë¹„ìš© ê°€ì‹œì„± ë° ì˜ˆì‚° ê´€ë¦¬</li>
                </ul>

                <div class="success-box">
                    <strong>ëª¨ë²” ì‚¬ë¡€:</strong> í™˜ê²½ë³„(Dev/Stage/Prod), íŒ€ë³„, í”„ë¡œì íŠ¸ë³„ë¡œ AWS ê³„ì •ì„ ë¶„ë¦¬í•˜ì—¬ ë³´ì•ˆ ê²½ê³„ë¥¼ ëª…í™•íˆ í•©ë‹ˆë‹¤.
                </div>
            </section>

            <!-- Section 3: ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ -->
            <section id="network">
                <h2>3. ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ì•„í‚¤í…ì³</h2>
                
                <h3>VPC ì„¤ê³„ íŒ¨í„´</h3>
                <div class="architecture-diagram">Internet Gateway / NAT Gateway
         â†“
[Public Subnet - Tier 1]
  - Application Load Balancer (ALB)
  - NAT Gateway
  - Bastion Host (Session Manager ê¶Œì¥)
         â†“
[Private Subnet - Tier 2]
  - Application Servers (EC2, ECS, EKS)
  - Lambda Functions
  - API Gateway
         â†“
[Isolated Subnet - Tier 3]
  - RDS Databases
  - ElastiCache
  - DocumentDB</div>

                <h3>í•µì‹¬ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ êµ¬ì„±ìš”ì†Œ</h3>
                
                <h4>AWS Network Firewall</h4>
                <ul>
                    <li>ìƒíƒœ ì €ì¥(Stateful) ë°©í™”ë²½ ê·œì¹™ ì—”ì§„</li>
                    <li>ì¹¨ì… íƒì§€ ë° ë°©ì§€ ì‹œìŠ¤í…œ (IDS/IPS)</li>
                    <li>ë„ë©”ì¸ ê¸°ë°˜ í•„í„°ë§ (ì•…ì„± ë„ë©”ì¸ ì°¨ë‹¨)</li>
                    <li>Suricata í˜¸í™˜ ê·œì¹™ ì§€ì›</li>
                </ul>

                <h4>Security Groups vs NACLs</h4>
                <table>
                    <thead>
                        <tr>
                            <th>íŠ¹ì„±</th>
                            <th>Security Groups</th>
                            <th>Network ACLs</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ì‘ë™ ê³„ì¸µ</td>
                            <td>ì¸ìŠ¤í„´ìŠ¤ ë ˆë²¨</td>
                            <td>ì„œë¸Œë„· ë ˆë²¨</td>
                        </tr>
                        <tr>
                            <td>ìƒíƒœ</td>
                            <td>Stateful (ìƒíƒœ ì €ì¥)</td>
                            <td>Stateless (ìƒíƒœ ë¹„ì €ì¥)</td>
                        </tr>
                        <tr>
                            <td>ê·œì¹™ íƒ€ì…</td>
                            <td>í—ˆìš© ê·œì¹™ë§Œ</td>
                            <td>í—ˆìš© ë° ê±°ë¶€ ê·œì¹™</td>
                        </tr>
                        <tr>
                            <td>í‰ê°€ ìˆœì„œ</td>
                            <td>ëª¨ë“  ê·œì¹™ í‰ê°€</td>
                            <td>ë²ˆí˜¸ ìˆœì„œëŒ€ë¡œ í‰ê°€</td>
                        </tr>
                    </tbody>
                </table>

                <h4>VPC Flow Logs</h4>
                <div class="code-block">
# VPC Flow Logs êµ¬ì„± ì˜ˆì‹œ
resource "aws_flow_log" "main" {
  log_destination      = aws_s3_bucket.flow_logs.arn
  log_destination_type = "s3"
  traffic_type         = "ALL"
  vpc_id               = aws_vpc.main.id

  tags = {
    Name        = "vpc-flow-logs"
    Environment = "production"
  }
}</div>
            </section>

            <!-- Section 4: ë°ì´í„° ë³´í˜¸ -->
            <section id="data">
                <h2>4. ë°ì´í„° ë³´í˜¸</h2>
                
                <h3>ì•”í˜¸í™” ì „ëµ</h3>
                
                <h4>ì „ì†¡ ì¤‘ ì•”í˜¸í™” (Encryption in Transit)</h4>
                <ul>
                    <li><strong>TLS 1.2 ì´ìƒ ê°•ì œ</strong>: ëª¨ë“  ë°ì´í„° ì „ì†¡ ì‹œ TLS í”„ë¡œí† ì½œ ì‚¬ìš©</li>
                    <li><strong>AWS Certificate Manager (ACM)</strong>: SSL/TLS ì¸ì¦ì„œ ìë™ ê´€ë¦¬</li>
                    <li><strong>VPN / Direct Connect</strong>: ì˜¨í”„ë ˆë¯¸ìŠ¤ì™€ì˜ ì•ˆì „í•œ ì—°ê²°</li>
                    <li><strong>PrivateLink</strong>: AWS ì„œë¹„ìŠ¤ì— ëŒ€í•œ í”„ë¼ì´ë¹— ì—°ê²°</li>
                </ul>

                <h4>ì €ì¥ ë°ì´í„° ì•”í˜¸í™” (Encryption at Rest)</h4>
                <ul>
                    <li><strong>AWS KMS (Key Management Service)</strong>: ì¤‘ì•™ ì§‘ì¤‘ì‹ í‚¤ ê´€ë¦¬</li>
                    <li><strong>Customer Managed Keys (CMK)</strong>: ê³ ê° ê´€ë¦¬í˜• í‚¤ ì‚¬ìš©</li>
                    <li><strong>ìë™ í‚¤ ë¡œí…Œì´ì…˜</strong>: ì—° 1íšŒ ìë™ í‚¤ êµì²´</li>
                    <li><strong>CloudHSM</strong>: FIPS 140-2 Level 3 ì¤€ìˆ˜ê°€ í•„ìš”í•œ ê²½ìš°</li>
                </ul>

                <h3>ë°ì´í„° ë¶„ë¥˜ ë° ë³´í˜¸ ìˆ˜ì¤€</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ë¶„ë¥˜</th>
                            <th>ì•”í˜¸í™”</th>
                            <th>ì ‘ê·¼ ì œì–´</th>
                            <th>ë¡œê¹…</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Public</td>
                            <td>ì„ íƒ ì‚¬í•­</td>
                            <td>ê³µê°œ ì½ê¸°</td>
                            <td>ê¸°ë³¸</td>
                        </tr>
                        <tr>
                            <td>Internal</td>
                            <td>SSE (ì„œë²„ ì¸¡ ì•”í˜¸í™”)</td>
                            <td>ì¡°ì§ ë‚´ë¶€ë§Œ</td>
                            <td>ê¸°ë³¸</td>
                        </tr>
                        <tr>
                            <td>Confidential</td>
                            <td>CMK + ì „ì†¡ ì¤‘ ì•”í˜¸í™”</td>
                            <td>ìŠ¹ì¸ëœ íŒ€ë§Œ</td>
                            <td>ìƒì„¸ ë¡œê¹…</td>
                        </tr>
                        <tr>
                            <td>Restricted</td>
                            <td>CMK + VPC Endpoint</td>
                            <td>ìµœì†Œ ê¶Œí•œ + MFA</td>
                            <td>ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</td>
                        </tr>
                    </tbody>
                </table>

                <div class="warning-box">
                    <strong>ì¤‘ìš”:</strong> S3 ë²„í‚·ì˜ ê²½ìš° ê¸°ë³¸ ì•”í˜¸í™”ë¥¼ í™œì„±í™”í•˜ê³ , ê³µê°œ ì•¡ì„¸ìŠ¤ë¥¼ ì°¨ë‹¨í•˜ëŠ” ê²ƒì´ í•„ìˆ˜ì…ë‹ˆë‹¤.
                </div>

                <h3>S3 ë³´ì•ˆ êµ¬ì„± ì˜ˆì‹œ</h3>
                <div class="code-block">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "DenyUnencryptedObjectUploads",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::my-secure-bucket/*",
      "Condition": {
        "StringNotEquals": {
          "s3:x-amz-server-side-encryption": "aws:kms"
        }
      }
    },
    {
      "Sid": "DenyInsecureTransport",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:*",
      "Resource": [
        "arn:aws:s3:::my-secure-bucket",
        "arn:aws:s3:::my-secure-bucket/*"
      ],
      "Condition": {
        "Bool": {
          "aws:SecureTransport": "false"
        }
      }
    }
  ]
}</div>
            </section>

            <!-- Section 5: IAM -->
            <section id="iam">
                <h2>5. ì‹ë³„ ë° ì ‘ê·¼ ê´€ë¦¬ (IAM)</h2>
                
                <h3>IAM ëª¨ë²” ì‚¬ë¡€</h3>
                
                <div class="success-box">
                    <strong>í•µì‹¬ ì›ì¹™:</strong>
                    <ul style="margin-top: 10px;">
                        <li>ë£¨íŠ¸ ê³„ì • ì‚¬ìš© ê¸ˆì§€ (MFA í™œì„±í™” í›„ ì ê¸ˆ)</li>
                        <li>ê°œë³„ ì‚¬ìš©ìì—ê²Œ ê³ ìœ  ìê²© ì¦ëª… ë¶€ì—¬</li>
                        <li>ê·¸ë£¹ì„ í†µí•œ ê¶Œí•œ ê´€ë¦¬</li>
                        <li>ìµœì†Œ ê¶Œí•œ ì›ì¹™ ì ìš©</li>
                        <li>ì •ê¸°ì ì¸ ê¶Œí•œ ê²€í†  ë° ê°ì‚¬</li>
                    </ul>
                </div>

                <h3>ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC) ì •ì±… ì˜ˆì‹œ</h3>
                <div class="code-block">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AllowS3ReadWrite",
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:ListBucket"
      ],
      "Resource": [
        "arn:aws:s3:::my-app-bucket",
        "arn:aws:s3:::my-app-bucket/*"
      ],
      "Condition": {
        "StringEquals": {
          "aws:PrincipalOrgID": "o-xxxxxxxxx"
        },
        "IpAddress": {
          "aws:SourceIp": [
            "10.0.0.0/8",
            "172.16.0.0/12"
          ]
        }
      }
    },
    {
      "Sid": "DenyDeleteActions",
      "Effect": "Deny",
      "Action": [
        "s3:DeleteObject",
        "s3:DeleteBucket"
      ],
      "Resource": "*"
    }
  ]
}</div>

                <h3>IAM ê¶Œì¥ êµ¬ì„±</h3>
                <ul>
                    <li><strong>MFA (Multi-Factor Authentication)</strong>: ëª¨ë“  ì‚¬ìš©ì ë° ë£¨íŠ¸ ê³„ì •ì— í•„ìˆ˜ í™œì„±í™”</li>
                    <li><strong>IAM Access Analyzer</strong>: ì™¸ë¶€ì™€ ê³µìœ ë˜ëŠ” ë¦¬ì†ŒìŠ¤ ìë™ íƒì§€</li>
                    <li><strong>ê¶Œí•œ ê²½ê³„ (Permission Boundaries)</strong>: ì‚¬ìš©ì ë° ì—­í• ì˜ ìµœëŒ€ ê¶Œí•œ ì œí•œ</li>
                    <li><strong>ì„œë¹„ìŠ¤ ì œì–´ ì •ì±… (SCP)</strong>: ì¡°ì§ ìˆ˜ì¤€ì˜ ê°€ë“œë ˆì¼</li>
                    <li><strong>ì„ì‹œ ìê²© ì¦ëª…</strong>: ì¥ê¸° ì•¡ì„¸ìŠ¤ í‚¤ ëŒ€ì‹  STS ì‚¬ìš©</li>
                </ul>

                <h3>AWS IAM Identity Center (AWS SSO)</h3>
                <div class="info-box">
                    <strong>ì¥ì :</strong>
                    <ul style="margin-top: 10px;">
                        <li>ì¤‘ì•™ ì§‘ì¤‘ì‹ ì‚¬ìš©ì ì ‘ê·¼ ê´€ë¦¬</li>
                        <li>SAML 2.0 ê¸°ë°˜ í˜ë”ë ˆì´ì…˜ (Azure AD, Okta ë“±)</li>
                        <li>ì„ì‹œ ìê²© ì¦ëª… ìë™ ë°œê¸‰</li>
                        <li>ë‹¤ì¤‘ ê³„ì • ì ‘ê·¼ì„ ìœ„í•œ í†µí•© í¬í„¸</li>
                        <li>ê¶Œí•œ ì„¸íŠ¸ë¥¼ í†µí•œ í‘œì¤€í™”ëœ ê¶Œí•œ ê´€ë¦¬</li>
                    </ul>
                </div>

                <h3>IAM ì •ì±… í…ŒìŠ¤íŠ¸ ë„êµ¬</h3>
                <ul>
                    <li><strong>IAM Policy Simulator</strong>: ì •ì±… íš¨ê³¼ ì‚¬ì „ í…ŒìŠ¤íŠ¸</li>
                    <li><strong>Access Advisor</strong>: ë§ˆì§€ë§‰ ì‚¬ìš© ì‹œê°„ ê¸°ë°˜ ê¶Œí•œ ì •ë¦¬</li>
                    <li><strong>CloudTrail</strong>: ì‹¤ì œ API í˜¸ì¶œ ê¸°ë¡ ë¶„ì„</li>
                </ul>
            </section>

            <!-- Section 6: ìœ„í˜‘ íƒì§€ ë° ëŒ€ì‘ -->
            <section id="detection">
                <h2>6. ìœ„í˜‘ íƒì§€ ë° ëŒ€ì‘</h2>
                
                <h3>ë³´ì•ˆ ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ</h3>
                
                <h4>Amazon GuardDuty</h4>
                <ul>
                    <li><strong>ì§€ëŠ¥í˜• ìœ„í˜‘ íƒì§€</strong>: ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ì´ìƒ í–‰ìœ„ íƒì§€</li>
                    <li><strong>ë°ì´í„° ì†ŒìŠ¤</strong>: VPC Flow Logs, CloudTrail, DNS ë¡œê·¸</li>
                    <li><strong>ìœ„í˜‘ ì¸í…”ë¦¬ì „ìŠ¤</strong>: AWS ë° ì™¸ë¶€ ìœ„í˜‘ ë°ì´í„°ë² ì´ìŠ¤ í™œìš©</li>
                    <li><strong>ì£¼ìš” íƒì§€ í•­ëª©</strong>:
                        <ul>
                            <li>ë¹„ì •ìƒì ì¸ API í˜¸ì¶œ</li>
                            <li>ì•”í˜¸í™”í ì±„êµ´ í™œë™</li>
                            <li>ì•…ì„± IP í†µì‹ </li>
                            <li>ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²© (Brute Force)</li>
                        </ul>
                    </li>
                </ul>

                <h4>AWS Security Hub</h4>
                <ul>
                    <li><strong>í†µí•© ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ</strong>: ëª¨ë“  ë³´ì•ˆ ë„êµ¬ì˜ ê²°ê³¼ ì§‘ê³„</li>
                    <li><strong>ìë™í™”ëœ ì»´í”Œë¼ì´ì–¸ìŠ¤ ì ê²€</strong>: CIS, PCI-DSS, AWS FSBP</li>
                    <li><strong>ë³´ì•ˆ ì ìˆ˜</strong>: ì „ì²´ ë³´ì•ˆ íƒœì„¸ì˜ ì •ëŸ‰ì  í‰ê°€</li>
                    <li><strong>í†µí•© ì„œë¹„ìŠ¤</strong>: GuardDuty, Inspector, Macie, IAM Access Analyzer ë“±</li>
                </ul>

                <h4>Amazon Detective</h4>
                <ul>
                    <li><strong>ë³´ì•ˆ ì‚¬ê³  ì¡°ì‚¬</strong>: ê·¼ë³¸ ì›ì¸ ë¶„ì„</li>
                    <li><strong>ì‹œê°í™”ëœ ê·¸ë˜í”„</strong>: ë¦¬ì†ŒìŠ¤ ê°„ ê´€ê³„ ë° í™œë™ íŒ¨í„´</li>
                    <li><strong>ê¸°ê³„ í•™ìŠµ ë¶„ì„</strong>: ì •ìƒ ê¸°ì¤€ì„  ëŒ€ë¹„ ì´ìƒ í–‰ìœ„ ì‹ë³„</li>
                </ul>

                <h3>í†µí•© SIEM ì•„í‚¤í…ì³</h3>
                <div class="architecture-diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CloudTrail   â”‚â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ GuardDuty    â”‚â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Security Hub â”‚â”€â”€â”¼â”€â”€â”€â”€â†’â”‚ EventBridgeâ”‚â”€â”€â”€â”€â†’â”‚ Lambda â”‚â”€â”€â”€â”€â†’â”‚ SIEM/SOAR    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ (Splunk/ELK) â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ AWS Config   â”‚â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ Macie        â”‚â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

                <h3>ìë™í™”ëœ ë³´ì•ˆ ì‘ë‹µ ì›Œí¬í”Œë¡œìš°</h3>
                <div class="code-block"># EventBridge ê·œì¹™ ì˜ˆì‹œ (Terraform)
resource "aws_cloudwatch_event_rule" "guardduty_findings" {
  name        = "guardduty-high-severity"
  description = "Trigger on high severity GuardDuty findings"

  event_pattern = jsonencode({
    source      = ["aws.guardduty"]
    detail-type = ["GuardDuty Finding"]
    detail = {
      severity = [7, 8, 9]  # High and Critical
    }
  })
}

resource "aws_cloudwatch_event_target" "lambda" {
  rule      = aws_cloudwatch_event_rule.guardduty_findings.name
  target_id = "SendToLambda"
  arn       = aws_lambda_function.security_response.arn
}</div>

                <div class="warning-box">
                    <strong>ê¶Œì¥ ì‚¬í•­:</strong> GuardDutyì™€ Security HubëŠ” ëª¨ë“  ë¦¬ì „ì—ì„œ í™œì„±í™”í•˜ê³ , ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬ë¥¼ ìœ„í•´ delegated administratorë¥¼ ì„¤ì •í•˜ì„¸ìš”.
                </div>
            </section>

            <!-- Section 7: ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ -->
            <section id="application">
                <h2>7. ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ</h2>
                
                <h3>AWS WAF (Web Application Firewall)</h3>
                
                <h4>í•µì‹¬ WAF ê·œì¹™ ì„¸íŠ¸</h4>
                <table>
                    <thead>
                        <tr>
                            <th>ê·œì¹™ ìœ í˜•</th>
                            <th>ì„¤ëª…</th>
                            <th>ìš°ì„ ìˆœìœ„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Rate Limiting</td>
                            <td>IPë‹¹ ìš”ì²­ ìˆ˜ ì œí•œ (DDoS ë°©ì–´)</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>SQL Injection</td>
                            <td>SQL ì¸ì ì…˜ ê³µê²© íŒ¨í„´ ì°¨ë‹¨</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>XSS (Cross-Site Scripting)</td>
                            <td>í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìŠ¤í¬ë¦½íŒ… ë°©ì–´</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>Geo Blocking</td>
                            <td>íŠ¹ì • êµ­ê°€/ì§€ì—­ ì°¨ë‹¨</td>
                            <td>ì¤‘ê°„</td>
                        </tr>
                        <tr>
                            <td>Bot Control</td>
                            <td>ì•…ì„± ë´‡ íƒì§€ ë° ê´€ë¦¬</td>
                            <td>ì¤‘ê°„</td>
                        </tr>
                        <tr>
                            <td>IP Reputation</td>
                            <td>ì•Œë ¤ì§„ ì•…ì„± IP ì°¨ë‹¨</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                    </tbody>
                </table>

                <h4>AWS Managed Rules í™œìš©</h4>
                <div class="code-block"># WAF v2 êµ¬ì„± ì˜ˆì‹œ (Terraform)
resource "aws_wafv2_web_acl" "main" {
  name  = "web-acl-production"
  scope = "REGIONAL"

  default_action {
    allow {}
  }

  # Core Rule Set (CRS)
  rule {
    name     = "AWS-AWSManagedRulesCommonRuleSet"
    priority = 1

    override_action {
      none {}
    }

    statement {
      managed_rule_group_statement {
        vendor_name = "AWS"
        name        = "AWSManagedRulesCommonRuleSet"
      }
    }

    visibility_config {
      cloudwatch_metrics_enabled = true
      metric_name                = "AWSManagedRulesCommonRuleSetMetric"
      sampled_requests_enabled   = true
    }
  }

  # Rate Limiting
  rule {
    name     = "RateLimitRule"
    priority = 2

    action {
      block {}
    }

    statement {
      rate_based_statement {
        limit              = 2000
        aggregate_key_type = "IP"
      }
    }

    visibility_config {
      cloudwatch_metrics_enabled = true
      metric_name                = "RateLimitMetric"
      sampled_requests_enabled   = true
    }
  }
}</div>

                <h3>AWS Shield</h3>
                <ul>
                    <li><strong>Shield Standard</strong>: ëª¨ë“  AWS ê³ ê°ì—ê²Œ ìë™ ì œê³µë˜ëŠ” L3/L4 DDoS ë°©ì–´</li>
                    <li><strong>Shield Advanced</strong>:
                        <ul>
                            <li>ê³ ê¸‰ DDoS ë°©ì–´ (L7 í¬í•¨)</li>
                            <li>24/7 DDoS Response Team (DRT) ì§€ì›</li>
                            <li>ë¹„ìš© ë³´í˜¸ (DDoS ê³µê²© ì‹œ ìŠ¤ì¼€ì¼ë§ ë¹„ìš© í™˜ë¶ˆ)</li>
                            <li>ì‹¤ì‹œê°„ ê³µê²© ì•Œë¦¼ ë° ìƒì„¸ ë¦¬í¬íŠ¸</li>
                        </ul>
                    </li>
                </ul>

                <h3>ì‹œí¬ë¦¿ ê´€ë¦¬ (Secrets Management)</h3>
                
                <h4>AWS Secrets Manager</h4>
                <ul>
                    <li>ë°ì´í„°ë² ì´ìŠ¤ ìê²© ì¦ëª… ìë™ ë¡œí…Œì´ì…˜</li>
                    <li>API í‚¤, OAuth í† í° ë“± ì•ˆì „í•œ ì €ì¥</li>
                    <li>ì„¸ë°€í•œ ì•¡ì„¸ìŠ¤ ì œì–´ (IAM ì •ì±…)</li>
                    <li>ì•”í˜¸í™” ë° ê°ì‚¬ ë¡œê¹…</li>
                </ul>

                <h4>Systems Manager Parameter Store</h4>
                <ul>
                    <li>ê³„ì¸µì  íŒŒë¼ë¯¸í„° êµ¬ì¡°</li>
                    <li>ë¬´ë£Œ í‹°ì–´ ì œê³µ (í‘œì¤€ íŒŒë¼ë¯¸í„°)</li>
                    <li>KMS ì•”í˜¸í™” ì§€ì›</li>
                    <li>ë²„ì „ ê´€ë¦¬</li>
                </ul>

                <div class="warning-box">
                    <strong>ì ˆëŒ€ ê¸ˆì§€:</strong> 
                    <ul style="margin-top: 10px;">
                        <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì— ìê²© ì¦ëª… í•˜ë“œì½”ë”©</li>
                        <li>í™˜ê²½ ë³€ìˆ˜ì— í‰ë¬¸ìœ¼ë¡œ ì €ì¥</li>
                        <li>Git ì €ì¥ì†Œì— ì‹œí¬ë¦¿ ì»¤ë°‹</li>
                        <li>ì¥ê¸° ì•¡ì„¸ìŠ¤ í‚¤ ì‚¬ìš© (IAM Role ì‚¬ìš© ê¶Œì¥)</li>
                    </ul>
                </div>

                <h3>ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€</h3>
                <div class="code-block"># Secrets Manager ì‚¬ìš© ì˜ˆì‹œ (Python)
import boto3
import json

def get_secret():
    secret_name = "prod/database/credentials"
    region_name = "us-east-1"

    session = boto3.session.Session()
    client = session.client(
        service_name='secretsmanager',
        region_name=region_name
    )

    try:
        get_secret_value_response = client.get_secret_value(
            SecretId=secret_name
        )
    except ClientError as e:
        raise e

    secret = json.loads(get_secret_value_response['SecretString'])
    return secret

# ì‚¬ìš©
db_credentials = get_secret()
username = db_credentials['username']
password = db_credentials['password']</div>
            </section>

            <!-- Section 8: ì»´í”Œë¼ì´ì–¸ìŠ¤ ë° ê±°ë²„ë„ŒìŠ¤ -->
            <section id="compliance">
                <h2>8. ì»´í”Œë¼ì´ì–¸ìŠ¤ ë° ê±°ë²„ë„ŒìŠ¤</h2>
                
                <h3>AWS Config</h3>
                
                <h4>í•µì‹¬ Config ê·œì¹™</h4>
                <table>
                    <thead>
                        <tr>
                            <th>ê·œì¹™</th>
                            <th>ì ê²€ ë‚´ìš©</th>
                            <th>ì‹¬ê°ë„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>encrypted-volumes</td>
                            <td>EBS ë³¼ë¥¨ ì•”í˜¸í™” ì—¬ë¶€</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>s3-bucket-public-read-prohibited</td>
                            <td>S3 ë²„í‚· ê³µê°œ ì½ê¸° ì°¨ë‹¨</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>rds-storage-encrypted</td>
                            <td>RDS ì¸ìŠ¤í„´ìŠ¤ ì•”í˜¸í™”</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>iam-user-unused-credentials-check</td>
                            <td>ë¯¸ì‚¬ìš© IAM ìê²© ì¦ëª…</td>
                            <td>ì¤‘ê°„</td>
                        </tr>
                        <tr>
                            <td>restricted-ssh</td>
                            <td>SSH í¬íŠ¸(22) ì „ì²´ ê°œë°© ì—¬ë¶€</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>cloudtrail-enabled</td>
                            <td>CloudTrail í™œì„±í™” ì—¬ë¶€</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                    </tbody>
                </table>

                <h4>ìë™ ì¤€ìˆ˜ ì ê²€ ë° êµì •</h4>
                <div class="architecture-diagram">AWS Config Rule ìœ„ë°˜ ê°ì§€
         â†“
Systems Manager Automation
         â†“
ìë™ êµì • ì‘ì—… ì‹¤í–‰
    (ì˜ˆ: ê³µê°œ S3 ë²„í‚· ë¹„ê³µê°œë¡œ ë³€ê²½)
         â†“
SNS ì•Œë¦¼ ë°œì†¡
         â†“
Security Hubì— ê²°ê³¼ ì „ì†¡</div>

                <h3>ê°ì‚¬ ë° ë¡œê¹…</h3>
                
                <h4>AWS CloudTrail êµ¬ì„±</h4>
                <ul>
                    <li><strong>ë‹¤ì¤‘ ë¦¬ì „ ì¶”ì </strong>: ëª¨ë“  ë¦¬ì „ì˜ ì´ë²¤íŠ¸ ê¸°ë¡</li>
                    <li><strong>ì¡°ì§ ì¶”ì </strong>: Organizationsì˜ ëª¨ë“  ê³„ì • ë¡œê·¸ ì¤‘ì•™ ì§‘ì¤‘</li>
                    <li><strong>ë¡œê·¸ íŒŒì¼ ë¬´ê²°ì„± ê²€ì¦</strong>: ë¡œê·¸ ë³€ì¡° íƒì§€</li>
                    <li><strong>S3 ë²„í‚· ë³´ì•ˆ</strong>:
                        <ul>
                            <li>ë²„í‚· ì•”í˜¸í™” (SSE-KMS)</li>
                            <li>MFA Delete í™œì„±í™”</li>
                            <li>ë²„í‚· ì •ì±…ìœ¼ë¡œ ì‚­ì œ ë°©ì§€</li>
                            <li>ê°ì²´ ì ê¸ˆ (WORM)</li>
                        </ul>
                    </li>
                </ul>

                <h4>CloudTrail S3 ë²„í‚· ì •ì±… ì˜ˆì‹œ</h4>
                <div class="code-block">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AWSCloudTrailAclCheck",
      "Effect": "Allow",
      "Principal": {
        "Service": "cloudtrail.amazonaws.com"
      },
      "Action": "s3:GetBucketAcl",
      "Resource": "arn:aws:s3:::my-cloudtrail-bucket"
    },
    {
      "Sid": "AWSCloudTrailWrite",
      "Effect": "Allow",
      "Principal": {
        "Service": "cloudtrail.amazonaws.com"
      },
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::my-cloudtrail-bucket/*",
      "Condition": {
        "StringEquals": {
          "s3:x-amz-acl": "bucket-owner-full-control"
        }
      }
    },
    {
      "Sid": "DenyUnencryptedObjectUploads",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::my-cloudtrail-bucket/*",
      "Condition": {
        "StringNotEquals": {
          "s3:x-amz-server-side-encryption": "aws:kms"
        }
      }
    },
    {
      "Sid": "DenyInsecureTransport",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:*",
      "Resource": [
        "arn:aws:s3:::my-cloudtrail-bucket",
        "arn:aws:s3:::my-cloudtrail-bucket/*"
      ],
      "Condition": {
        "Bool": {
          "aws:SecureTransport": "false"
        }
      }
    }
  ]
}</div>

                <h3>ì»´í”Œë¼ì´ì–¸ìŠ¤ í”„ë ˆì„ì›Œí¬</h3>
                <ul>
                    <li><strong>CIS AWS Foundations Benchmark</strong>: ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€ ì²´í¬ë¦¬ìŠ¤íŠ¸</li>
                    <li><strong>PCI-DSS</strong>: ì¹´ë“œ ê²°ì œ ë°ì´í„° ë³´ì•ˆ í‘œì¤€</li>
                    <li><strong>HIPAA</strong>: ì˜ë£Œ ì •ë³´ ë³´í˜¸ ê·œì •</li>
                    <li><strong>GDPR</strong>: EU ê°œì¸ì •ë³´ ë³´í˜¸ ê·œì •</li>
                    <li><strong>SOC 2</strong>: ì„œë¹„ìŠ¤ ì¡°ì§ í†µì œ ë³´ê³ ì„œ</li>
                </ul>

                <div class="info-box">
                    <strong>AWS Artifact:</strong> AWSì˜ ì»´í”Œë¼ì´ì–¸ìŠ¤ ë³´ê³ ì„œ ë° ê³„ì•½ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆëŠ” ì…€í”„ ì„œë¹„ìŠ¤ í¬í„¸ì…ë‹ˆë‹¤. ISO ì¸ì¦ì„œ, SOC ë³´ê³ ì„œ ë“±ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>
            </section>

            <!-- Section 9: ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ -->
            <section id="incident">
                <h2>9. ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ í”Œë ˆì´ë¶</h2>
                
                <h3>ìë™í™”ëœ ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ ì›Œí¬í”Œë¡œìš°</h3>
                
                <h4>ì‹œë‚˜ë¦¬ì˜¤ 1: ì˜ì‹¬ìŠ¤ëŸ¬ìš´ IAM í™œë™ íƒì§€</h4>
                <div class="architecture-diagram">1. GuardDuty: UnauthorizedAccess:IAMUser/InstanceCredentialExfiltration
         â†“
2. EventBridge ê·œì¹™ íŠ¸ë¦¬ê±°
         â†“
3. Lambda í•¨ìˆ˜ ì‹¤í–‰
         â†“
4. ìë™ ëŒ€ì‘ ì‘ì—…:
   â”œâ”€ IAM ì‚¬ìš©ì/ì—­í•  ì •ì±… ê²©ë¦¬ (ê¶Œí•œ ì œê±°)
   â”œâ”€ ì•¡ì„¸ìŠ¤ í‚¤ ë¹„í™œì„±í™”
   â”œâ”€ SNS/PagerDuty ì•Œë¦¼
   â”œâ”€ JIRA í‹°ì¼“ ìë™ ìƒì„±
   â””â”€ ê´€ë ¨ EC2 ì¸ìŠ¤í„´ìŠ¤ ìŠ¤ëƒ…ìƒ· (í¬ë Œì‹)
         â†“
5. Security Hubì— ì¡°ì‚¬ ê²°ê³¼ ê¸°ë¡
         â†“
6. Detectiveë¡œ ìƒì„¸ ë¶„ì„</div>

                <h4>Lambda ìë™ ëŒ€ì‘ í•¨ìˆ˜ ì˜ˆì‹œ</h4>
                <div class="code-block">import boto3
import json

iam = boto3.client('iam')
sns = boto3.client('sns')

def lambda_handler(event, context):
    # GuardDuty ì´ë²¤íŠ¸ íŒŒì‹±
    finding = event['detail']
    severity = finding['severity']
    finding_type = finding['type']
    
    # ë†’ì€ ì‹¬ê°ë„ë§Œ ì²˜ë¦¬
    if severity >= 7:
        # ì˜í–¥ë°›ì€ IAM ì‚¬ìš©ì ì¶”ì¶œ
        if 'resource' in finding:
            resource = finding['resource']
            if resource['resourceType'] == 'AccessKey':
                access_key_id = resource['accessKeyDetails']['accessKeyId']
                user_name = resource['accessKeyDetails']['userName']
                
                # 1. ì•¡ì„¸ìŠ¤ í‚¤ ë¹„í™œì„±í™”
                try:
                    iam.update_access_key(
                        UserName=user_name,
                        AccessKeyId=access_key_id,
                        Status='Inactive'
                    )
                    print(f"Disabled access key: {access_key_id}")
                except Exception as e:
                    print(f"Error disabling key: {e}")
                
                # 2. ì‚¬ìš©ì ì •ì±… ê²©ë¦¬
                isolation_policy = {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Effect": "Deny",
                            "Action": "*",
                            "Resource": "*"
                        }
                    ]
                }
                
                try:
                    iam.put_user_policy(
                        UserName=user_name,
                        PolicyName='SecurityIncidentIsolation',
                        PolicyDocument=json.dumps(isolation_policy)
                    )
                    print(f"Isolated user: {user_name}")
                except Exception as e:
                    print(f"Error isolating user: {e}")
                
                # 3. SNS ì•Œë¦¼
                message = f"""
                SECURITY ALERT - High Severity Finding
                
                Type: {finding_type}
                Severity: {severity}
                User: {user_name}
                Access Key: {access_key_id}
                
                Automated Actions Taken:
                - Access key disabled
                - User permissions isolated
                - Incident ticket created
                
                Please investigate immediately.
                """
                
                sns.publish(
                    TopicArn='arn:aws:sns:us-east-1:123456789012:SecurityAlerts',
                    Subject='URGENT: Security Incident Detected',
                    Message=message
                )
    
    return {
        'statusCode': 200,
        'body': json.dumps('Incident response completed')
    }</div>

                <h3>ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ 5ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ë‹¨ê³„</th>
                            <th>í™œë™</th>
                            <th>ë„êµ¬</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1. íƒì§€</td>
                            <td>ë³´ì•ˆ ì´ë²¤íŠ¸ ì‹ë³„ ë° ë¶„ë¥˜</td>
                            <td>GuardDuty, Security Hub, CloudWatch</td>
                        </tr>
                        <tr>
                            <td>2. ê²©ë¦¬</td>
                            <td>ì˜í–¥ë°›ì€ ë¦¬ì†ŒìŠ¤ ë¶„ë¦¬</td>
                            <td>Security Groups, IAM, Lambda</td>
                        </tr>
                        <tr>
                            <td>3. ì¡°ì‚¬</td>
                            <td>ê·¼ë³¸ ì›ì¸ ë° ì˜í–¥ ë²”ìœ„ ë¶„ì„</td>
                            <td>Detective, CloudTrail, VPC Flow Logs</td>
                        </tr>
                        <tr>
                            <td>4. ë³µêµ¬</td>
                            <td>ì•ˆì „í•œ ìƒíƒœë¡œ ë³µì›</td>
                            <td>AWS Backup, Snapshots, CloudFormation</td>
                        </tr>
                        <tr>
                            <td>5. ì‚¬í›„ ê²€í† </td>
                            <td>êµí›ˆ ë„ì¶œ ë° í”„ë¡œì„¸ìŠ¤ ê°œì„ </td>
                            <td>ë¬¸ì„œí™”, í”Œë ˆì´ë¶ ì—…ë°ì´íŠ¸</td>
                        </tr>
                    </tbody>
                </table>

                <h3>í¬ë Œì‹ ì¤€ë¹„</h3>
                <ul>
                    <li><strong>ìŠ¤ëƒ…ìƒ· ìë™í™”</strong>: ì˜ì‹¬ í™œë™ ê°ì§€ ì‹œ EBS ìŠ¤ëƒ…ìƒ· ìë™ ìƒì„±</li>
                    <li><strong>ë¡œê·¸ ë³´ì¡´</strong>: CloudTrail ë¡œê·¸ ìµœì†Œ 1ë…„ ì´ìƒ ë³´ê´€</li>
                    <li><strong>ë©”ëª¨ë¦¬ ë¤í”„</strong>: SSM Run Commandë¥¼ í†µí•œ ì›ê²© ë©”ëª¨ë¦¬ ìˆ˜ì§‘</li>
                    <li><strong>ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½</strong>: VPC Traffic Mirroring í™œìš©</li>
                </ul>

                <div class="warning-box">
                    <strong>ì¤‘ìš”:</strong> ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ í”Œë ˆì´ë¶ì€ ì •ê¸°ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê³  ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤. ìµœì†Œ ë¶„ê¸°ë³„ 1íšŒ ëª¨ì˜ í›ˆë ¨ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
                </div>
            </section>

            <!-- Section 10: ì„œë²„ë¦¬ìŠ¤ ë³´ì•ˆ -->
            <section id="serverless">
                <h2>10. ì„œë²„ë¦¬ìŠ¤ ë³´ì•ˆ</h2>
                
                <h3>AWS Lambda ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€</h3>
                
                <h4>1. ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬</h4>
                <ul>
                    <li><strong>VPC ë‚´ Lambda ì‹¤í–‰</strong>: ë¯¼ê°í•œ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ì‹œ</li>
                    <li><strong>Private Subnet ë°°ì¹˜</strong>: NAT Gatewayë¥¼ í†µí•œ ì¸í„°ë„· ì ‘ê·¼</li>
                    <li><strong>Security Group ìµœì†Œí™”</strong>: í•„ìš”í•œ í¬íŠ¸ë§Œ ê°œë°©</li>
                    <li><strong>VPC Endpoints</strong>: AWS ì„œë¹„ìŠ¤ ì ‘ê·¼ ì‹œ í”„ë¼ì´ë¹— ì—°ê²°</li>
                </ul>

                <h4>2. ì½”ë“œ ë³´ì•ˆ</h4>
                <div class="code-block"># Lambda í•¨ìˆ˜ ë³´ì•ˆ êµ¬ì„± ì˜ˆì‹œ (Python)
import os
import boto3
from aws_lambda_powertools import Logger, Tracer
from aws_lambda_powertools.utilities import parameters

logger = Logger()
tracer = Tracer()

# Secrets Managerì—ì„œ ì‹œí¬ë¦¿ ê°€ì ¸ì˜¤ê¸°
def get_database_credentials():
    secret_name = os.environ['DB_SECRET_NAME']
    return parameters.get_secret(secret_name)

@tracer.capture_lambda_handler
@logger.inject_lambda_context
def lambda_handler(event, context):
    # ì…ë ¥ ê²€ì¦
    if 'user_id' not in event:
        logger.error("Missing required parameter: user_id")
        return {
            'statusCode': 400,
            'body': 'Bad Request'
        }
    
    user_id = event['user_id']
    
    # SQL ì¸ì ì…˜ ë°©ì§€: íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬ ì‚¬ìš©
    # XSS ë°©ì§€: ì¶œë ¥ ì¸ì½”ë”©
    # ...
    
    logger.info(f"Processing request for user: {user_id}")
    
    return {
        'statusCode': 200,
        'body': 'Success'
    }</div>

                <h4>3. IAM ê¶Œí•œ ìµœì†Œí™”</h4>
                <div class="code-block"># Lambda ì‹¤í–‰ ì—­í•  (Terraform)
resource "aws_iam_role" "lambda_role" {
  name = "lambda-execution-role"

  assume_role_policy = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Action = "sts:AssumeRole"
        Effect = "Allow"
        Principal = {
          Service = "lambda.amazonaws.com"
        }
      }
    ]
  })
}

# ìµœì†Œ ê¶Œí•œ ì •ì±…
resource "aws_iam_role_policy" "lambda_policy" {
  name = "lambda-policy"
  role = aws_iam_role.lambda_role.id

  policy = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Effect = "Allow"
        Action = [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents"
        ]
        Resource = "arn:aws:logs:*:*:*"
      },
      {
        Effect = "Allow"
        Action = [
          "dynamodb:GetItem",
          "dynamodb:PutItem"
        ]
        Resource = "arn:aws:dynamodb:us-east-1:123456789012:table/MyTable"
      }
    ]
  })
}</div>

                <h4>4. í™˜ê²½ ë³€ìˆ˜ ì•”í˜¸í™”</h4>
                <ul>
                    <li>KMSë¥¼ ì‚¬ìš©í•œ í™˜ê²½ ë³€ìˆ˜ ì•”í˜¸í™”</li>
                    <li>Secrets Manager ë˜ëŠ” Parameter Store ì‚¬ìš© ê¶Œì¥</li>
                    <li>ëŸ°íƒ€ì„ ì‹œ ë³µí˜¸í™”</li>
                </ul>

                <h3>API Gateway ë³´ì•ˆ</h3>
                
                <h4>ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ê³„ì¸µ</h4>
                <div class="architecture-diagram">Client Request
      â†“
[1] AWS WAF (DDoS, SQL Injection ë°©ì–´)
      â†“
[2] API Gateway
      â”œâ”€ Resource Policy (IP ì œí•œ, VPC ì œí•œ)
      â”œâ”€ Usage Plans & API Keys (Rate Limiting)
      â””â”€ Authorizers
          â”œâ”€ Lambda Authorizer (ì»¤ìŠ¤í…€ ë¡œì§)
          â””â”€ Cognito User Pools (OAuth 2.0)
      â†“
[3] Backend (Lambda, ECS, HTTP)
      â†“
Response</div>

                <h4>API Gateway ë³´ì•ˆ ì„¤ì •</h4>
                <table>
                    <thead>
                        <tr>
                            <th>ë³´ì•ˆ ê¸°ëŠ¥</th>
                            <th>ì„¤ëª…</th>
                            <th>ì‚¬ìš© ì‚¬ë¡€</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Lambda Authorizer</td>
                            <td>ì»¤ìŠ¤í…€ ì¸ì¦ ë¡œì§ ì‹¤í–‰</td>
                            <td>JWT ê²€ì¦, ì™¸ë¶€ IdP í†µí•©</td>
                        </tr>
                        <tr>
                            <td>Cognito User Pools</td>
                            <td>ì™„ì „ ê´€ë¦¬í˜• ì‚¬ìš©ì ì¸ì¦</td>
                            <td>í‘œì¤€ OAuth 2.0/OIDC</td>
                        </tr>
                        <tr>
                            <td>IAM Authentication</td>
                            <td>AWS ìê²© ì¦ëª… ê¸°ë°˜</td>
                            <td>ë‚´ë¶€ ì„œë¹„ìŠ¤ ê°„ í†µì‹ </td>
                        </tr>
                        <tr>
                            <td>API Keys</td>
                            <td>ê°„ë‹¨í•œ í‚¤ ê¸°ë°˜ ì ‘ê·¼</td>
                            <td>íŒŒíŠ¸ë„ˆ API, ì‚¬ìš©ëŸ‰ ì¶”ì </td>
                        </tr>
                        <tr>
                            <td>Resource Policies</td>
                            <td>ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ ì ‘ê·¼ ì œì–´</td>
                            <td>VPC/IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸</td>
                        </tr>
                    </tbody>
                </table>

                <h4>API Gateway Lambda Authorizer ì˜ˆì‹œ</h4>
                <div class="code-block">import jwt
import os

def lambda_handler(event, context):
    token = event['authorizationToken']
    
    try:
        # JWT í† í° ê²€ì¦
        decoded = jwt.decode(
            token,
            os.environ['JWT_SECRET'],
            algorithms=['HS256']
        )
        
        # ì •ì±… ìƒì„±
        policy = generate_policy(
            decoded['sub'],  # principalId
            'Allow',
            event['methodArn']
        )
        
        # ì»¨í…ìŠ¤íŠ¸ì— ì‚¬ìš©ì ì •ë³´ ì¶”ê°€
        policy['context'] = {
            'userId': decoded['sub'],
            'email': decoded['email'],
            'role': decoded['role']
        }
        
        return policy
    
    except jwt.ExpiredSignatureError:
        raise Exception('Unauthorized: Token expired')
    except jwt.InvalidTokenError:
        raise Exception('Unauthorized: Invalid token')

def generate_policy(principal_id, effect, resource):
    return {
        'principalId': principal_id,
        'policyDocument': {
            'Version': '2012-10-17',
            'Statement': [
                {
                    'Action': 'execute-api:Invoke',
                    'Effect': effect,
                    'Resource': resource
                }
            ]
        }
    }</div>

                <h3>ì„œë²„ë¦¬ìŠ¤ ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
                <ul class="checklist">
                    <li>Lambda í•¨ìˆ˜ì— ìµœì†Œ ê¶Œí•œ IAM ì—­í•  í• ë‹¹</li>
                    <li>í™˜ê²½ ë³€ìˆ˜ ì•”í˜¸í™” í™œì„±í™”</li>
                    <li>VPC ë‚´ Lambda ë°°ì¹˜ (í•„ìš”ì‹œ)</li>
                    <li>Dead Letter Queue (DLQ) êµ¬ì„±</li>
                    <li>Reserved Concurrency ì„¤ì • (DoS ë°©ì§€)</li>
                    <li>X-Ray ì¶”ì  í™œì„±í™”</li>
                    <li>CloudWatch Logs ì•”í˜¸í™”</li>
                    <li>API Gatewayì— WAF ì—°ê²°</li>
                    <li>Rate Limiting ë° Throttling ì„¤ì •</li>
                    <li>CORS ì •ì±… ì—„ê²©íˆ êµ¬ì„±</li>
                </ul>
            </section>

            <!-- Section 11: ì»¨í…Œì´ë„ˆ ë³´ì•ˆ -->
            <section id="container">
                <h2>11. ì»¨í…Œì´ë„ˆ ë³´ì•ˆ</h2>
                
                <h3>Amazon EKS ë³´ì•ˆ ì•„í‚¤í…ì³</h3>
                
                <h4>ë‹¤ì¸µ ë³´ì•ˆ ê³„ì¸µ</h4>
                <div class="architecture-diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pod Security Standards (PSS)           â”‚
â”‚  - Baseline, Restricted Policies        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Network Policies (Calico/Cilium)       â”‚
â”‚  - Pod-to-Pod íŠ¸ë˜í”½ ì œì–´               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IRSA (IAM Roles for Service Accounts)  â”‚
â”‚  - Podë³„ ì„¸ë°€í•œ ê¶Œí•œ ê´€ë¦¬               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Secrets Management                      â”‚
â”‚  - External Secrets Operator            â”‚
â”‚  - AWS Secrets Manager í†µí•©             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Image Scanning (ECR)                    â”‚
â”‚  - ë¹Œë“œ ì‹œ ì·¨ì•½ì  ìŠ¤ìº”                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

                <h3>ì£¼ìš” ì»¨í…Œì´ë„ˆ ë³´ì•ˆ ë„êµ¬</h3>
                
                <h4>1. Amazon ECR Image Scanning</h4>
                <ul>
                    <li><strong>Basic Scanning</strong>: Clair ê¸°ë°˜ ì·¨ì•½ì  ìŠ¤ìº”</li>
                    <li><strong>Enhanced Scanning</strong>: Amazon Inspector í†µí•©, ì§€ì†ì  ìŠ¤ìº”</li>
                    <li><strong>ìŠ¤ìº” ì •ì±…</strong>: í‘¸ì‹œ ì‹œ ìë™ ìŠ¤ìº” ë˜ëŠ” ìŠ¤ì¼€ì¤„ ê¸°ë°˜</li>
                    <li><strong>CVE ë°ì´í„°ë² ì´ìŠ¤</strong>: ìµœì‹  ì·¨ì•½ì  ì •ë³´ ìë™ ì—…ë°ì´íŠ¸</li>
                </ul>

                <div class="code-block"># ECR ë¦¬í¬ì§€í† ë¦¬ ìƒì„± ë° ìŠ¤ìº” ì„¤ì • (Terraform)
resource "aws_ecr_repository" "app" {
  name                 = "my-application"
  image_tag_mutability = "IMMUTABLE"

  image_scanning_configuration {
    scan_on_push = true
  }

  encryption_configuration {
    encryption_type = "KMS"
    kms_key        = aws_kms_key.ecr.arn
  }
}

# ë¼ì´í”„ì‚¬ì´í´ ì •ì±… (ì˜¤ë˜ëœ ì´ë¯¸ì§€ ìë™ ì‚­ì œ)
resource "aws_ecr_lifecycle_policy" "app" {
  repository = aws_ecr_repository.app.name

  policy = jsonencode({
    rules = [
      {
        rulePriority = 1
        description  = "Keep last 10 images"
        selection = {
          tagStatus   = "any"
          countType   = "imageCountMoreThan"
          countNumber = 10
        }
        action = {
          type = "expire"
        }
      }
    ]
  })
}</div>

                <h4>2. Falco - ëŸ°íƒ€ì„ ë³´ì•ˆ ëª¨ë‹ˆí„°ë§</h4>
                <ul>
                    <li>ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ì½œ ëª¨ë‹ˆí„°ë§</li>
                    <li>ë¹„ì •ìƒ í–‰ìœ„ íƒì§€ (íŒŒì¼ ì ‘ê·¼, í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ë“±)</li>
                    <li>ì‚¬ì „ ì •ì˜ëœ ë³´ì•ˆ ê·œì¹™</li>
                    <li>Kubernetes ì´ë²¤íŠ¸ í†µí•©</li>
                </ul>

                <div class="code-block"># Falco ê·œì¹™ ì˜ˆì‹œ
- rule: Unauthorized Process in Container
  desc: Detect unexpected process in container
  condition: >
    spawned_process and 
    container and 
    not proc.name in (allowed_processes)
  output: >
    Unauthorized process started in container 
    (user=%user.name command=%proc.cmdline container=%container.name 
    image=%container.image.repository)
  priority: WARNING

- rule: Write below root
  desc: Attempt to write to root filesystem
  condition: >
    open_write and 
    container and 
    fd.name startswith /
  output: >
    Write attempt to root filesystem 
    (user=%user.name command=%proc.cmdline file=%fd.name)
  priority: ERROR</div>

                <h4>3. OPA/Gatekeeper - ì •ì±… ê¸°ë°˜ ê±°ë²„ë„ŒìŠ¤</h4>
                <ul>
                    <li>Admission Controllerë¥¼ í†µí•œ ì •ì±… ê°•ì œ</li>
                    <li>ì„ ì–¸ì  ì •ì±… ì •ì˜ (Rego ì–¸ì–´)</li>
                    <li>ë¦¬ì†ŒìŠ¤ ìƒì„± ì‹œ ìë™ ê²€ì¦</li>
                </ul>

                <div class="code-block"># Gatekeeper Constraint Template ì˜ˆì‹œ
apiVersion: templates.gatekeeper.sh/v1
kind: ConstraintTemplate
metadata:
  name: k8srequiredlabels
spec:
  crd:
    spec:
      names:
        kind: K8sRequiredLabels
      validation:
        openAPIV3Schema:
          type: object
          properties:
            labels:
              type: array
              items:
                type: string
  targets:
    - target: admission.k8s.gatekeeper.sh
      rego: |
        package k8srequiredlabels
        
        violation[{"msg": msg, "details": {"missing_labels": missing}}] {
          provided := {label | input.review.object.metadata.labels[label]}
          required := {label | label := input.parameters.labels[_]}
          missing := required - provided
          count(missing) > 0
          msg := sprintf("You must provide labels: %v", [missing])
        }

---
# Constraint ì ìš©
apiVersion: constraints.gatekeeper.sh/v1beta1
kind: K8sRequiredLabels
metadata:
  name: pod-must-have-labels
spec:
  match:
    kinds:
      - apiGroups: [""]
        kinds: ["Pod"]
  parameters:
    labels:
      - "app"
      - "environment"
      - "owner"</div>

                <h3>IRSA (IAM Roles for Service Accounts)</h3>
                <div class="code-block"># ServiceAccount ìƒì„±
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-app-sa
  namespace: production
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::123456789012:role/my-app-role

---
# Podì—ì„œ ServiceAccount ì‚¬ìš©
apiVersion: v1
kind: Pod
metadata:
  name: my-app
  namespace: production
spec:
  serviceAccountName: my-app-sa
  containers:
  - name: app
    image: my-app:latest
    # ì´ì œ PodëŠ” IAM ì—­í• ì˜ ê¶Œí•œì„ ìë™ìœ¼ë¡œ ì‚¬ìš©
    # AWS SDKê°€ ìë™ìœ¼ë¡œ ì„ì‹œ ìê²© ì¦ëª… íšë“</div>

                <h3>ì»¨í…Œì´ë„ˆ ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€</h3>
                <ul class="checklist">
                    <li>ìµœì†Œ ê¶Œí•œ ì›ì¹™ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ (non-root ì‚¬ìš©ì)</li>
                    <li>ì½ê¸° ì „ìš© ë£¨íŠ¸ íŒŒì¼ì‹œìŠ¤í…œ ì‚¬ìš©</li>
                    <li>ë¶ˆí•„ìš”í•œ Linux Capabilities ì œê±°</li>
                    <li>ë¦¬ì†ŒìŠ¤ ì œí•œ (CPU, Memory) ì„¤ì •</li>
                    <li>í”„ë¼ì´ë¹— ECR ë¦¬í¬ì§€í† ë¦¬ ì‚¬ìš©</li>
                    <li>ì´ë¯¸ì§€ ì„œëª… ë° ê²€ì¦ (Notary/Cosign)</li>
                    <li>Network Policiesë¡œ Pod ê°„ íŠ¸ë˜í”½ ì œí•œ</li>
                    <li>Pod Security Standards ì ìš©</li>
                    <li>ì •ê¸°ì ì¸ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸ ë° ì¬ë°°í¬</li>
                    <li>Secretsì„ í™˜ê²½ ë³€ìˆ˜ ëŒ€ì‹  íŒŒì¼ë¡œ ë§ˆìš´íŠ¸</li>
                </ul>

                <h3>ë³´ì•ˆ ê°•í™”ëœ Pod ëª…ì„¸ ì˜ˆì‹œ</h3>
                <div class="code-block">apiVersion: v1
kind: Pod
metadata:
  name: secure-pod
  labels:
    app: secure-app
spec:
  serviceAccountName: my-app-sa
  securityContext:
    runAsNonRoot: true
    runAsUser: 1000
    fsGroup: 2000
    seccompProfile:
      type: RuntimeDefault
  
  containers:
  - name: app
    image: 123456789012.dkr.ecr.us-east-1.amazonaws.com/my-app:v1.2.3
    
    securityContext:
      allowPrivilegeEscalation: false
      readOnlyRootFilesystem: true
      capabilities:
        drop:
          - ALL
    
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "200m"
    
    volumeMounts:
    - name: tmp
      mountPath: /tmp
    - name: secrets
      mountPath: /etc/secrets
      readOnly: true
  
  volumes:
  - name: tmp
    emptyDir: {}
  - name: secrets
    csi:
      driver: secrets-store.csi.k8s.io
      readOnly: true
      volumeAttributes:
        secretProviderClass: "aws-secrets"</div>
            </section>

            <!-- Section 12: ìë™í™” ë° IaC -->
            <section id="automation">
                <h2>12. ìë™í™” ë° Infrastructure as Code</h2>
                
                <h3>ë³´ì•ˆ ìë™í™”ì˜ ì¤‘ìš”ì„±</h3>
                <div class="info-box">
                    <strong>DevSecOps ì›ì¹™:</strong> ë³´ì•ˆì„ ê°œë°œ íŒŒì´í”„ë¼ì¸ì˜ ëª¨ë“  ë‹¨ê³„ì— í†µí•©í•˜ì—¬ "Shift Left" ì ‘ê·¼ ë°©ì‹ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
                </div>

                <h3>Terraform ë³´ì•ˆ ë² ì´ìŠ¤ë¼ì¸ ëª¨ë“ˆ</h3>
                <div class="code-block"># modules/security-baseline/main.tf
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

# GuardDuty í™œì„±í™”
resource "aws_guardduty_detector" "main" {
  enable                       = var.enable_guardduty
  finding_publishing_frequency = "FIFTEEN_MINUTES"
  
  datasources {
    s3_logs {
      enable = true
    }
    kubernetes {
      audit_logs {
        enable = true
      }
    }
    malware_protection {
      scan_ec2_instance_with_findings {
        ebs_volumes {
          enable = true
        }
      }
    }
  }

  tags = var.tags
}

# Security Hub í™œì„±í™”
resource "aws_securityhub_account" "main" {
  count = var.enable_security_hub ? 1 : 0
}

resource "aws_securityhub_standards_subscription" "cis" {
  count         = var.enable_security_hub ? 1 : 0
  depends_on    = [aws_securityhub_account.main]
  standards_arn = "arn:aws:securityhub:::ruleset/cis-aws-foundations-benchmark/v/1.2.0"
}

resource "aws_securityhub_standards_subscription" "aws_foundational" {
  count         = var.enable_security_hub ? 1 : 0
  depends_on    = [aws_securityhub_account.main]
  standards_arn = "arn:aws:securityhub:${data.aws_region.current.name}::standards/aws-foundational-security-best-practices/v/1.0.0"
}

# AWS Config í™œì„±í™”
resource "aws_config_configuration_recorder" "main" {
  name     = "security-config-recorder"
  role_arn = aws_iam_role.config.arn

  recording_group {
    all_supported = true
    include_global_resources = true
  }
}

resource "aws_config_delivery_channel" "main" {
  name           = "security-config-delivery"
  s3_bucket_name = aws_s3_bucket.config.bucket
  depends_on     = [aws_config_configuration_recorder.main]
}

resource "aws_config_configuration_recorder_status" "main" {
  name       = aws_config_configuration_recorder.main.name
  is_enabled = true
  depends_on = [aws_config_delivery_channel.main]
}

# CloudTrail ë©€í‹° ë¦¬ì „ ì¶”ì 
resource "aws_cloudtrail" "main" {
  name                          = var.cloudtrail_name
  s3_bucket_name                = aws_s3_bucket.cloudtrail.bucket
  include_global_service_events = true
  is_multi_region_trail         = true
  enable_log_file_validation    = true
  
  event_selector {
    read_write_type           = "All"
    include_management_events = true

    data_resource {
      type   = "AWS::S3::Object"
      values = ["arn:aws:s3:::"]
    }

    data_resource {
      type   = "AWS::Lambda::Function"
      values = ["arn:aws:lambda"]
    }
  }

  insight_selector {
    insight_type = "ApiCallRateInsight"
  }

  cloud_watch_logs_group_arn = "${aws_cloudwatch_log_group.cloudtrail.arn}:*"
  cloud_watch_logs_role_arn  = aws_iam_role.cloudtrail_cloudwatch.arn
  kms_key_id                 = aws_kms_key.cloudtrail.arn

  tags = var.tags
}

# S3 ë²„í‚· ì•”í˜¸í™” ë° ë³´ì•ˆ ì„¤ì •
resource "aws_s3_bucket" "cloudtrail" {
  bucket = var.cloudtrail_bucket_name

  tags = var.tags
}

resource "aws_s3_bucket_versioning" "cloudtrail" {
  bucket = aws_s3_bucket.cloudtrail.id

  versioning_configuration {
    status = "Enabled"
  }
}

resource "aws_s3_bucket_server_side_encryption_configuration" "cloudtrail" {
  bucket = aws_s3_bucket.cloudtrail.id

  rule {
    apply_server_side_encryption_by_default {
      sse_algorithm     = "aws:kms"
      kms_master_key_id = aws_kms_key.cloudtrail.arn
    }
  }
}

resource "aws_s3_bucket_public_access_block" "cloudtrail" {
  bucket = aws_s3_bucket.cloudtrail.id

  block_public_acls       = true
  block_public_policy     = true
  ignore_public_acls      = true
  restrict_public_buckets = true
}

# ë¡œê·¸ ë³´ì¡´ ì •ì±…
resource "aws_cloudwatch_log_group" "cloudtrail" {
  name              = "/aws/cloudtrail/${var.cloudtrail_name}"
  retention_in_days = var.log_retention_days
  kms_key_id        = aws_kms_key.cloudwatch.arn

  tags = var.tags
}

# variables.tf
variable "enable_guardduty" {
  description = "Enable GuardDuty"
  type        = bool
  default     = true
}

variable "enable_security_hub" {
  description = "Enable Security Hub"
  type        = bool
  default     = true
}

variable "enable_config" {
  description = "Enable AWS Config"
  type        = bool
  default     = true
}

variable "cloudtrail_name" {
  description = "CloudTrail name"
  type        = string
  default     = "organization-trail"
}

variable "cloudtrail_bucket_name" {
  description = "S3 bucket for CloudTrail logs"
  type        = string
}

variable "log_retention_days" {
  description = "CloudWatch Logs retention in days"
  type        = number
  default     = 365
}

variable "tags" {
  description = "Tags to apply to resources"
  type        = map(string)
  default     = {}
}</div>

                <h3>ì‚¬ìš© ì˜ˆì‹œ</h3>
                <div class="code-block"># main.tf
module "security_baseline" {
  source = "./modules/security-baseline"
  
  enable_guardduty    = true
  enable_security_hub = true
  enable_config       = true
  
  cloudtrail_name        = "production-audit-trail"
  cloudtrail_bucket_name = "my-org-cloudtrail-logs-123456789012"
  log_retention_days     = 365
  
  tags = {
    Environment = "Production"
    ManagedBy   = "Terraform"
    Compliance  = "PCI-DSS"
    CostCenter  = "Security"
  }
}</div>

                <h3>DevSecOps íŒŒì´í”„ë¼ì¸</h3>
                <div class="architecture-diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Code      â”‚  Git Commit
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SAST      â”‚  SonarQube, Semgrep
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ì½”ë“œ ì •ì  ë¶„ì„
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Build     â”‚  Docker Build
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Scan      â”‚  Trivy, Snyk, Grype
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ìŠ¤ìº”
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IaC Scan  â”‚  Checkov, tfsec
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ì¸í”„ë¼ ì½”ë“œ ê²€ì¦
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Deploy    â”‚  ArgoCD, Flux
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DAST      â”‚  OWASP ZAP
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ë™ì  ì• í”Œë¦¬ì¼€ì´ì…˜ ìŠ¤ìº”
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Monitor   â”‚  GuardDuty, Falco
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ëŸ°íƒ€ì„ ë³´ì•ˆ ëª¨ë‹ˆí„°ë§</div>

                <h3>GitHub Actions ë³´ì•ˆ íŒŒì´í”„ë¼ì¸ ì˜ˆì‹œ</h3>
                <div class="code-block">name: Security Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  security-scan:
    runs-on: ubuntu-latest
    
    steps:
    # ì½”ë“œ ì²´í¬ì•„ì›ƒ
    - name: Checkout code
      uses: actions/checkout@v3

    # SAST - ì •ì  ì½”ë“œ ë¶„ì„
    - name: Run Semgrep
      uses: returntocorp/semgrep-action@v1
      with:
        config: >-
          p/security-audit
          p/secrets
          p/owasp-top-ten

    # Secrets ìŠ¤ìº”
    - name: GitGuardian scan
      uses: GitGuardian/ggshield-action@v1
      env:
        GITHUB_PUSH_BEFORE_SHA: ${{ github.event.before }}
        GITHUB_PUSH_BASE_SHA: ${{ github.event.base }}
        GITHUB_DEFAULT_BRANCH: ${{ github.event.repository.default_branch }}
        GITGUARDIAN_API_KEY: ${{ secrets.GITGUARDIAN_API_KEY }}

    # ì˜ì¡´ì„± ì·¨ì•½ì  ìŠ¤ìº”
    - name: Run Snyk
      uses: snyk/actions/node@master
      env:
        SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
      with:
        args: --severity-threshold=high

    # Docker ì´ë¯¸ì§€ ë¹Œë“œ
    - name: Build Docker image
      run: |
        docker build -t myapp:${{ github.sha }} .

    # ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ìŠ¤ìº”
    - name: Run Trivy scanner
      uses: aquasecurity/trivy-action@master
      with:
        image-ref: 'myapp:${{ github.sha }}'
        format: 'sarif'
        output: 'trivy-results.sarif'
        severity: 'CRITICAL,HIGH'

    # SARIF ê²°ê³¼ë¥¼ GitHub Securityì— ì—…ë¡œë“œ
    - name: Upload Trivy results to GitHub Security
      uses: github/codeql-action/upload-sarif@v2
      with:
        sarif_file: 'trivy-results.sarif'

    # Terraform ë³´ì•ˆ ìŠ¤ìº”
    - name: Run tfsec
      uses: aquasecurity/tfsec-action@v1.0.0
      with:
        soft_fail: false

    # Checkov - IaC ë³´ì•ˆ ìŠ¤ìº”
    - name: Run Checkov
      uses: bridgecrewio/checkov-action@master
      with:
        directory: ./terraform
        framework: terraform
        output_format: sarif
        output_file_path: checkov-results.sarif

    # ëª¨ë“  ê²€ì‚¬ í†µê³¼ ì‹œ ECRì— í‘¸ì‹œ
    - name: Configure AWS credentials
      uses: aws-actions/configure-aws-credentials@v2
      with:
        role-to-assume: ${{ secrets.AWS_ROLE_ARN }}
        aws-region: us-east-1

    - name: Login to Amazon ECR
      id: login-ecr
      uses: aws-actions/amazon-ecr-login@v1

    - name: Push to ECR
      env:
        ECR_REGISTRY: ${{ steps.login-ecr.outputs.registry }}
        ECR_REPOSITORY: myapp
        IMAGE_TAG: ${{ github.sha }}
      run: |
        docker tag myapp:$IMAGE_TAG $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG
        docker push $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG</div>

                <h3>ì •ì±… as Code (Policy as Code)</h3>
                <div class="code-block"># OPA Rego ì •ì±… ì˜ˆì‹œ
# terraform_s3_encryption.rego

package terraform.s3

# S3 ë²„í‚·ì€ ë°˜ë“œì‹œ ì•”í˜¸í™”ë˜ì–´ì•¼ í•¨
deny[msg] {
  resource := input.resource.aws_s3_bucket[name]
  not resource.server_side_encryption_configuration
  msg := sprintf("S3 bucket '%s' must have encryption enabled", [name])
}

# ê³µê°œ ì•¡ì„¸ìŠ¤ëŠ” ë°˜ë“œì‹œ ì°¨ë‹¨ë˜ì–´ì•¼ í•¨
deny[msg] {
  resource := input.resource.aws_s3_bucket[name]
  not input.resource.aws_s3_bucket_public_access_block[name]
  msg := sprintf("S3 bucket '%s' must have public access blocked", [name])
}

# ë²„ì „ ê´€ë¦¬ëŠ” ë°˜ë“œì‹œ í™œì„±í™”ë˜ì–´ì•¼ í•¨
deny[msg] {
  resource := input.resource.aws_s3_bucket[name]
  not input.resource.aws_s3_bucket_versioning[name]
  msg := sprintf("S3 bucket '%s' must have versioning enabled", [name])
}</div>

                <h3>ìë™í™” ë„êµ¬ ë¹„êµ</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ë„êµ¬</th>
                            <th>ìš©ë„</th>
                            <th>ì¥ì </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Terraform</td>
                            <td>IaC í”„ë¡œë¹„ì €ë‹</td>
                            <td>ë©€í‹° í´ë¼ìš°ë“œ, í’ë¶€í•œ ìƒíƒœê³„</td>
                        </tr>
                        <tr>
                            <td>CloudFormation</td>
                            <td>AWS ë„¤ì´í‹°ë¸Œ IaC</td>
                            <td>AWS ì„œë¹„ìŠ¤ ë¹ ë¥¸ ì§€ì›</td>
                        </tr>
                        <tr>
                            <td>Checkov</td>
                            <td>IaC ë³´ì•ˆ ìŠ¤ìº”</td>
                            <td>1000+ ë‚´ì¥ ì •ì±…</td>
                        </tr>
                        <tr>
                            <td>tfsec</td>
                            <td>Terraform ë³´ì•ˆ</td>
                            <td>ë¹ ë¥¸ ì†ë„, CI/CD í†µí•©</td>
                        </tr>
                        <tr>
                            <td>Trivy</td>
                            <td>ì´ë¯¸ì§€/IaC ìŠ¤ìº”</td>
                            <td>ì˜¬ì¸ì›, ì˜¤í”ˆì†ŒìŠ¤</td>
                        </tr>
                        <tr>
                            <td>SonarQube</td>
                            <td>ì½”ë“œ í’ˆì§ˆ/ë³´ì•ˆ</td>
                            <td>ìƒì„¸í•œ ë¶„ì„, ëŒ€ì‹œë³´ë“œ</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Section 13: ì§€ì†ì ì¸ ë³´ì•ˆ ê°œì„  -->
            <section>
                <h2>13. ì§€ì†ì ì¸ ë³´ì•ˆ ê°œì„ </h2>
                
                <h3>ë³´ì•ˆ ì„±ìˆ™ë„ ëª¨ë¸</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ë ˆë²¨</th>
                            <th>ì„¤ëª…</th>
                            <th>í•µì‹¬ í™œë™</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1. ê¸°ë³¸</td>
                            <td>ìµœì†Œí•œì˜ ë³´ì•ˆ í†µì œ</td>
                            <td>IAM, ì•”í˜¸í™”, CloudTrail</td>
                        </tr>
                        <tr>
                            <td>2. ê´€ë¦¬</td>
                            <td>ì¡°ì§í™”ëœ ë³´ì•ˆ í”„ë¡œì„¸ìŠ¤</td>
                            <td>GuardDuty, Config, ì •ì±… ë¬¸ì„œí™”</td>
                        </tr>
                        <tr>
                            <td>3. ì •ì˜</td>
                            <td>í‘œì¤€í™”ëœ ë³´ì•ˆ ì ˆì°¨</td>
                            <td>ìë™í™”, IaC, ì •ê¸° ê°ì‚¬</td>
                        </tr>
                        <tr>
                            <td>4. ìµœì í™”</td>
                            <td>ì§€ì†ì  ê°œì„ </td>
                            <td>ë¨¸ì‹ ëŸ¬ë‹, ì˜ˆì¸¡ ë¶„ì„</td>
                        </tr>
                        <tr>
                            <td>5. í˜ì‹ </td>
                            <td>ì—…ê³„ ë¦¬ë”</td>
                            <td>Zero Trust, ììœ¨ ë³´ì•ˆ</td>
                        </tr>
                    </tbody>
                </table>

                <h3>ì •ê¸° ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
                
                <h4>ì›”ê°„ ì ê²€</h4>
                <ul class="checklist">
                    <li>IAM ì‚¬ìš©ì ë° ê¶Œí•œ ê²€í† </li>
                    <li>ë¯¸ì‚¬ìš© ì•¡ì„¸ìŠ¤ í‚¤ ì‹ë³„ ë° ì œê±°</li>
                    <li>Security Hub ì ìˆ˜ í™•ì¸</li>
                    <li>GuardDuty ë°œê²¬ì‚¬í•­ ê²€í† </li>
                    <li>ë¹„ìš© ì´ìƒì¹˜ ë¶„ì„ (ì•”í˜¸í™”í ì±„êµ´ íƒì§€)</li>
                </ul>

                <h4>ë¶„ê¸°ë³„ ì ê²€</h4>
                <ul class="checklist">
                    <li>ì „ì²´ Security Group ê°ì‚¬</li>
                    <li>Network ACL ê·œì¹™ ê²€í† </li>
                    <li>S3 ë²„í‚· ê³µê°œ ì•¡ì„¸ìŠ¤ ìŠ¤ìº”</li>
                    <li>ì•”í˜¸í™” í‚¤ ë¡œí…Œì´ì…˜ í™•ì¸</li>
                    <li>ì¬í•´ ë³µêµ¬ í›ˆë ¨ (Disaster Recovery Drill)</li>
                    <li>ë°±ì—… ë³µì› í…ŒìŠ¤íŠ¸</li>
                </ul>

                <h4>ë°˜ê¸°ë³„ ì ê²€</h4>
                <ul class="checklist">
                    <li>ì¹¨íˆ¬ í…ŒìŠ¤íŠ¸ (Penetration Testing)</li>
                    <li>ì·¨ì•½ì  í‰ê°€ (Vulnerability Assessment)</li>
                    <li>ë³´ì•ˆ ì •ì±… ë¬¸ì„œ ì—…ë°ì´íŠ¸</li>
                    <li>ì§ì› ë³´ì•ˆ êµìœ¡</li>
                    <li>ì‚¬ê³  ëŒ€ì‘ í”Œë ˆì´ë¶ ì‹œë®¬ë ˆì´ì…˜</li>
                </ul>

                <h4>ì—°ê°„ ì ê²€</h4>
                <ul class="checklist">
                    <li>ì „ì²´ ì•„í‚¤í…ì³ ë³´ì•ˆ ë¦¬ë·°</li>
                    <li>ì™¸ë¶€ ë³´ì•ˆ ê°ì‚¬</li>
                    <li>ì»´í”Œë¼ì´ì–¸ìŠ¤ ì¸ì¦ ê°±ì‹ </li>
                    <li>ë³´ì•ˆ ë¡œë“œë§µ ìˆ˜ë¦½</li>
                    <li>ê¸°ìˆ  ë¶€ì±„ í‰ê°€ ë° ê°œì„  ê³„íš</li>
                </ul>

                <h3>ë³´ì•ˆ ë©”íŠ¸ë¦­ (KPI)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ì§€í‘œ</th>
                            <th>ì¸¡ì • ë°©ë²•</th>
                            <th>ëª©í‘œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>í‰ê·  íƒì§€ ì‹œê°„ (MTTD)</td>
                            <td>ìœ„í˜‘ ë°œìƒë¶€í„° íƒì§€ê¹Œì§€</td>
                            <td>&lt; 5ë¶„</td>
                        </tr>
                        <tr>
                            <td>í‰ê·  ëŒ€ì‘ ì‹œê°„ (MTTR)</td>
                            <td>íƒì§€ë¶€í„° ì™„í™”ê¹Œì§€</td>
                            <td>&lt; 15ë¶„</td>
                        </tr>
                        <tr>
                            <td>íŒ¨ì¹˜ ì ìš© ì‹œê°„</td>
                            <td>CVE ê³µê°œë¶€í„° íŒ¨ì¹˜ê¹Œì§€</td>
                            <td>&lt; 30ì¼</td>
                        </tr>
                        <tr>
                            <td>ë¯¸í•´ê²° ë³´ì•ˆ ë°œê²¬ì‚¬í•­</td>
                            <td>Security Hub ë¯¸í•´ê²° ê±´ìˆ˜</td>
                            <td>0 (Critical/High)</td>
                        </tr>
                        <tr>
                            <td>ë³´ì•ˆ êµìœ¡ ì´ìˆ˜ìœ¨</td>
                            <td>ì§ì› êµìœ¡ ì™„ë£Œ ë¹„ìœ¨</td>
                            <td>100%</td>
                        </tr>
                    </tbody>
                </table>

                <h3>ë³´ì•ˆ ë¬¸í™” êµ¬ì¶•</h3>
                <div class="success-box">
                    <strong>ë³´ì•ˆì€ ëª¨ë“  ì‚¬ëŒì˜ ì±…ì„ì…ë‹ˆë‹¤</strong>
                    <ul style="margin-top: 10px;">
                        <li><strong>êµìœ¡</strong>: ì •ê¸°ì ì¸ ë³´ì•ˆ ì¸ì‹ êµìœ¡ ì‹¤ì‹œ</li>
                        <li><strong>ê³µìœ </strong>: ë³´ì•ˆ ì¸ì‹œë˜íŠ¸ í•™ìŠµ ë‚´ìš© ì „ì‚¬ ê³µìœ </li>
                        <li><strong>ë³´ìƒ</strong>: ë³´ì•ˆ ì·¨ì•½ì  ë°œê²¬ ì‹œ ì¸ì„¼í‹°ë¸Œ ì œê³µ</li>
                        <li><strong>íˆ¬ëª…ì„±</strong>: ë³´ì•ˆ ë©”íŠ¸ë¦­ì„ ê³µê°œí•˜ì—¬ ê°œì„  ë™ê¸° ë¶€ì—¬</li>
                        <li><strong>ì§€ì›</strong>: ë³´ì•ˆ ì±”í”¼ì–¸ í”„ë¡œê·¸ë¨ ìš´ì˜</li>
                    </ul>
                </div>
            </section>

            <!-- Section 14: ì°¸ê³  ë¦¬ì†ŒìŠ¤ -->
            <section>
                <h2>14. ì°¸ê³  ë¦¬ì†ŒìŠ¤ ë° ë¬¸ì„œ</h2>
                
                <h3>AWS ê³µì‹ ë¬¸ì„œ</h3>
                <ul>
                    <li><a href="https://aws.amazon.com/architecture/well-architected/" target="_blank">AWS Well-Architected Framework - Security Pillar</a></li>
                    <li><a href="https://docs.aws.amazon.com/security/" target="_blank">AWS Security Documentation</a></li>
                    <li><a href="https://aws.amazon.com/security/security-resources/" target="_blank">AWS Security Resources</a></li>
                    <li><a href="https://aws.amazon.com/compliance/" target="_blank">AWS Compliance Programs</a></li>
                </ul>

                <h3>ë³´ì•ˆ í‘œì¤€ ë° í”„ë ˆì„ì›Œí¬</h3>
                <ul>
                    <li><a href="https://www.cisecurity.org/benchmark/amazon_web_services" target="_blank">CIS AWS Foundations Benchmark</a></li>
                    <li><a href="https://www.nist.gov/cyberframework" target="_blank">NIST Cybersecurity Framework</a></li>
                    <li><a href="https://owasp.org/www-project-top-ten/" target="_blank">OWASP Top 10</a></li>
                    <li><a href="https://www.sans.org/cloud-security/" target="_blank">SANS Cloud Security</a></li>
                </ul>

                <h3>ì˜¤í”ˆì†ŒìŠ¤ ë³´ì•ˆ ë„êµ¬</h3>
                <ul>
                    <li><a href="https://github.com/prowler-cloud/prowler" target="_blank">Prowler - AWS ë³´ì•ˆ í‰ê°€ ë„êµ¬</a></li>
                    <li><a href="https://github.com/bridgecrewio/checkov" target="_blank">Checkov - IaC ë³´ì•ˆ ìŠ¤ìºë„ˆ</a></li>
                    <li><a href="https://github.com/aquasecurity/trivy" target="_blank">Trivy - ì·¨ì•½ì  ìŠ¤ìºë„ˆ</a></li>
                    <li><a href="https://github.com/falcosecurity/falco" target="_blank">Falco - ëŸ°íƒ€ì„ ë³´ì•ˆ</a></li>
                    <li><a href="https://github.com/tfsec/tfsec" target="_blank">tfsec - Terraform ë³´ì•ˆ</a></li>
                </ul>

                <h3>ë³´ì•ˆ ë¸”ë¡œê·¸ ë° ë‰´ìŠ¤</h3>
                <ul>
                    <li><a href="https://aws.amazon.com/blogs/security/" target="_blank">AWS Security Blog</a></li>
                    <li><a href="https://www.schneier.com/" target="_blank">Schneier on Security</a></li>
                    <li><a href="https://krebsonsecurity.com/" target="_blank">Krebs on Security</a></li>
                    <li><a href="https://threatpost.com/" target="_blank">Threatpost</a></li>
                </ul>

                <h3>AWS ë³´ì•ˆ ì„œë¹„ìŠ¤ ìš”ì•½</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ì„œë¹„ìŠ¤</th>
                            <th>ì¹´í…Œê³ ë¦¬</th>
                            <th>ì£¼ìš” ê¸°ëŠ¥</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>IAM</td>
                            <td>ì ‘ê·¼ ê´€ë¦¬</td>
                            <td>ì‚¬ìš©ì ë° ê¶Œí•œ ê´€ë¦¬</td>
                        </tr>
                        <tr>
                            <td>GuardDuty</td>
                            <td>ìœ„í˜‘ íƒì§€</td>
                            <td>ì§€ëŠ¥í˜• ìœ„í˜‘ íƒì§€</td>
                        </tr>
                        <tr>
                            <td>Security Hub</td>
                            <td>ë³´ì•ˆ í†µí•©</td>
                            <td>í†µí•© ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ</td>
                        </tr>
                        <tr>
                            <td>Inspector</td>
                            <td>ì·¨ì•½ì  í‰ê°€</td>
                            <td>ìë™í™”ëœ ë³´ì•ˆ í‰ê°€</td>
                        </tr>
                        <tr>
                            <td>Macie</td>
                            <td>ë°ì´í„° ë³´í˜¸</td>
                            <td>ë¯¼ê° ë°ì´í„° ê²€ìƒ‰</td>
                        </tr>
                        <tr>
                            <td>WAF</td>
                            <td>ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´í˜¸</td>
                            <td>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°©í™”ë²½</td>
                        </tr>
                        <tr>
                            <td>Shield</td>
                            <td>DDoS ë°©ì–´</td>
                            <td>DDoS ê³µê²© ë°©ì–´</td>
                        </tr>
                        <tr>
                            <td>KMS</td>
                            <td>ì•”í˜¸í™”</td>
                            <td>í‚¤ ê´€ë¦¬ ì„œë¹„ìŠ¤</td>
                        </tr>
                        <tr>
                            <td>Secrets Manager</td>
                            <td>ì‹œí¬ë¦¿ ê´€ë¦¬</td>
                            <td>ìê²© ì¦ëª… ì•ˆì „ ì €ì¥</td>
                        </tr>
                        <tr>
                            <td>CloudTrail</td>
                            <td>ê°ì‚¬</td>
                            <td>API í˜¸ì¶œ ê¸°ë¡</td>
                        </tr>
                        <tr>
                            <td>Config</td>
                            <td>ê·œì • ì¤€ìˆ˜</td>
                            <td>ë¦¬ì†ŒìŠ¤ êµ¬ì„± ì¶”ì </td>
                        </tr>
                        <tr>
                            <td>Detective</td>
                            <td>ì¡°ì‚¬</td>
                            <td>ë³´ì•ˆ ì‚¬ê³  ë¶„ì„</td>
                        </tr>
                    </tbody>
                </table>
            </section>

        </main>

        <footer>
            <p>&copy; 2024 AWS Security Architecture Guide</p>
            <p>ì´ ë¬¸ì„œëŠ” êµìœ¡ ëª©ì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œ í™˜ê²½ì— ì ìš© ì‹œ ì¡°ì§ì˜ ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ ì¡°ì •í•˜ì„¸ìš”.</p>
            <p style="margin-top: 10px; font-size: 0.9em;">
                <strong>ì—°ë½ì²˜:</strong> security@example.com | 
                <strong>ë²„ì „:</strong> 1.0 | 
                <strong>ìµœì¢… ì—…ë°ì´íŠ¸:</strong> 2024
            </p>
        </footer>
    </div>

    <a href="#" class="back-to-top">â†‘</a>

    <script>
        // ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Back to top ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
        const backToTopButton = document.querySelector('.back-to-top');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTopButton.style.display = 'flex';
            } else {
                backToTopButton.style.display = 'none';
            }
        });

        // ì´ˆê¸° ìƒíƒœ
        backToTopButton.style.display = 'none';
    </script>
</body>
</html>
```

HTML íŒŒì¼ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤! ì£¼ìš” íŠ¹ì§•ì€:

## ğŸ“‹ ì£¼ìš” ê¸°ëŠ¥

1. **ë°˜ì‘í˜• ë””ìì¸**: ëª¨ë°”ì¼, íƒœë¸”ë¦¿, ë°ìŠ¤í¬í†± ëª¨ë‘ ì§€ì›
2. **ë„¤ë¹„ê²Œì´ì…˜**: ìƒë‹¨ ê³ ì • ë©”ë‰´ë¡œ ë¹ ë¥¸ ì„¹ì…˜ ì´ë™
3. **ì‹œê°ì  ìš”ì†Œ**:
   - AWS ë¸Œëœë“œ ì»¬ëŸ¬ í™œìš© (#232F3E, #FF9900)
   - ì½”ë“œ ë¸”ë¡ í•˜ì´ë¼ì´íŒ…
   - ì•„í‚¤í…ì³ ë‹¤ì´ì–´ê·¸ë¨
   - ì •ë³´/ê²½ê³ /ì„±ê³µ ë°•ìŠ¤
4. **ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œ**:
   - ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤
   - Back to top ë²„íŠ¼
   - í˜¸ë²„ íš¨ê³¼
5. **ì¸ì‡„ ì¹œí™”ì **: ë¬¸ì„œ ì¶œë ¥ ê°€ëŠ¥

## ğŸ’¾ ì‚¬ìš© ë°©ë²•

1. ìœ„ ì½”ë“œë¥¼ `aws-security-guide.html` íŒŒì¼ë¡œ ì €ì¥
2. ë¸Œë¼ìš°ì €ì—ì„œ íŒŒì¼ ì—´ê¸°
3. í•„ìš”ì‹œ PDFë¡œ ì €ì¥ ê°€ëŠ¥ (Ctrl+P)

í˜¹ì‹œ ì¶”ê°€ë¡œ ìˆ˜ì •í•˜ê³  ì‹¶ì€ ë¶€ë¶„ì´ ìˆìœ¼ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”!
User:  <div class="code-block"># modules/security-baseline/main.tf
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

# GuardDuty í™œì„±í™”
resource "aws_guardduty_detector" "main" {
  enable                       = var.enable_guardduty
  finding_publishing_frequency = "FIFTEEN_MINUTES"
  
  datasources {
    s3_logs {
      enable = true
    }
    kubernetes {
      audit_logs {
        enable = true
      }
    }
    malware_protection {
      scan_ec2_instance_with_findings {
        ebs_volumes {
          enable = true
        }
      }
    }
  }

  tags = var.tags
}

# Security Hub í™œì„±í™”
resource "aws_securityhub_account" "main" {
  count = var.enable_security_hub ? 1 : 0
}

resource "aws_securityhub_standards_subscription" "cis" {
  count         = var.enable_security_hub ? 1 : 0
  depends_on    = [aws_securityhub_account.main]
  standards_arn = "arn:aws:securityhub:::ruleset/cis-aws-foundations-benchmark/v/1.2.0"
}

resource "aws_securityhub_standards_subscription" "aws_foundational" {
  count         = var.enable_security_hub ? 1 : 0
  depends_on    = [aws_securityhub_account.main]
  standards_arn = "arn:aws:securityhub:\${data.aws_region.current.name}::standards/aws-foundational-security-best-practices/v/1.0.0"
}

# AWS Config í™œì„±í™”
resource "aws_config_configuration_recorder" "main" {
  name     = "security-config-recorder"
  role_arn = aws_iam_role.config.arn

  recording_group {
    all_supported = true
    include_global_resources = true
  }
}

resource "aws_config_delivery_channel" "main" {
  name           = "security-config-delivery"
  s3_bucket_name = aws_s3_bucket.config.bucket
  depends_on     = [aws_config_configuration_recorder.main]
}

resource "aws_config_configuration_recorder_status" "main" {
  name       = aws_config_configuration_recorder.main.name
  is_enabled = true
  depends_on = [aws_config_delivery_channel.main]
}

# CloudTrail ë©€í‹° ë¦¬ì „ ì¶”ì 
resource "aws_cloudtrail" "main" {
  name                          = var.cloudtrail_name
  s3_bucket_name                = aws_s3_bucket.cloudtrail.bucket
  include_global_service_events = true
  is_multi_region_trail         = true
  enable_log_file_validation    = true
  
  event_selector {
    read_write_type           = "All"
    include_management_events = true

    data_resource {
      type   = "AWS::S3::Object"
      values = ["arn:aws:s3:::"]
    }

    data_resource {
      type   = "AWS::Lambda::Function"
      values = ["arn:aws:lambda"]
    }
  }

  insight_selector {
    insight_type = "ApiCallRateInsight"
  }

  cloud_watch_logs_group_arn = "\${aws_cloudwatch_log_group.cloudtrail.arn}:*"
  cloud_watch_logs_role_arn  = aws_iam_role.cloudtrail_cloudwatch.arn
  kms_key_id                 = aws_kms_key.cloudtrail.arn

  tags = var.tags
}

# S3 ë²„í‚· ì•”í˜¸í™” ë° ë³´ì•ˆ ì„¤ì •
resource "aws_s3_bucket" "cloudtrail" {
  bucket = var.cloudtrail_bucket_name

  tags = var.tags
}

resource "aws_s3_bucket_versioning" "cloudtrail" {
  bucket = aws_s3_bucket.cloudtrail.id

  versioning_configuration {
    status = "Enabled"
  }
}

resource "aws_s3_bucket_server_side_encryption_configuration" "cloudtrail" {
  bucket = aws_s3_bucket.cloudtrail.id

  rule {
    apply_server_side_encryption_by_default {
      sse_algorithm     = "aws:kms"
      kms_master_key_id = aws_kms_key.cloudtrail.arn
    }
  }
}

resource "aws_s3_bucket_public_access_block" "cloudtrail" {
  bucket = aws_s3_bucket.cloudtrail.id

  block_public_acls       = true
  block_public_policy     = true
  ignore_public_acls      = true
  restrict_public_buckets = true
}

# ë¡œê·¸ ë³´ì¡´ ì •ì±…
resource "aws_cloudwatch_log_group" "cloudtrail" {
  name              = "/aws/cloudtrail/\${var.cloudtrail_name}"
  retention_in_days = var.log_retention_days
  kms_key_id        = aws_kms_key.cloudwatch.arn

  tags = var.tags
}

# variables.tf
variable "enable_guardduty" {
  description = "Enable GuardDuty"
  type        = bool
  default     = true
}

variable "enable_security_hub" {
  description = "Enable Security Hub"
  type        = bool
  default     = true
}

variable "enable_config" {
  description = "Enable AWS Config"
  type        = bool
  default     = true
}

variable "cloudtrail_name" {
  description = "CloudTrail name"
  type        = string
  default     = "organization-trail"
}

variable "cloudtrail_bucket_name" {
  description = "S3 bucket for CloudTrail logs"
  type        = string
}

variable "log_retention_days" {
  description = "CloudWatch Logs retention in days"
  type        = number
  default     = 365
}

variable "tags" {
  description = "Tags to apply to resources"
  type        = map(string)
  default     = {}
}</div>

                <h3>ì‚¬ìš© ì˜ˆì‹œ</h3>
                <div class="code-block"># main.tf
module "security_baseline" {
  source = "./modules/security-baseline"
  
  enable_guardduty    = true
  enable_security_hub = true
  enable_config       = true
  
  cloudtrail_name        = "production-audit-trail"
  cloudtrail_bucket_name = "my-org-cloudtrail-logs-123456789012"
  log_retention_days     = 365
  
  tags = {
    Environment = "Production"
    ManagedBy   = "Terraform"
    Compliance  = "PCI-DSS"
    CostCenter  = "Security"
  }
}</div>

ì´ëŸ° ë¶€ë¶„ì´ ë„¤ëª¨ë°•ìŠ¤ì— ë‚˜ì˜¤ëŠ”ë° í•œì¤„ë¡œ ë‚˜ì™€ì„œ ê°€ë…ì„±ì´ ì¢‹ì§€ ì•Šì•„. ìˆ˜ì •í•´
Model: ì½”ë“œ ë¸”ë¡ì˜ ê°€ë…ì„±ì„ ê°œì„ í•˜ê² ìŠµë‹ˆë‹¤. CSSë¥¼ ìˆ˜ì •í•˜ì—¬ ì¤„ë°”ê¿ˆê³¼ ìŠ¤í¬ë¡¤ì„ ê°œì„ í•˜ê² ìŠµë‹ˆë‹¤.

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS ì°¨ì„¸ëŒ€ ë³´ì•ˆ ì•„í‚¤í…ì³ ì„¤ê³„ ê°€ì´ë“œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #232F3E 0%, #FF9900 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        nav {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 3px solid #FF9900;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }

        nav a {
            color: #232F3E;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s;
            font-weight: 500;
        }

        nav a:hover {
            background: #FF9900;
            color: white;
        }

        main {
            padding: 40px;
        }

        section {
            margin-bottom: 50px;
            scroll-margin-top: 80px;
        }

        h2 {
            color: #232F3E;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #FF9900;
        }

        h3 {
            color: #FF9900;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
        }

        h4 {
            color: #232F3E;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        /* ê°œì„ ëœ ì½”ë“œ ë¸”ë¡ ìŠ¤íƒ€ì¼ */
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-left: 4px solid #FF9900;
        }

        /* ì½”ë“œ ë¸”ë¡ ë‚´ ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        .code-block::-webkit-scrollbar {
            height: 10px;
        }

        .code-block::-webkit-scrollbar-track {
            background: #2d2d2d;
            border-radius: 5px;
        }

        .code-block::-webkit-scrollbar-thumb {
            background: #FF9900;
            border-radius: 5px;
        }

        .code-block::-webkit-scrollbar-thumb:hover {
            background: #cc7a00;
        }

        /* ì½”ë“œ êµ¬ë¬¸ ê°•ì¡° */
        .code-block .comment {
            color: #6a9955;
        }

        .code-block .keyword {
            color: #569cd6;
        }

        .code-block .string {
            color: #ce9178;
        }

        .code-block .number {
            color: #b5cea8;
        }

        .architecture-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-left: 4px solid #FF9900;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            white-space: pre;
            overflow-x: auto;
            line-height: 1.5;
            font-size: 14px;
            border-radius: 5px;
        }

        .architecture-diagram::-webkit-scrollbar {
            height: 8px;
        }

        .architecture-diagram::-webkit-scrollbar-track {
            background: #e9ecef;
            border-radius: 4px;
        }

        .architecture-diagram::-webkit-scrollbar-thumb {
            background: #FF9900;
            border-radius: 4px;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #0066cc;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ff9900;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow-x: auto;
            display: block;
        }

        @media screen and (min-width: 768px) {
            table {
                display: table;
            }
        }

        thead {
            display: table-header-group;
        }

        tbody {
            display: table-row-group;
        }

        th {
            background: #232F3E;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .checklist {
            list-style: none;
            margin-left: 0;
        }

        .checklist li:before {
            content: "â˜ ";
            color: #FF9900;
            font-weight: bold;
            margin-right: 10px;
        }

        footer {
            background: #232F3E;
            color: white;
            text-align: center;
            padding: 30px;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #FF9900;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 24px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        .back-to-top:hover {
            background: #232F3E;
            transform: translateY(-5px);
        }

        /* ë°˜ì‘í˜• ë””ìì¸ ê°œì„  */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            header h1 {
                font-size: 1.8em;
            }

            main {
                padding: 20px;
            }

            nav ul {
                flex-direction: column;
                align-items: stretch;
            }

            nav a {
                display: block;
                text-align: center;
            }

            .code-block {
                font-size: 12px;
                padding: 15px;
            }

            table {
                font-size: 14px;
            }

            th, td {
                padding: 8px;
            }
        }

        /* ì¸ì‡„ ìŠ¤íƒ€ì¼ */
        @media print {
            body {
                background: white;
                padding: 0;
            }

            .container {
                box-shadow: none;
            }

            nav, .back-to-top {
                display: none;
            }

            .code-block {
                background: #f5f5f5;
                color: black;
                border: 1px solid #ddd;
                page-break-inside: avoid;
            }

            section {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ›¡ï¸ AWS ì°¨ì„¸ëŒ€ ë³´ì•ˆ ì•„í‚¤í…ì³ ì„¤ê³„ ê°€ì´ë“œ</h1>
            <p>í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ í˜„ëŒ€ì ì´ê³  ê°•ë ¥í•œ ë³´ì•ˆ ì•„í‚¤í…ì³ êµ¬ì¶•ì„ ìœ„í•œ í¬ê´„ì  ê°€ì´ë“œ</p>
        </header>

        <nav>
            <ul>
                <li><a href="#principles">ë³´ì•ˆ ì›ì¹™</a></li>
                <li><a href="#accounts">ê³„ì • ê´€ë¦¬</a></li>
                <li><a href="#network">ë„¤íŠ¸ì›Œí¬</a></li>
                <li><a href="#data">ë°ì´í„° ë³´í˜¸</a></li>
                <li><a href="#iam">IAM</a></li>
                <li><a href="#detection">ìœ„í˜‘ íƒì§€</a></li>
                <li><a href="#application">ì• í”Œë¦¬ì¼€ì´ì…˜</a></li>
                <li><a href="#compliance">ì»´í”Œë¼ì´ì–¸ìŠ¤</a></li>
                <li><a href="#incident">ì¸ì‹œë˜íŠ¸ ëŒ€ì‘</a></li>
                <li><a href="#serverless">ì„œë²„ë¦¬ìŠ¤</a></li>
                <li><a href="#container">ì»¨í…Œì´ë„ˆ</a></li>
                <li><a href="#automation">ìë™í™”</a></li>
            </ul>
        </nav>

        <main>
            <!-- Section 1: í•µì‹¬ ë³´ì•ˆ ì›ì¹™ -->
            <section id="principles">
                <h2>1. í•µì‹¬ ë³´ì•ˆ ì›ì¹™</h2>
                
                <h3>Zero Trust ì•„í‚¤í…ì³</h3>
                <div class="info-box">
                    <strong>í•µì‹¬ ì›ì¹™:</strong> "ì ˆëŒ€ ì‹ ë¢°í•˜ì§€ ë§ê³ , í•­ìƒ ê²€ì¦í•˜ë¼ (Never Trust, Always Verify)"
                </div>
                <ul>
                    <li>ë„¤íŠ¸ì›Œí¬ ìœ„ì¹˜ì™€ ê´€ê³„ì—†ì´ ëª¨ë“  ì ‘ê·¼ ìš”ì²­ì„ ê²€ì¦</li>
                    <li>ìµœì†Œ ê¶Œí•œ ì›ì¹™(Least Privilege) ì—„ê²© ì ìš©</li>
                    <li>ë§ˆì´í¬ë¡œ ì„¸ê·¸ë©˜í…Œì´ì…˜ì„ í†µí•œ ê³µê²© í‘œë©´ ìµœì†Œí™”</li>
                    <li>ì—°ì†ì ì¸ ëª¨ë‹ˆí„°ë§ ë° ê²€ì¦</li>
                </ul>

                <h3>Defense in Depth (ë‹¤ì¸µ ë°©ì–´)</h3>
                <ul>
                    <li>ì—¬ëŸ¬ ë³´ì•ˆ ê³„ì¸µì„ í†µí•œ ì¤‘ì²©ëœ ë°©ì–´ ì²´ê³„ êµ¬ì¶•</li>
                    <li>ë‹¨ì¼ ì‹¤íŒ¨ ì§€ì (Single Point of Failure) ì œê±°</li>
                    <li>ê° ê³„ì¸µë³„ ë…ë¦½ì ì¸ ë³´ì•ˆ í†µì œ ë©”ì»¤ë‹ˆì¦˜</li>
                    <li>ê³„ì¸µ ê°„ ìƒí˜¸ ë³´ì™„ì  ë³´ì•ˆ ì •ì±…</li>
                </ul>
            </section>

            <!-- Section 2: ê³„ì • ë° ì¡°ì§ ë³´ì•ˆ -->
            <section id="accounts">
                <h2>2. ê³„ì • ë° ì¡°ì§ ë³´ì•ˆ</h2>
                
                <h3>AWS Organizations êµ¬ì¡°</h3>
                <div class="architecture-diagram">Root Organization Unit (OU)
â”œâ”€â”€ Security OU
â”‚   â”œâ”€â”€ Log Archive Account (ì¤‘ì•™ ë¡œê·¸ ì €ì¥ì†Œ)
â”‚   â”œâ”€â”€ Security Tooling Account (ë³´ì•ˆ ë„êµ¬)
â”‚   â””â”€â”€ Audit Account (ê°ì‚¬ ë° ì»´í”Œë¼ì´ì–¸ìŠ¤)
â”‚
â”œâ”€â”€ Infrastructure OU
â”‚   â”œâ”€â”€ Network Account (ì „ì‚¬ ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬)
â”‚   â”œâ”€â”€ Shared Services Account (ê³µìœ  ì„œë¹„ìŠ¤)
â”‚   â””â”€â”€ DNS Account (Route 53 ê´€ë¦¬)
â”‚
â””â”€â”€ Workload OU
    â”œâ”€â”€ Production Account (ìš´ì˜ í™˜ê²½)
    â”œâ”€â”€ Staging Account (ìŠ¤í…Œì´ì§• í™˜ê²½)
    â””â”€â”€ Development Account (ê°œë°œ í™˜ê²½)</div>

                <h3>ì£¼ìš” ì„¤ì • ë° êµ¬ì„±</h3>
                <ul>
                    <li><strong>SCP (Service Control Policies)</strong>: ì¡°ì§ ì „ì²´ì— ì ìš©ë˜ëŠ” ê¶Œí•œ ê²½ê³„ ì„¤ì •</li>
                    <li><strong>AWS Control Tower</strong>: ë©€í‹° ì–´ì¹´ìš´íŠ¸ í™˜ê²½ì˜ ê±°ë²„ë„ŒìŠ¤ ìë™í™”</li>
                    <li><strong>ê³„ì •ë³„ ì—­í•  ë¶„ë¦¬ (RBAC)</strong>: ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ êµ¬í˜„</li>
                    <li><strong>í†µí•© ë¹Œë§</strong>: ë¹„ìš© ê°€ì‹œì„± ë° ì˜ˆì‚° ê´€ë¦¬</li>
                </ul>

                <div class="success-box">
                    <strong>ëª¨ë²” ì‚¬ë¡€:</strong> í™˜ê²½ë³„(Dev/Stage/Prod), íŒ€ë³„, í”„ë¡œì íŠ¸ë³„ë¡œ AWS ê³„ì •ì„ ë¶„ë¦¬í•˜ì—¬ ë³´ì•ˆ ê²½ê³„ë¥¼ ëª…í™•íˆ í•©ë‹ˆë‹¤.
                </div>
            </section>

            <!-- Section 3: ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ -->
            <section id="network">
                <h2>3. ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ì•„í‚¤í…ì³</h2>
                
                <h3>VPC ì„¤ê³„ íŒ¨í„´</h3>
                <div class="architecture-diagram">Internet Gateway / NAT Gateway
         â†“
[Public Subnet - Tier 1]
  - Application Load Balancer (ALB)
  - NAT Gateway
  - Bastion Host (Session Manager ê¶Œì¥)
         â†“
[Private Subnet - Tier 2]
  - Application Servers (EC2, ECS, EKS)
  - Lambda Functions
  - API Gateway
         â†“
[Isolated Subnet - Tier 3]
  - RDS Databases
  - ElastiCache
  - DocumentDB</div>

                <h3>í•µì‹¬ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ êµ¬ì„±ìš”ì†Œ</h3>
                
                <h4>AWS Network Firewall</h4>
                <ul>
                    <li>ìƒíƒœ ì €ì¥(Stateful) ë°©í™”ë²½ ê·œì¹™ ì—”ì§„</li>
                    <li>ì¹¨ì… íƒì§€ ë° ë°©ì§€ ì‹œìŠ¤í…œ (IDS/IPS)</li>
                    <li>ë„ë©”ì¸ ê¸°ë°˜ í•„í„°ë§ (ì•…ì„± ë„ë©”ì¸ ì°¨ë‹¨)</li>
                    <li>Suricata í˜¸í™˜ ê·œì¹™ ì§€ì›</li>
                </ul>

                <h4>Security Groups vs NACLs</h4>
                <table>
                    <thead>
                        <tr>
                            <th>íŠ¹ì„±</th>
                            <th>Security Groups</th>
                            <th>Network ACLs</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ì‘ë™ ê³„ì¸µ</td>
                            <td>ì¸ìŠ¤í„´ìŠ¤ ë ˆë²¨</td>
                            <td>ì„œë¸Œë„· ë ˆë²¨</td>
                        </tr>
                        <tr>
                            <td>ìƒíƒœ</td>
                            <td>Stateful (ìƒíƒœ ì €ì¥)</td>
                            <td>Stateless (ìƒíƒœ ë¹„ì €ì¥)</td>
                        </tr>
                        <tr>
                            <td>ê·œì¹™ íƒ€ì…</td>
                            <td>í—ˆìš© ê·œì¹™ë§Œ</td>
                            <td>í—ˆìš© ë° ê±°ë¶€ ê·œì¹™</td>
                        </tr>
                        <tr>
                            <td>í‰ê°€ ìˆœì„œ</td>
                            <td>ëª¨ë“  ê·œì¹™ í‰ê°€</td>
                            <td>ë²ˆí˜¸ ìˆœì„œëŒ€ë¡œ í‰ê°€</td>
                        </tr>
                    </tbody>
                </table>

                <h4>VPC Flow Logs</h4>
                <div class="code-block"># VPC Flow Logs êµ¬ì„± ì˜ˆì‹œ
resource "aws_flow_log" "main" {
  log_destination      = aws_s3_bucket.flow_logs.arn
  log_destination_type = "s3"
  traffic_type         = "ALL"
  vpc_id               = aws_vpc.main.id

  tags = {
    Name        = "vpc-flow-logs"
    Environment = "production"
  }
}</div>
            </section>

            <!-- Section 4: ë°ì´í„° ë³´í˜¸ -->
            <section id="data">
                <h2>4. ë°ì´í„° ë³´í˜¸</h2>
                
                <h3>ì•”í˜¸í™” ì „ëµ</h3>
                
                <h4>ì „ì†¡ ì¤‘ ì•”í˜¸í™” (Encryption in Transit)</h4>
                <ul>
                    <li><strong>TLS 1.2 ì´ìƒ ê°•ì œ</strong>: ëª¨ë“  ë°ì´í„° ì „ì†¡ ì‹œ TLS í”„ë¡œí† ì½œ ì‚¬ìš©</li>
                    <li><strong>AWS Certificate Manager (ACM)</strong>: SSL/TLS ì¸ì¦ì„œ ìë™ ê´€ë¦¬</li>
                    <li><strong>VPN / Direct Connect</strong>: ì˜¨í”„ë ˆë¯¸ìŠ¤ì™€ì˜ ì•ˆì „í•œ ì—°ê²°</li>
                    <li><strong>PrivateLink</strong>: AWS ì„œë¹„ìŠ¤ì— ëŒ€í•œ í”„ë¼ì´ë¹— ì—°ê²°</li>
                </ul>

                <h4>ì €ì¥ ë°ì´í„° ì•”í˜¸í™” (Encryption at Rest)</h4>
                <ul>
                    <li><strong>AWS KMS (Key Management Service)</strong>: ì¤‘ì•™ ì§‘ì¤‘ì‹ í‚¤ ê´€ë¦¬</li>
                    <li><strong>Customer Managed Keys (CMK)</strong>: ê³ ê° ê´€ë¦¬í˜• í‚¤ ì‚¬ìš©</li>
                    <li><strong>ìë™ í‚¤ ë¡œí…Œì´ì…˜</strong>: ì—° 1íšŒ ìë™ í‚¤ êµì²´</li>
                    <li><strong>CloudHSM</strong>: FIPS 140-2 Level 3 ì¤€ìˆ˜ê°€ í•„ìš”í•œ ê²½ìš°</li>
                </ul>

                <h3>ë°ì´í„° ë¶„ë¥˜ ë° ë³´í˜¸ ìˆ˜ì¤€</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ë¶„ë¥˜</th>
                            <th>ì•”í˜¸í™”</th>
                            <th>ì ‘ê·¼ ì œì–´</th>
                            <th>ë¡œê¹…</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Public</td>
                            <td>ì„ íƒ ì‚¬í•­</td>
                            <td>ê³µê°œ ì½ê¸°</td>
                            <td>ê¸°ë³¸</td>
                        </tr>
                        <tr>
                            <td>Internal</td>
                            <td>SSE (ì„œë²„ ì¸¡ ì•”í˜¸í™”)</td>
                            <td>ì¡°ì§ ë‚´ë¶€ë§Œ</td>
                            <td>ê¸°ë³¸</td>
                        </tr>
                        <tr>
                            <td>Confidential</td>
                            <td>CMK + ì „ì†¡ ì¤‘ ì•”í˜¸í™”</td>
                            <td>ìŠ¹ì¸ëœ íŒ€ë§Œ</td>
                            <td>ìƒì„¸ ë¡œê¹…</td>
                        </tr>
                        <tr>
                            <td>Restricted</td>
                            <td>CMK + VPC Endpoint</td>
                            <td>ìµœì†Œ ê¶Œí•œ + MFA</td>
                            <td>ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</td>
                        </tr>
                    </tbody>
                </table>

                <div class="warning-box">
                    <strong>ì¤‘ìš”:</strong> S3 ë²„í‚·ì˜ ê²½ìš° ê¸°ë³¸ ì•”í˜¸í™”ë¥¼ í™œì„±í™”í•˜ê³ , ê³µê°œ ì•¡ì„¸ìŠ¤ë¥¼ ì°¨ë‹¨í•˜ëŠ” ê²ƒì´ í•„ìˆ˜ì…ë‹ˆë‹¤.
                </div>

                <h3>S3 ë³´ì•ˆ êµ¬ì„± ì˜ˆì‹œ</h3>
                <div class="code-block">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "DenyUnencryptedObjectUploads",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::my-secure-bucket/*",
      "Condition": {
        "StringNotEquals": {
          "s3:x-amz-server-side-encryption": "aws:kms"
        }
      }
    },
    {
      "Sid": "DenyInsecureTransport",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:*",
      "Resource": [
        "arn:aws:s3:::my-secure-bucket",
        "arn:aws:s3:::my-secure-bucket/*"
      ],
      "Condition": {
        "Bool": {
          "aws:SecureTransport": "false"
        }
      }
    }
  ]
}</div>
            </section>

            <!-- Section 5: IAM -->
            <section id="iam">
                <h2>5. ì‹ë³„ ë° ì ‘ê·¼ ê´€ë¦¬ (IAM)</h2>
                
                <h3>IAM ëª¨ë²” ì‚¬ë¡€</h3>
                
                <div class="success-box">
                    <strong>í•µì‹¬ ì›ì¹™:</strong>
                    <ul style="margin-top: 10px;">
                        <li>ë£¨íŠ¸ ê³„ì • ì‚¬ìš© ê¸ˆì§€ (MFA í™œì„±í™” í›„ ì ê¸ˆ)</li>
                        <li>ê°œë³„ ì‚¬ìš©ìì—ê²Œ ê³ ìœ  ìê²© ì¦ëª… ë¶€ì—¬</li>
                        <li>ê·¸ë£¹ì„ í†µí•œ ê¶Œí•œ ê´€ë¦¬</li>
                        <li>ìµœì†Œ ê¶Œí•œ ì›ì¹™ ì ìš©</li>
                        <li>ì •ê¸°ì ì¸ ê¶Œí•œ ê²€í†  ë° ê°ì‚¬</li>
                    </ul>
                </div>

                <h3>ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC) ì •ì±… ì˜ˆì‹œ</h3>
                <div class="code-block">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AllowS3ReadWrite",
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:ListBucket"
      ],
      "Resource": [
        "arn:aws:s3:::my-app-bucket",
        "arn:aws:s3:::my-app-bucket/*"
      ],
      "Condition": {
        "StringEquals": {
          "aws:PrincipalOrgID": "o-xxxxxxxxx"
        },
        "IpAddress": {
          "aws:SourceIp": [
            "10.0.0.0/8",
            "172.16.0.0/12"
          ]
        }
      }
    },
    {
      "Sid": "DenyDeleteActions",
      "Effect": "Deny",
      "Action": [
        "s3:DeleteObject",
        "s3:DeleteBucket"
      ],
      "Resource": "*"
    }
  ]
}</div>

                <h3>IAM ê¶Œì¥ êµ¬ì„±</h3>
                <ul>
                    <li><strong>MFA (Multi-Factor Authentication)</strong>: ëª¨ë“  ì‚¬ìš©ì ë° ë£¨íŠ¸ ê³„ì •ì— í•„ìˆ˜ í™œì„±í™”</li>
                    <li><strong>IAM Access Analyzer</strong>: ì™¸ë¶€ì™€ ê³µìœ ë˜ëŠ” ë¦¬ì†ŒìŠ¤ ìë™ íƒì§€</li>
                    <li><strong>ê¶Œí•œ ê²½ê³„ (Permission Boundaries)</strong>: ì‚¬ìš©ì ë° ì—­í• ì˜ ìµœëŒ€ ê¶Œí•œ ì œí•œ</li>
                    <li><strong>ì„œë¹„ìŠ¤ ì œì–´ ì •ì±… (SCP)</strong>: ì¡°ì§ ìˆ˜ì¤€ì˜ ê°€ë“œë ˆì¼</li>
                    <li><strong>ì„ì‹œ ìê²© ì¦ëª…</strong>: ì¥ê¸° ì•¡ì„¸ìŠ¤ í‚¤ ëŒ€ì‹  STS ì‚¬ìš©</li>
                </ul>

                <h3>AWS IAM Identity Center (AWS SSO)</h3>
                <div class="info-box">
                    <strong>ì¥ì :</strong>
                    <ul style="margin-top: 10px;">
                        <li>ì¤‘ì•™ ì§‘ì¤‘ì‹ ì‚¬ìš©ì ì ‘ê·¼ ê´€ë¦¬</li>
                        <li>SAML 2.0 ê¸°ë°˜ í˜ë”ë ˆì´ì…˜ (Azure AD, Okta ë“±)</li>
                        <li>ì„ì‹œ ìê²© ì¦ëª… ìë™ ë°œê¸‰</li>
                        <li>ë‹¤ì¤‘ ê³„ì • ì ‘ê·¼ì„ ìœ„í•œ í†µí•© í¬í„¸</li>
                        <li>ê¶Œí•œ ì„¸íŠ¸ë¥¼ í†µí•œ í‘œì¤€í™”ëœ ê¶Œí•œ ê´€ë¦¬</li>
                    </ul>
                </div>

                <h3>IAM ì •ì±… í…ŒìŠ¤íŠ¸ ë„êµ¬</h3>
                <ul>
                    <li><strong>IAM Policy Simulator</strong>: ì •ì±… íš¨ê³¼ ì‚¬ì „ í…ŒìŠ¤íŠ¸</li>
                    <li><strong>Access Advisor</strong>: ë§ˆì§€ë§‰ ì‚¬ìš© ì‹œê°„ ê¸°ë°˜ ê¶Œí•œ ì •ë¦¬</li>
                    <li><strong>CloudTrail</strong>: ì‹¤ì œ API í˜¸ì¶œ ê¸°ë¡ ë¶„ì„</li>
                </ul>
            </section>

            <!-- Section 6: ìœ„í˜‘ íƒì§€ ë° ëŒ€ì‘ -->
            <section id="detection">
                <h2>6. ìœ„í˜‘ íƒì§€ ë° ëŒ€ì‘</h2>
                
                <h3>ë³´ì•ˆ ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ</h3>
                
                <h4>Amazon GuardDuty</h4>
                <ul>
                    <li><strong>ì§€ëŠ¥í˜• ìœ„í˜‘ íƒì§€</strong>: ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ì´ìƒ í–‰ìœ„ íƒì§€</li>
                    <li><strong>ë°ì´í„° ì†ŒìŠ¤</strong>: VPC Flow Logs, CloudTrail, DNS ë¡œê·¸</li>
                    <li><strong>ìœ„í˜‘ ì¸í…”ë¦¬ì „ìŠ¤</strong>: AWS ë° ì™¸ë¶€ ìœ„í˜‘ ë°ì´í„°ë² ì´ìŠ¤ í™œìš©</li>
                    <li><strong>ì£¼ìš” íƒì§€ í•­ëª©</strong>:
                        <ul>
                            <li>ë¹„ì •ìƒì ì¸ API í˜¸ì¶œ</li>
                            <li>ì•”í˜¸í™”í ì±„êµ´ í™œë™</li>
                            <li>ì•…ì„± IP í†µì‹ </li>
                            <li>ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²© (Brute Force)</li>
                        </ul>
                    </li>
                </ul>

                <h4>AWS Security Hub</h4>
                <ul>
                    <li><strong>í†µí•© ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ</strong>: ëª¨ë“  ë³´ì•ˆ ë„êµ¬ì˜ ê²°ê³¼ ì§‘ê³„</li>
                    <li><strong>ìë™í™”ëœ ì»´í”Œë¼ì´ì–¸ìŠ¤ ì ê²€</strong>: CIS, PCI-DSS, AWS FSBP</li>
                    <li><strong>ë³´ì•ˆ ì ìˆ˜</strong>: ì „ì²´ ë³´ì•ˆ íƒœì„¸ì˜ ì •ëŸ‰ì  í‰ê°€</li>
                    <li><strong>í†µí•© ì„œë¹„ìŠ¤</strong>: GuardDuty, Inspector, Macie, IAM Access Analyzer ë“±</li>
                </ul>

                <h4>Amazon Detective</h4>
                <ul>
                    <li><strong>ë³´ì•ˆ ì‚¬ê³  ì¡°ì‚¬</strong>: ê·¼ë³¸ ì›ì¸ ë¶„ì„</li>
                    <li><strong>ì‹œê°í™”ëœ ê·¸ë˜í”„</strong>: ë¦¬ì†ŒìŠ¤ ê°„ ê´€ê³„ ë° í™œë™ íŒ¨í„´</li>
                    <li><strong>ê¸°ê³„ í•™ìŠµ ë¶„ì„</strong>: ì •ìƒ ê¸°ì¤€ì„  ëŒ€ë¹„ ì´ìƒ í–‰ìœ„ ì‹ë³„</li>
                </ul>

                <h3>í†µí•© SIEM ì•„í‚¤í…ì³</h3>
                <div class="architecture-diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CloudTrail   â”‚â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ GuardDuty    â”‚â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Security Hub â”‚â”€â”€â”¼â”€â”€â”€â”€â†’â”‚ EventBridgeâ”‚â”€â”€â”€â”€â†’â”‚ Lambda â”‚â”€â”€â”€â”€â†’â”‚ SIEM/SOAR    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ (Splunk/ELK) â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ AWS Config   â”‚â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ Macie        â”‚â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

                <h3>ìë™í™”ëœ ë³´ì•ˆ ì‘ë‹µ ì›Œí¬í”Œë¡œìš°</h3>
                <div class="code-block"># EventBridge ê·œì¹™ ì˜ˆì‹œ (Terraform)
resource "aws_cloudwatch_event_rule" "guardduty_findings" {
  name        = "guardduty-high-severity"
  description = "Trigger on high severity GuardDuty findings"

  event_pattern = jsonencode({
    source      = ["aws.guardduty"]
    detail-type = ["GuardDuty Finding"]
    detail = {
      severity = [7, 8, 9]  # High and Critical
    }
  })
}

resource "aws_cloudwatch_event_target" "lambda" {
  rule      = aws_cloudwatch_event_rule.guardduty_findings.name
  target_id = "SendToLambda"
  arn       = aws_lambda_function.security_response.arn
}</div>

                <div class="warning-box">
                    <strong>ê¶Œì¥ ì‚¬í•­:</strong> GuardDutyì™€ Security HubëŠ” ëª¨ë“  ë¦¬ì „ì—ì„œ í™œì„±í™”í•˜ê³ , ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬ë¥¼ ìœ„í•´ delegated administratorë¥¼ ì„¤ì •í•˜ì„¸ìš”.
                </div>
            </section>

            <!-- Section 7: ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ -->
            <section id="application">
                <h2>7. ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ</h2>
                
                <h3>AWS WAF (Web Application Firewall)</h3>
                
                <h4>í•µì‹¬ WAF ê·œì¹™ ì„¸íŠ¸</h4>
                <table>
                    <thead>
                        <tr>
                            <th>ê·œì¹™ ìœ í˜•</th>
                            <th>ì„¤ëª…</th>
                            <th>ìš°ì„ ìˆœìœ„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Rate Limiting</td>
                            <td>IPë‹¹ ìš”ì²­ ìˆ˜ ì œí•œ (DDoS ë°©ì–´)</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>SQL Injection</td>
                            <td>SQL ì¸ì ì…˜ ê³µê²© íŒ¨í„´ ì°¨ë‹¨</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>XSS (Cross-Site Scripting)</td>
                            <td>í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìŠ¤í¬ë¦½íŒ… ë°©ì–´</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>Geo Blocking</td>
                            <td>íŠ¹ì • êµ­ê°€/ì§€ì—­ ì°¨ë‹¨</td>
                            <td>ì¤‘ê°„</td>
                        </tr>
                        <tr>
                            <td>Bot Control</td>
                            <td>ì•…ì„± ë´‡ íƒì§€ ë° ê´€ë¦¬</td>
                            <td>ì¤‘ê°„</td>
                        </tr>
                        <tr>
                            <td>IP Reputation</td>
                            <td>ì•Œë ¤ì§„ ì•…ì„± IP ì°¨ë‹¨</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                    </tbody>
                </table>

                <h4>AWS Managed Rules í™œìš©</h4>
                <div class="code-block"># WAF v2 êµ¬ì„± ì˜ˆì‹œ (Terraform)
resource "aws_wafv2_web_acl" "main" {
  name  = "web-acl-production"
  scope = "REGIONAL"

  default_action {
    allow {}
  }

  # Core Rule Set (CRS)
  rule {
    name     = "AWS-AWSManagedRulesCommonRuleSet"
    priority = 1

    override_action {
      none {}
    }

    statement {
      managed_rule_group_statement {
        vendor_name = "AWS"
        name        = "AWSManagedRulesCommonRuleSet"
      }
    }

    visibility_config {
      cloudwatch_metrics_enabled = true
      metric_name                = "AWSManagedRulesCommonRuleSetMetric"
      sampled_requests_enabled   = true
    }
  }

  # Rate Limiting
  rule {
    name     = "RateLimitRule"
    priority = 2

    action {
      block {}
    }

    statement {
      rate_based_statement {
        limit              = 2000
        aggregate_key_type = "IP"
      }
    }

    visibility_config {
      cloudwatch_metrics_enabled = true
      metric_name                = "RateLimitMetric"
      sampled_requests_enabled   = true
    }
  }
}</div>

                <h3>AWS Shield</h3>
                <ul>
                    <li><strong>Shield Standard</strong>: ëª¨ë“  AWS ê³ ê°ì—ê²Œ ìë™ ì œê³µë˜ëŠ” L3/L4 DDoS ë°©ì–´</li>
                    <li><strong>Shield Advanced</strong>:
                        <ul>
                            <li>ê³ ê¸‰ DDoS ë°©ì–´ (L7 í¬í•¨)</li>
                            <li>24/7 DDoS Response Team (DRT) ì§€ì›</li>
                            <li>ë¹„ìš© ë³´í˜¸ (DDoS ê³µê²© ì‹œ ìŠ¤ì¼€ì¼ë§ ë¹„ìš© í™˜ë¶ˆ)</li>
                            <li>ì‹¤ì‹œê°„ ê³µê²© ì•Œë¦¼ ë° ìƒì„¸ ë¦¬í¬íŠ¸</li>
                        </ul>
                    </li>
                </ul>

                <h3>ì‹œí¬ë¦¿ ê´€ë¦¬ (Secrets Management)</h3>
                
                <h4>AWS Secrets Manager</h4>
                <ul>
                    <li>ë°ì´í„°ë² ì´ìŠ¤ ìê²© ì¦ëª… ìë™ ë¡œí…Œì´ì…˜</li>
                    <li>API í‚¤, OAuth í† í° ë“± ì•ˆì „í•œ ì €ì¥</li>
                    <li>ì„¸ë°€í•œ ì•¡ì„¸ìŠ¤ ì œì–´ (IAM ì •ì±…)</li>
                    <li>ì•”í˜¸í™” ë° ê°ì‚¬ ë¡œê¹…</li>
                </ul>

                <h4>Systems Manager Parameter Store</h4>
                <ul>
                    <li>ê³„ì¸µì  íŒŒë¼ë¯¸í„° êµ¬ì¡°</li>
                    <li>ë¬´ë£Œ í‹°ì–´ ì œê³µ (í‘œì¤€ íŒŒë¼ë¯¸í„°)</li>
                    <li>KMS ì•”í˜¸í™” ì§€ì›</li>
                    <li>ë²„ì „ ê´€ë¦¬</li>
                </ul>

                <div class="warning-box">
                    <strong>ì ˆëŒ€ ê¸ˆì§€:</strong> 
                    <ul style="margin-top: 10px;">
                        <li>ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì— ìê²© ì¦ëª… í•˜ë“œì½”ë”©</li>
                        <li>í™˜ê²½ ë³€ìˆ˜ì— í‰ë¬¸ìœ¼ë¡œ ì €ì¥</li>
                        <li>Git ì €ì¥ì†Œì— ì‹œí¬ë¦¿ ì»¤ë°‹</li>
                        <li>ì¥ê¸° ì•¡ì„¸ìŠ¤ í‚¤ ì‚¬ìš© (IAM Role ì‚¬ìš© ê¶Œì¥)</li>
                    </ul>
                </div>

                <h3>ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€</h3>
                <div class="code-block"># Secrets Manager ì‚¬ìš© ì˜ˆì‹œ (Python)
import boto3
import json

def get_secret():
    secret_name = "prod/database/credentials"
    region_name = "us-east-1"

    session = boto3.session.Session()
    client = session.client(
        service_name='secretsmanager',
        region_name=region_name
    )

    try:
        get_secret_value_response = client.get_secret_value(
            SecretId=secret_name
        )
    except ClientError as e:
        raise e

    secret = json.loads(get_secret_value_response['SecretString'])
    return secret

# ì‚¬ìš©
db_credentials = get_secret()
username = db_credentials['username']
password = db_credentials['password']</div>
            </section>

            <!-- Section 8: ì»´í”Œë¼ì´ì–¸ìŠ¤ ë° ê±°ë²„ë„ŒìŠ¤ -->
            <section id="compliance">
                <h2>8. ì»´í”Œë¼ì´ì–¸ìŠ¤ ë° ê±°ë²„ë„ŒìŠ¤</h2>
                
                <h3>AWS Config</h3>
                
                <h4>í•µì‹¬ Config ê·œì¹™</h4>
                <table>
                    <thead>
                        <tr>
                            <th>ê·œì¹™</th>
                            <th>ì ê²€ ë‚´ìš©</th>
                            <th>ì‹¬ê°ë„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>encrypted-volumes</td>
                            <td>EBS ë³¼ë¥¨ ì•”í˜¸í™” ì—¬ë¶€</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>s3-bucket-public-read-prohibited</td>
                            <td>S3 ë²„í‚· ê³µê°œ ì½ê¸° ì°¨ë‹¨</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>rds-storage-encrypted</td>
                            <td>RDS ì¸ìŠ¤í„´ìŠ¤ ì•”í˜¸í™”</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>iam-user-unused-credentials-check</td>
                            <td>ë¯¸ì‚¬ìš© IAM ìê²© ì¦ëª…</td>
                            <td>ì¤‘ê°„</td>
                        </tr>
                        <tr>
                            <td>restricted-ssh</td>
                            <td>SSH í¬íŠ¸(22) ì „ì²´ ê°œë°© ì—¬ë¶€</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                        <tr>
                            <td>cloudtrail-enabled</td>
                            <td>CloudTrail í™œì„±í™” ì—¬ë¶€</td>
                            <td>ë†’ìŒ</td>
                        </tr>
                    </tbody>
                </table>

                <h4>ìë™ ì¤€ìˆ˜ ì ê²€ ë° êµì •</h4>
                <div class="architecture-diagram">AWS Config Rule ìœ„ë°˜ ê°ì§€
         â†“
Systems Manager Automation
         â†“
ìë™ êµì • ì‘ì—… ì‹¤í–‰
    (ì˜ˆ: ê³µê°œ S3 ë²„í‚· ë¹„ê³µê°œë¡œ ë³€ê²½)
         â†“
SNS ì•Œë¦¼ ë°œì†¡
         â†“
Security Hubì— ê²°ê³¼ ì „ì†¡</div>

                <h3>ê°ì‚¬ ë° ë¡œê¹…</h3>
                
                <h4>AWS CloudTrail êµ¬ì„±</h4>
                <ul>
                    <li><strong>ë‹¤ì¤‘ ë¦¬ì „ ì¶”ì </strong>: ëª¨ë“  ë¦¬ì „ì˜ ì´ë²¤íŠ¸ ê¸°ë¡</li>
                    <li><strong>ì¡°ì§ ì¶”ì </strong>: Organizationsì˜ ëª¨ë“  ê³„ì • ë¡œê·¸ ì¤‘ì•™ ì§‘ì¤‘</li>
                    <li><strong>ë¡œê·¸ íŒŒì¼ ë¬´ê²°ì„± ê²€ì¦</strong>: ë¡œê·¸ ë³€ì¡° íƒì§€</li>
                    <li><strong>S3 ë²„í‚· ë³´ì•ˆ</strong>:
                        <ul>
                            <li>ë²„í‚· ì•”í˜¸í™” (SSE-KMS)</li>
                            <li>MFA Delete í™œì„±í™”</li>
                            <li>ë²„í‚· ì •ì±…ìœ¼ë¡œ ì‚­ì œ ë°©ì§€</li>
                            <li>ê°ì²´ ì ê¸ˆ (WORM)</li>
                        </ul>
                    </li>
                </ul>

                <h4>CloudTrail S3 ë²„í‚· ì •ì±… ì˜ˆì‹œ</h4>
                <div class="code-block">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AWSCloudTrailAclCheck",
      "Effect": "Allow",
      "Principal": {
        "Service": "cloudtrail.amazonaws.com"
      },
      "Action": "s3:GetBucketAcl",
      "Resource": "arn:aws:s3:::my-cloudtrail-bucket"
    },
    {
      "Sid": "AWSCloudTrailWrite",
      "Effect": "Allow",
      "Principal": {
        "Service": "cloudtrail.amazonaws.com"
      },
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::my-cloudtrail-bucket/*",
      "Condition": {
        "StringEquals": {
          "s3:x-amz-acl": "bucket-owner-full-control"
        }
      }
    },
    {
      "Sid": "DenyUnencryptedObjectUploads",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::my-cloudtrail-bucket/*",
      "Condition": {
        "StringNotEquals": {
          "s3:x-amz-server-side-encryption": "aws:kms"
        }
      }
    },
    {
      "Sid": "DenyInsecureTransport",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:*",
      "Resource": [
        "arn:aws:s3:::my-cloudtrail-bucket",
        "arn:aws:s3:::my-cloudtrail-bucket/*"
      ],
      "Condition": {
        "Bool": {
          "aws:SecureTransport": "false"
        }
      }
    }
  ]
}</div>

                <h3>ì»´í”Œë¼ì´ì–¸ìŠ¤ í”„ë ˆì„ì›Œí¬</h3>
                <ul>
                    <li><strong>CIS AWS Foundations Benchmark</strong>: ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€ ì²´í¬ë¦¬ìŠ¤íŠ¸</li>
                    <li><strong>PCI-DSS</strong>: ì¹´ë“œ ê²°ì œ ë°ì´í„° ë³´ì•ˆ í‘œì¤€</li>
                    <li><strong>HIPAA</strong>: ì˜ë£Œ ì •ë³´ ë³´í˜¸ ê·œì •</li>
                    <li><strong>GDPR</strong>: EU ê°œì¸ì •ë³´ ë³´í˜¸ ê·œì •</li>
                    <li><strong>SOC 2</strong>: ì„œë¹„ìŠ¤ ì¡°ì§ í†µì œ ë³´ê³ ì„œ</li>
                </ul>

                <div class="info-box">
                    <strong>AWS Artifact:</strong> AWSì˜ ì»´í”Œë¼ì´ì–¸ìŠ¤ ë³´ê³ ì„œ ë° ê³„ì•½ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆëŠ” ì…€í”„ ì„œë¹„ìŠ¤ í¬í„¸ì…ë‹ˆë‹¤. ISO ì¸ì¦ì„œ, SOC ë³´ê³ ì„œ ë“±ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </div>
            </section>

            <!-- Section 9: ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ -->
            <section id="incident">
                <h2>9. ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ í”Œë ˆì´ë¶</h2>
                
                <h3>ìë™í™”ëœ ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ ì›Œí¬í”Œë¡œìš°</h3>
                
                <h4>ì‹œë‚˜ë¦¬ì˜¤ 1: ì˜ì‹¬ìŠ¤ëŸ¬ìš´ IAM í™œë™ íƒì§€</h4>
                <div class="architecture-diagram">1. GuardDuty: UnauthorizedAccess:IAMUser/InstanceCredentialExfiltration
         â†“
2. EventBridge ê·œì¹™ íŠ¸ë¦¬ê±°
         â†“
3. Lambda í•¨ìˆ˜ ì‹¤í–‰
         â†“
4. ìë™ ëŒ€ì‘ ì‘ì—…:
   â”œâ”€ IAM ì‚¬ìš©ì/ì—­í•  ì •ì±… ê²©ë¦¬ (ê¶Œí•œ ì œê±°)
   â”œâ”€ ì•¡ì„¸ìŠ¤ í‚¤ ë¹„í™œì„±í™”
   â”œâ”€ SNS/PagerDuty ì•Œë¦¼
   â”œâ”€ JIRA í‹°ì¼“ ìë™ ìƒì„±
   â””â”€ ê´€ë ¨ EC2 ì¸ìŠ¤í„´ìŠ¤ ìŠ¤ëƒ…ìƒ· (í¬ë Œì‹)
         â†“
5. Security Hubì— ì¡°ì‚¬ ê²°ê³¼ ê¸°ë¡
         â†“
6. Detectiveë¡œ ìƒì„¸ ë¶„ì„</div>

                <h4>Lambda ìë™ ëŒ€ì‘ í•¨ìˆ˜ ì˜ˆì‹œ</h4>
                <div class="code-block">import boto3
import json

iam = boto3.client('iam')
sns = boto3.client('sns')

def lambda_handler(event, context):
    # GuardDuty ì´ë²¤íŠ¸ íŒŒì‹±
    finding = event['detail']
    severity = finding['severity']
    finding_type = finding['type']
    
    # ë†’ì€ ì‹¬ê°ë„ë§Œ ì²˜ë¦¬
    if severity >= 7:
        # ì˜í–¥ë°›ì€ IAM ì‚¬ìš©ì ì¶”ì¶œ
        if 'resource' in finding:
            resource = finding['resource']
            if resource['resourceType'] == 'AccessKey':
                access_key_id = resource['accessKeyDetails']['accessKeyId']
                user_name = resource['accessKeyDetails']['userName']
                
                # 1. ì•¡ì„¸ìŠ¤ í‚¤ ë¹„í™œì„±í™”
                try:
                    iam.update_access_key(
                        UserName=user_name,
                        AccessKeyId=access_key_id,
                        Status='Inactive'
                    )
                    print(f"Disabled access key: {access_key_id}")
                except Exception as e:
                    print(f"Error disabling key: {e}")
                
                # 2. ì‚¬ìš©ì ì •ì±… ê²©ë¦¬
                isolation_policy = {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Effect": "Deny",
                            "Action": "*",
                            "Resource": "*"
                        }
                    ]
                }
                
                try:
                    iam.put_user_policy(
                        UserName=user_name,
                        PolicyName='SecurityIncidentIsolation',
                        PolicyDocument=json.dumps(isolation_policy)
                    )
                    print(f"Isolated user: {user_name}")
                except Exception as e:
                    print(f"Error isolating user: {e}")
                
                # 3. SNS ì•Œë¦¼
                message = f"""
                SECURITY ALERT - High Severity Finding
                
                Type: {finding_type}
                Severity: {severity}
                User: {user_name}
                Access Key: {access_key_id}
                
                Automated Actions Taken:
                - Access key disabled
                - User permissions isolated
                - Incident ticket created
                
                Please investigate immediately.
                """
                
                sns.publish(
                    TopicArn='arn:aws:sns:us-east-1:123456789012:SecurityAlerts',
                    Subject='URGENT: Security Incident Detected',
                    Message=message
                )
    
    return {
        'statusCode': 200,
        'body': json.dumps('Incident response completed')
    }</div>

                <h3>ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ 5ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ë‹¨ê³„</th>
                            <th>í™œë™</th>
                            <th>ë„êµ¬</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1. íƒì§€</td>
                            <td>ë³´ì•ˆ ì´ë²¤íŠ¸ ì‹ë³„ ë° ë¶„ë¥˜</td>
                            <td>GuardDuty, Security Hub, CloudWatch</td>
                        </tr>
                        <tr>
                            <td>2. ê²©ë¦¬</td>
                            <td>ì˜í–¥ë°›ì€ ë¦¬ì†ŒìŠ¤ ë¶„ë¦¬</td>
                            <td>Security Groups, IAM, Lambda</td>
                        </tr>
                        <tr>
                            <td>3. ì¡°ì‚¬</td>
                            <td>ê·¼ë³¸ ì›ì¸ ë° ì˜í–¥ ë²”ìœ„ ë¶„ì„</td>
                            <td>Detective, CloudTrail, VPC Flow Logs</td>
                        </tr>
                        <tr>
                            <td>4. ë³µêµ¬</td>
                            <td>ì•ˆì „í•œ ìƒíƒœë¡œ ë³µì›</td>
                            <td>AWS Backup, Snapshots, CloudFormation</td>
                        </tr>
                        <tr>
                            <td>5. ì‚¬í›„ ê²€í† </td>
                            <td>êµí›ˆ ë„ì¶œ ë° í”„ë¡œì„¸ìŠ¤ ê°œì„ </td>
                            <td>ë¬¸ì„œí™”, í”Œë ˆì´ë¶ ì—…ë°ì´íŠ¸</td>
                        </tr>
                    </tbody>
                </table>

                <h3>í¬ë Œì‹ ì¤€ë¹„</h3>
                <ul>
                    <li><strong>ìŠ¤ëƒ…ìƒ· ìë™í™”</strong>: ì˜ì‹¬ í™œë™ ê°ì§€ ì‹œ EBS ìŠ¤ëƒ…ìƒ· ìë™ ìƒì„±</li>
                    <li><strong>ë¡œê·¸ ë³´ì¡´</strong>: CloudTrail ë¡œê·¸ ìµœì†Œ 1ë…„ ì´ìƒ ë³´ê´€</li>
                    <li><strong>ë©”ëª¨ë¦¬ ë¤í”„</strong>: SSM Run Commandë¥¼ í†µí•œ ì›ê²© ë©”ëª¨ë¦¬ ìˆ˜ì§‘</li>
                    <li><strong>ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½</strong>: VPC Traffic Mirroring í™œìš©</li>
                </ul>

                <div class="warning-box">
                    <strong>ì¤‘ìš”:</strong> ì¸ì‹œë˜íŠ¸ ëŒ€ì‘ í”Œë ˆì´ë¶ì€ ì •ê¸°ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê³  ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤. ìµœì†Œ ë¶„ê¸°ë³„ 1íšŒ ëª¨ì˜ í›ˆë ¨ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
                </div>
            </section>

            <!-- Section 10: ì„œë²„ë¦¬ìŠ¤ ë³´ì•ˆ -->
            <section id="serverless">
                <h2>10. ì„œë²„ë¦¬ìŠ¤ ë³´ì•ˆ</h2>
                
                <h3>AWS Lambda ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€</h3>
                
                <h4>1. ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬</h4>
                <ul>
                    <li><strong>VPC ë‚´ Lambda ì‹¤í–‰</strong>: ë¯¼ê°í•œ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ì‹œ</li>
                    <li><strong>Private Subnet ë°°ì¹˜</strong>: NAT Gatewayë¥¼ í†µí•œ ì¸í„°ë„· ì ‘ê·¼</li>
                    <li><strong>Security Group ìµœì†Œí™”</strong>: í•„ìš”í•œ í¬íŠ¸ë§Œ ê°œë°©</li>
                    <li><strong>VPC Endpoints</strong>: AWS ì„œë¹„ìŠ¤ ì ‘ê·¼ ì‹œ í”„ë¼ì´ë¹— ì—°ê²°</li>
                </ul>

                <h4>2. ì½”ë“œ ë³´ì•ˆ</h4>
                <div class="code-block"># Lambda í•¨ìˆ˜ ë³´ì•ˆ êµ¬ì„± ì˜ˆì‹œ (Python)
import os
import boto3
from aws_lambda_powertools import Logger, Tracer
from aws_lambda_powertools.utilities import parameters

logger = Logger()
tracer = Tracer()

# Secrets Managerì—ì„œ ì‹œí¬ë¦¿ ê°€ì ¸ì˜¤ê¸°
def get_database_credentials():
    secret_name = os.environ['DB_SECRET_NAME']
    return parameters.get_secret(secret_name)

@tracer.capture_lambda_handler
@logger.inject_lambda_context
def lambda_handler(event, context):
    # ì…ë ¥ ê²€ì¦
    if 'user_id' not in event:
        logger.error("Missing required parameter: user_id")
        return {
            'statusCode': 400,
            'body': 'Bad Request'
        }
    
    user_id = event['user_id']
    
    # SQL ì¸ì ì…˜ ë°©ì§€: íŒŒë¼ë¯¸í„°í™”ëœ ì¿¼ë¦¬ ì‚¬ìš©
    # XSS ë°©ì§€: ì¶œë ¥ ì¸ì½”ë”©
    # ...
    
    logger.info(f"Processing request for user: {user_id}")
    
    return {
        'statusCode': 200,
        'body': 'Success'
    }</div>

                <h4>3. IAM ê¶Œí•œ ìµœì†Œí™”</h4>
                <div class="code-block"># Lambda ì‹¤í–‰ ì—­í•  (Terraform)
resource "aws_iam_role" "lambda_role" {
  name = "lambda-execution-role"

  assume_role_policy = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Action = "sts:AssumeRole"
        Effect = "Allow"
        Principal = {
          Service = "lambda.amazonaws.com"
        }
      }
    ]
  })
}

# ìµœì†Œ ê¶Œí•œ ì •ì±…
resource "aws_iam_role_policy" "lambda_policy" {
  name = "lambda-policy"
  role = aws_iam_role.lambda_role.id

  policy = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Effect = "Allow"
        Action = [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents"
        ]
        Resource = "arn:aws:logs:*:*:*"
      },
      {
        Effect = "Allow"
        Action = [
          "dynamodb:GetItem",
          "dynamodb:PutItem"
        ]
        Resource = "arn:aws:dynamodb:us-east-1:123456789012:table/MyTable"
      }
    ]
  })
}</div>

                <h4>4. í™˜ê²½ ë³€ìˆ˜ ì•”í˜¸í™”</h4>
                <ul>
                    <li>KMSë¥¼ ì‚¬ìš©í•œ í™˜ê²½ ë³€ìˆ˜ ì•”í˜¸í™”</li>
                    <li>Secrets Manager ë˜ëŠ” Parameter Store ì‚¬ìš© ê¶Œì¥</li>
                    <li>ëŸ°íƒ€ì„ ì‹œ ë³µí˜¸í™”</li>
                </ul>

                <h3>API Gateway ë³´ì•ˆ</h3>
                
                <h4>ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ê³„ì¸µ</h4>
                <div class="architecture-diagram">Client Request
      â†“
[1] AWS WAF (DDoS, SQL Injection ë°©ì–´)
      â†“
[2] API Gateway
      â”œâ”€ Resource Policy (IP ì œí•œ, VPC ì œí•œ)
      â”œâ”€ Usage Plans & API Keys (Rate Limiting)
      â””â”€ Authorizers
          â”œâ”€ Lambda Authorizer (ì»¤ìŠ¤í…€ ë¡œì§)
          â””â”€ Cognito User Pools (OAuth 2.0)
      â†“
[3] Backend (Lambda, ECS, HTTP)
      â†“
Response</div>

                <h4>API Gateway ë³´ì•ˆ ì„¤ì •</h4>
                <table>
                    <thead>
                        <tr>
                            <th>ë³´ì•ˆ ê¸°ëŠ¥</th>
                            <th>ì„¤ëª…</th>
                            <th>ì‚¬ìš© ì‚¬ë¡€</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Lambda Authorizer</td>
                            <td>ì»¤ìŠ¤í…€ ì¸ì¦ ë¡œì§ ì‹¤í–‰</td>
                            <td>JWT ê²€ì¦, ì™¸ë¶€ IdP í†µí•©</td>
                        </tr>
                        <tr>
                            <td>Cognito User Pools</td>
                            <td>ì™„ì „ ê´€ë¦¬í˜• ì‚¬ìš©ì ì¸ì¦</td>
                            <td>í‘œì¤€ OAuth 2.0/OIDC</td>
                        </tr>
                        <tr>
                            <td>IAM Authentication</td>
                            <td>AWS ìê²© ì¦ëª… ê¸°ë°˜</td>
                            <td>ë‚´ë¶€ ì„œë¹„ìŠ¤ ê°„ í†µì‹ </td>
                        </tr>
                        <tr>
                            <td>API Keys</td>
                            <td>ê°„ë‹¨í•œ í‚¤ ê¸°ë°˜ ì ‘ê·¼</td>
                            <td>íŒŒíŠ¸ë„ˆ API, ì‚¬ìš©ëŸ‰ ì¶”ì </td>
                        </tr>
                        <tr>
                            <td>Resource Policies</td>
                            <td>ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ ì ‘ê·¼ ì œì–´</td>
                            <td>VPC/IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸</td>
                        </tr>
                    </tbody>
                </table>

                <h4>API Gateway Lambda Authorizer ì˜ˆì‹œ</h4>
                <div class="code-block">import jwt
import os

def lambda_handler(event, context):
    token = event['authorizationToken']
    
    try:
        # JWT í† í° ê²€ì¦
        decoded = jwt.decode(
            token,
            os.environ['JWT_SECRET'],
            algorithms=['HS256']
        )
        
        # ì •ì±… ìƒì„±
        policy = generate_policy(
            decoded['sub'],  # principalId
            'Allow',
            event['methodArn']
        )
        
        # ì»¨í…ìŠ¤íŠ¸ì— ì‚¬ìš©ì ì •ë³´ ì¶”ê°€
        policy['context'] = {
            'userId': decoded['sub'],
            'email': decoded['email'],
            'role': decoded['role']
        }
        
        return policy
    
    except jwt.ExpiredSignatureError:
        raise Exception('Unauthorized: Token expired')
    except jwt.InvalidTokenError:
        raise Exception('Unauthorized: Invalid token')

def generate_policy(principal_id, effect, resource):
    return {
        'principalId': principal_id,
        'policyDocument': {
            'Version': '2012-10-17',
            'Statement': [
                {
                    'Action': 'execute-api:Invoke',
                    'Effect': effect,
                    'Resource': resource
                }
            ]
        }
    }</div>

                <h3>ì„œë²„ë¦¬ìŠ¤ ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
                <ul class="checklist">
                    <li>Lambda í•¨ìˆ˜ì— ìµœì†Œ ê¶Œí•œ IAM ì—­í•  í• ë‹¹</li>
                    <li>í™˜ê²½ ë³€ìˆ˜ ì•”í˜¸í™” í™œì„±í™”</li>
                    <li>VPC ë‚´ Lambda ë°°ì¹˜ (í•„ìš”ì‹œ)</li>
                    <li>Dead Letter Queue (DLQ) êµ¬ì„±</li>
                    <li>Reserved Concurrency ì„¤ì • (DoS ë°©ì§€)</li>
                    <li>X-Ray ì¶”ì  í™œì„±í™”</li>
                    <li>CloudWatch Logs ì•”í˜¸í™”</li>
                    <li>API Gatewayì— WAF ì—°ê²°</li>
                    <li>Rate Limiting ë° Throttling ì„¤ì •</li>
                    <li>CORS ì •ì±… ì—„ê²©íˆ êµ¬ì„±</li>
                </ul>
            </section>

            <!-- Section 11: ì»¨í…Œì´ë„ˆ ë³´ì•ˆ -->
            <section id="container">
                <h2>11. ì»¨í…Œì´ë„ˆ ë³´ì•ˆ</h2>
                
                <h3>Amazon EKS ë³´ì•ˆ ì•„í‚¤í…ì³</h3>
                
                <h4>ë‹¤ì¸µ ë³´ì•ˆ ê³„ì¸µ</h4>
                <div class="architecture-diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pod Security Standards (PSS)           â”‚
â”‚  - Baseline, Restricted Policies        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Network Policies (Calico/Cilium)       â”‚
â”‚  - Pod-to-Pod íŠ¸ë˜í”½ ì œì–´               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IRSA (IAM Roles for Service Accounts)  â”‚
â”‚  - Podë³„ ì„¸ë°€í•œ ê¶Œí•œ ê´€ë¦¬               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Secrets Management                      â”‚
â”‚  - External Secrets Operator            â”‚
â”‚  - AWS Secrets Manager í†µí•©             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Image Scanning (ECR)                    â”‚
â”‚  - ë¹Œë“œ ì‹œ ì·¨ì•½ì  ìŠ¤ìº”                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

                <h3>ì£¼ìš” ì»¨í…Œì´ë„ˆ ë³´ì•ˆ ë„êµ¬</h3>
                
                <h4>1. Amazon ECR Image Scanning</h4>
                <ul>
                    <li><strong>Basic Scanning</strong>: Clair ê¸°ë°˜ ì·¨ì•½ì  ìŠ¤ìº”</li>
                    <li><strong>Enhanced Scanning</strong>: Amazon Inspector í†µí•©, ì§€ì†ì  ìŠ¤ìº”</li>
                    <li><strong>ìŠ¤ìº” ì •ì±…</strong>: í‘¸ì‹œ ì‹œ ìë™ ìŠ¤ìº” ë˜ëŠ” ìŠ¤ì¼€ì¤„ ê¸°ë°˜</li>
                    <li><strong>CVE ë°ì´í„°ë² ì´ìŠ¤</strong>: ìµœì‹  ì·¨ì•½ì  ì •ë³´ ìë™ ì—…ë°ì´íŠ¸</li>
                </ul>

                <div class="code-block"># ECR ë¦¬í¬ì§€í† ë¦¬ ìƒì„± ë° ìŠ¤ìº” ì„¤ì • (Terraform)
resource "aws_ecr_repository" "app" {
  name                 = "my-application"
  image_tag_mutability = "IMMUTABLE"

  image_scanning_configuration {
    scan_on_push = true
  }

  encryption_configuration {
    encryption_type = "KMS"
    kms_key        = aws_kms_key.ecr.arn
  }
}

# ë¼ì´í”„ì‚¬ì´í´ ì •ì±… (ì˜¤ë˜ëœ ì´ë¯¸ì§€ ìë™ ì‚­ì œ)
resource "aws_ecr_lifecycle_policy" "app" {
  repository = aws_ecr_repository.app.name

  policy = jsonencode({
    rules = [
      {
        rulePriority = 1
        description  = "Keep last 10 images"
        selection = {
          tagStatus   = "any"
          countType   = "imageCountMoreThan"
          countNumber = 10
        }
        action = {
          type = "expire"
        }
      }
    ]
  })
}</div>

                <h4>2. Falco - ëŸ°íƒ€ì„ ë³´ì•ˆ ëª¨ë‹ˆí„°ë§</h4>
                <ul>
                    <li>ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ì½œ ëª¨ë‹ˆí„°ë§</li>
                    <li>ë¹„ì •ìƒ í–‰ìœ„ íƒì§€ (íŒŒì¼ ì ‘ê·¼, í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ë“±)</li>
                    <li>ì‚¬ì „ ì •ì˜ëœ ë³´ì•ˆ ê·œì¹™</li>
                    <li>Kubernetes ì´ë²¤íŠ¸ í†µí•©</li>
                </ul>

                <div class="code-block"># Falco ê·œì¹™ ì˜ˆì‹œ
- rule: Unauthorized Process in Container
  desc: Detect unexpected process in container
  condition: >
    spawned_process and 
    container and 
    not proc.name in (allowed_processes)
  output: >
    Unauthorized process started in container 
    (user=%user.name command=%proc.cmdline container=%container.name 
    image=%container.image.repository)
  priority: WARNING

- rule: Write below root
  desc: Attempt to write to root filesystem
  condition: >
    open_write and 
    container and 
    fd.name startswith /
  output: >
    Write attempt to root filesystem 
    (user=%user.name command=%proc.cmdline file=%fd.name)
  priority: ERROR</div>

                <h4>3. OPA/Gatekeeper - ì •ì±… ê¸°ë°˜ ê±°ë²„ë„ŒìŠ¤</h4>
                <ul>
                    <li>Admission Controllerë¥¼ í†µí•œ ì •ì±… ê°•ì œ</li>
                    <li>ì„ ì–¸ì  ì •ì±… ì •ì˜ (Rego ì–¸ì–´)</li>
                    <li>ë¦¬ì†ŒìŠ¤ ìƒì„± ì‹œ ìë™ ê²€ì¦</li>
                </ul>

                <div class="code-block"># Gatekeeper Constraint Template ì˜ˆì‹œ
apiVersion: templates.gatekeeper.sh/v1
kind: ConstraintTemplate
metadata:
  name: k8srequiredlabels
spec:
  crd:
    spec:
      names:
        kind: K8sRequiredLabels
      validation:
        openAPIV3Schema:
          type: object
          properties:
            labels:
              type: array
              items:
                type: string
  targets:
    - target: admission.k8s.gatekeeper.sh
      rego: |
        package k8srequiredlabels
        
        violation[{"msg": msg, "details": {"missing_labels": missing}}] {
          provided := {label | input.review.object.metadata.labels[label]}
          required := {label | label := input.parameters.labels[_]}
          missing := required - provided
          count(missing) > 0
          msg := sprintf("You must provide labels: %v", [missing])
        }

---
# Constraint ì ìš©
apiVersion: constraints.gatekeeper.sh/v1beta1
kind: K8sRequiredLabels
metadata:
  name: pod-must-have-labels
spec:
  match:
    kinds:
      - apiGroups: [""]
        kinds: ["Pod"]
  parameters:
    labels:
      - "app"
      - "environment"
      - "owner"</div>

                <h3>IRSA (IAM Roles for Service Accounts)</h3>
                <div class="code-block"># ServiceAccount ìƒì„±
apiVersion: v1
kind: ServiceAccount
metadata:
  name: my-app-sa
  namespace: production
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::123456789012:role/my-app-role

---
# Podì—ì„œ ServiceAccount ì‚¬ìš©
apiVersion: v1
kind: Pod
metadata:
  name: my-app
  namespace: production
spec:
  serviceAccountName: my-app-sa
  containers:
  - name: app
    image: my-app:latest
    # ì´ì œ PodëŠ” IAM ì—­í• ì˜ ê¶Œí•œì„ ìë™ìœ¼ë¡œ ì‚¬ìš©
    # AWS SDKê°€ ìë™ìœ¼ë¡œ ì„ì‹œ ìê²© ì¦ëª… íšë“</div>

                <h3>ì»¨í…Œì´ë„ˆ ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€</h3>
                <ul class="checklist">
                    <li>ìµœì†Œ ê¶Œí•œ ì›ì¹™ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ (non-root ì‚¬ìš©ì)</li>
                    <li>ì½ê¸° ì „ìš© ë£¨íŠ¸ íŒŒì¼ì‹œìŠ¤í…œ ì‚¬ìš©</li>
                    <li>ë¶ˆí•„ìš”í•œ Linux Capabilities ì œê±°</li>
                    <li>ë¦¬ì†ŒìŠ¤ ì œí•œ (CPU, Memory) ì„¤ì •</li>
                    <li>í”„ë¼ì´ë¹— ECR ë¦¬í¬ì§€í† ë¦¬ ì‚¬ìš©</li>
                    <li>ì´ë¯¸ì§€ ì„œëª… ë° ê²€ì¦ (Notary/Cosign)</li>
                    <li>Network Policiesë¡œ Pod ê°„ íŠ¸ë˜í”½ ì œí•œ</li>
                    <li>Pod Security Standards ì ìš©</li>
                    <li>ì •ê¸°ì ì¸ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸ ë° ì¬ë°°í¬</li>
                    <li>Secretsì„ í™˜ê²½ ë³€ìˆ˜ ëŒ€ì‹  íŒŒì¼ë¡œ ë§ˆìš´íŠ¸</li>
                </ul>

                <h3>ë³´ì•ˆ ê°•í™”ëœ Pod ëª…ì„¸ ì˜ˆì‹œ</h3>
                <div class="code-block">apiVersion: v1
kind: Pod
metadata:
  name: secure-pod
  labels:
    app: secure-app
spec:
  serviceAccountName: my-app-sa
  securityContext:
    runAsNonRoot: true
    runAsUser: 1000
    fsGroup: 2000
    seccompProfile:
      type: RuntimeDefault
  
  containers:
  - name: app
    image: 123456789012.dkr.ecr.us-east-1.amazonaws.com/my-app:v1.2.3
    
    securityContext:
      allowPrivilegeEscalation: false
      readOnlyRootFilesystem: true
      capabilities:
        drop:
          - ALL
    
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "200m"
    
    volumeMounts:
    - name: tmp
      mountPath: /tmp
    - name: secrets
      mountPath: /etc/secrets
      readOnly: true
  
  volumes:
  - name: tmp
    emptyDir: {}
  - name: secrets
    csi:
      driver: secrets-store.csi.k8s.io
      readOnly: true
      volumeAttributes:
        secretProviderClass: "aws-secrets"</div>
            </section>

            <!-- Section 12: ìë™í™” ë° IaC -->
            <section id="automation">
                <h2>12. ìë™í™” ë° Infrastructure as Code</h2>
                
                <h3>ë³´ì•ˆ ìë™í™”ì˜ ì¤‘ìš”ì„±</h3>
                <div class="info-box">
                    <strong>DevSecOps ì›ì¹™:</strong> ë³´ì•ˆì„ ê°œë°œ íŒŒì´í”„ë¼ì¸ì˜ ëª¨ë“  ë‹¨ê³„ì— í†µí•©í•˜ì—¬ "Shift Left" ì ‘ê·¼ ë°©ì‹ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
                </div>

                <h3>Terraform ë³´ì•ˆ ë² ì´ìŠ¤ë¼ì¸ ëª¨ë“ˆ</h3>
                <div class="code-block"># modules/security-baseline/main.tf
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

# GuardDuty í™œì„±í™”
resource "aws_guardduty_detector" "main" {
  enable                       = var.enable_guardduty
  finding_publishing_frequency = "FIFTEEN_MINUTES"
  
  datasources {
    s3_logs {
      enable = true
    }
    kubernetes {
      audit_logs {
        enable = true
      }
    }
    malware_protection {
      scan_ec2_instance_with_findings {
        ebs_volumes {
          enable = true
        }
      }
    }
  }

  tags = var.tags
}

# Security Hub í™œì„±í™”
resource "aws_securityhub_account" "main" {
  count = var.enable_security_hub ? 1 : 0
}

resource "aws_securityhub_standards_subscription" "cis" {
  count         = var.enable_security_hub ? 1 : 0
  depends_on    = [aws_securityhub_account.main]
  standards_arn = "arn:aws:securityhub:::ruleset/cis-aws-foundations-benchmark/v/1.2.0"
}

resource "aws_securityhub_standards_subscription" "aws_foundational" {
  count         = var.enable_security_hub ? 1 : 0
  depends_on    = [aws_securityhub_account.main]
  standards_arn = "arn:aws:securityhub:${data.aws_region.current.name}::standards/aws-foundational-security-best-practices/v/1.0.0"
}

# AWS Config í™œì„±í™”
resource "aws_config_configuration_recorder" "main" {
  name     = "security-config-recorder"
  role_arn = aws_iam_role.config.arn

  recording_group {
    all_supported = true
    include_global_resources = true
  }
}

resource "aws_config_delivery_channel" "main" {
  name           = "security-config-delivery"
  s3_bucket_name = aws_s3_bucket.config.bucket
  depends_on     = [aws_config_configuration_recorder.main]
}

resource "aws_config_configuration_recorder_status" "main" {
  name       = aws_config_configuration_recorder.main.name
  is_enabled = true
  depends_on = [aws_config_delivery_channel.main]
}

# CloudTrail ë©€í‹° ë¦¬ì „ ì¶”ì 
resource "aws_cloudtrail" "main" {
  name                          = var.cloudtrail_name
  s3_bucket_name                = aws_s3_bucket.cloudtrail.bucket
  include_global_service_events = true
  is_multi_region_trail         = true
  enable_log_file_validation    = true
  
  event_selector {
    read_write_type           = "All"
    include_management_events = true

    data_resource {
      type   = "AWS::S3::Object"
      values = ["arn:aws:s3:::"]
    }

    data_resource {
      type   = "AWS::Lambda::Function"
      values = ["arn:aws:lambda"]
    }
  }

  insight_selector {
    insight_type = "ApiCallRateInsight"
  }

  cloud_watch_logs_group_arn = "${aws_cloudwatch_log_group.cloudtrail.arn}:*"
  cloud_watch_logs_role_arn  = aws_iam_role.cloudtrail_cloudwatch.arn
  kms_key_id                 = aws_kms_key.cloudtrail.arn

  tags = var.tags
}

# S3 ë²„í‚· ì•”í˜¸í™” ë° ë³´ì•ˆ ì„¤ì •
resource "aws_s3_bucket" "cloudtrail" {
  bucket = var.cloudtrail_bucket_name

  tags = var.tags
}

resource "aws_s3_bucket_versioning" "cloudtrail" {
  bucket = aws_s3_bucket.cloudtrail.id

  versioning_configuration {
    status = "Enabled"
  }
}

resource "aws_s3_bucket_server_side_encryption_configuration" "cloudtrail" {
  bucket = aws_s3_bucket.cloudtrail.id

  rule {
    apply_server_side_encryption_by_default {
      sse_algorithm     = "aws:kms"
      kms_master_key_id = aws_kms_key.cloudtrail.arn
    }
  }
}

resource "aws_s3_bucket_public_access_block" "cloudtrail" {
  bucket = aws_s3_bucket.cloudtrail.id

  block_public_acls       = true
  block_public_policy     = true
  ignore_public_acls      = true
  restrict_public_buckets = true
}

# ë¡œê·¸ ë³´ì¡´ ì •ì±…
resource "aws_cloudwatch_log_group" "cloudtrail" {
  name              = "/aws/cloudtrail/${var.cloudtrail_name}"
  retention_in_days = var.log_retention_days
  kms_key_id        = aws_kms_key.cloudwatch.arn

  tags = var.tags
}

# variables.tf
variable "enable_guardduty" {
  description = "Enable GuardDuty"
  type        = bool
  default     = true
}

variable "enable_security_hub" {
  description = "Enable Security Hub"
  type        = bool
  default     = true
}

variable "enable_config" {
  description = "Enable AWS Config"
  type        = bool
  default     = true
}

variable "cloudtrail_name" {
  description = "CloudTrail name"
  type        = string
  default     = "organization-trail"
}

variable "cloudtrail_bucket_name" {
  description = "S3 bucket for CloudTrail logs"
  type        = string
}

variable "log_retention_days" {
  description = "CloudWatch Logs retention in days"
  type        = number
  default     = 365
}

variable "tags" {
  description = "Tags to apply to resources"
  type        = map(string)
  default     = {}
}</div>

                <h3>ì‚¬ìš© ì˜ˆì‹œ</h3>
                <div class="code-block"># main.tf
module "security_baseline" {
  source = "./modules/security-baseline"
  
  enable_guardduty    = true
  enable_security_hub = true
  enable_config       = true
  
  cloudtrail_name        = "production-audit-trail"
  cloudtrail_bucket_name = "my-org-cloudtrail-logs-123456789012"
  log_retention_days     = 365
  
  tags = {
    Environment = "Production"
    ManagedBy   = "Terraform"
    Compliance  = "PCI-DSS"
    CostCenter  = "Security"
  }
}</div>

                <h3>DevSecOps íŒŒì´í”„ë¼ì¸</h3>
                <div class="architecture-diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Code      â”‚  Git Commit
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SAST      â”‚  SonarQube, Semgrep
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ì½”ë“œ ì •ì  ë¶„ì„
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Build     â”‚  Docker Build
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Scan      â”‚  Trivy, Snyk, Grype
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ìŠ¤ìº”
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IaC Scan  â”‚  Checkov, tfsec
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ì¸í”„ë¼ ì½”ë“œ ê²€ì¦
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Deploy    â”‚  ArgoCD, Flux
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DAST      â”‚  OWASP ZAP
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ë™ì  ì• í”Œë¦¬ì¼€ì´ì…˜ ìŠ¤ìº”
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Monitor   â”‚  GuardDuty, Falco
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ëŸ°íƒ€ì„ ë³´ì•ˆ ëª¨ë‹ˆí„°ë§</div>

                <h3>GitHub Actions ë³´ì•ˆ íŒŒì´í”„ë¼ì¸ ì˜ˆì‹œ</h3>
                <div class="code-block">name: Security Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  security-scan:
    runs-on: ubuntu-latest
    
    steps:
    # ì½”ë“œ ì²´í¬ì•„ì›ƒ
    - name: Checkout code
      uses: actions/checkout@v3

    # SAST - ì •ì  ì½”ë“œ ë¶„ì„
    - name: Run Semgrep
      uses: returntocorp/semgrep-action@v1
      with:
        config: >-
          p/security-audit
          p/secrets
          p/owasp-top-ten

    # Secrets ìŠ¤ìº”
    - name: GitGuardian scan
      uses: GitGuardian/ggshield-action@v1
      env:
        GITHUB_PUSH_BEFORE_SHA: ${{ github.event.before }}
        GITHUB_PUSH_BASE_SHA: ${{ github.event.base }}
        GITHUB_DEFAULT_BRANCH: ${{ github.event.repository.default_branch }}
        GITGUARDIAN_API_KEY: ${{ secrets.GITGUARDIAN_API_KEY }}

    # ì˜ì¡´ì„± ì·¨ì•½ì  ìŠ¤ìº”
    - name: Run Snyk
      uses: snyk/actions/node@master
      env:
        SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
      with:
        args: --severity-threshold=high

    # Docker ì´ë¯¸ì§€ ë¹Œë“œ
    - name: Build Docker image
      run: |
        docker build -t myapp:${{ github.sha }} .

    # ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ìŠ¤ìº”
    - name: Run Trivy scanner
      uses: aquasecurity/trivy-action@master
      with:
        image-ref: 'myapp:${{ github.sha }}'
        format: 'sarif'
        output: 'trivy-results.sarif'
        severity: 'CRITICAL,HIGH'

    # SARIF ê²°ê³¼ë¥¼ GitHub Securityì— ì—…ë¡œë“œ
    - name: Upload Trivy results to GitHub Security
      uses: github/codeql-action/upload-sarif@v2
      with:
        sarif_file: 'trivy-results.sarif'

    # Terraform ë³´ì•ˆ ìŠ¤ìº”
    - name: Run tfsec
      uses: aquasecurity/tfsec-action@v1.0.0
      with:
        soft_fail: false

    # Checkov - IaC ë³´ì•ˆ ìŠ¤ìº”
    - name: Run Checkov
      uses: bridgecrewio/checkov-action@master
      with:
        directory: ./terraform
        framework: terraform
        output_format: sarif
        output_file_path: checkov-results.sarif

    # ëª¨ë“  ê²€ì‚¬ í†µê³¼ ì‹œ ECRì— í‘¸ì‹œ
    - name: Configure AWS credentials
      uses: aws-actions/configure-aws-credentials@v2
      with:
        role-to-assume: ${{ secrets.AWS_ROLE_ARN }}
        aws-region: us-east-1

    - name: Login to Amazon ECR
      id: login-ecr
      uses: aws-actions/amazon-ecr-login@v1

    - name: Push to ECR
      env:
        ECR_REGISTRY: ${{ steps.login-ecr.outputs.registry }}
        ECR_REPOSITORY: myapp
        IMAGE_TAG: ${{ github.sha }}
      run: |
        docker tag myapp:$IMAGE_TAG $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG
        docker push $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG</div>

                <h3>ì •ì±… as Code (Policy as Code)</h3>
                <div class="code-block"># OPA Rego ì •ì±… ì˜ˆì‹œ
# terraform_s3_encryption.rego

package terraform.s3

# S3 ë²„í‚·ì€ ë°˜ë“œì‹œ ì•”í˜¸í™”ë˜ì–´ì•¼ í•¨
deny[msg] {
  resource := input.resource.aws_s3_bucket[name]
  not resource.server_side_encryption_configuration
  msg := sprintf("S3 bucket '%s' must have encryption enabled", [name])
}

# ê³µê°œ ì•¡ì„¸ìŠ¤ëŠ” ë°˜ë“œì‹œ ì°¨ë‹¨ë˜ì–´ì•¼ í•¨
deny[msg] {
  resource := input.resource.aws_s3_bucket[name]
  not input.resource.aws_s3_bucket_public_access_block[name]
  msg := sprintf("S3 bucket '%s' must have public access blocked", [name])
}

# ë²„ì „ ê´€ë¦¬ëŠ” ë°˜ë“œì‹œ í™œì„±í™”ë˜ì–´ì•¼ í•¨
deny[msg] {
  resource := input.resource.aws_s3_bucket[name]
  not input.resource.aws_s3_bucket_versioning[name]
  msg := sprintf("S3 bucket '%s' must have versioning enabled", [name])
}</div>

                <h3>ìë™í™” ë„êµ¬ ë¹„êµ</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ë„êµ¬</th>
                            <th>ìš©ë„</th>
                            <th>ì¥ì </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Terraform</td>
                            <td>IaC í”„ë¡œë¹„ì €ë‹</td>
                            <td>ë©€í‹° í´ë¼ìš°ë“œ, í’ë¶€í•œ ìƒíƒœê³„</td>
                        </tr>
                        <tr>
                            <td>CloudFormation</td>
                            <td>AWS ë„¤ì´í‹°ë¸Œ IaC</td>
                            <td>AWS ì„œë¹„ìŠ¤ ë¹ ë¥¸ ì§€ì›</td>
                        </tr>
                        <tr>
                            <td>Checkov</td>
                            <td>IaC ë³´ì•ˆ ìŠ¤ìº”</td>
                            <td>1000+ ë‚´ì¥ ì •ì±…</td>
                        </tr>
                        <tr>
                            <td>tfsec</td>
                            <td>Terraform ë³´ì•ˆ</td>
                            <td>ë¹ ë¥¸ ì†ë„, CI/CD í†µí•©</td>
                        </tr>
                        <tr>
                            <td>Trivy</td>
                            <td>ì´ë¯¸ì§€/IaC ìŠ¤ìº”</td>
                            <td>ì˜¬ì¸ì›, ì˜¤í”ˆì†ŒìŠ¤</td>
                        </tr>
                        <tr>
                            <td>SonarQube</td>
                            <td>ì½”ë“œ í’ˆì§ˆ/ë³´ì•ˆ</td>
                            <td>ìƒì„¸í•œ ë¶„ì„, ëŒ€ì‹œë³´ë“œ</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Section 13: ì§€ì†ì ì¸ ë³´ì•ˆ ê°œì„  -->
            <section>
                <h2>13. ì§€ì†ì ì¸ ë³´ì•ˆ ê°œì„ </h2>
                
                <h3>ë³´ì•ˆ ì„±ìˆ™ë„ ëª¨ë¸</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ë ˆë²¨</th>
                            <th>ì„¤ëª…</th>
                            <th>í•µì‹¬ í™œë™</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1. ê¸°ë³¸</td>
                            <td>ìµœì†Œí•œì˜ ë³´ì•ˆ í†µì œ</td>
                            <td>IAM, ì•”í˜¸í™”, CloudTrail</td>
                        </tr>
                        <tr>
                            <td>2. ê´€ë¦¬</td>
                            <td>ì¡°ì§í™”ëœ ë³´ì•ˆ í”„ë¡œì„¸ìŠ¤</td>
                            <td>GuardDuty, Config, ì •ì±… ë¬¸ì„œí™”</td>
                        </tr>
                        <tr>
                            <td>3. ì •ì˜</td>
                            <td>í‘œì¤€í™”ëœ ë³´ì•ˆ ì ˆì°¨</td>
                            <td>ìë™í™”, IaC, ì •ê¸° ê°ì‚¬</td>
                        </tr>
                        <tr>
                            <td>4. ìµœì í™”</td>
                            <td>ì§€ì†ì  ê°œì„ </td>
                            <td>ë¨¸ì‹ ëŸ¬ë‹, ì˜ˆì¸¡ ë¶„ì„</td>
                        </tr>
                        <tr>
                            <td>5. í˜ì‹ </td>
                            <td>ì—…ê³„ ë¦¬ë”</td>
                            <td>Zero Trust, ììœ¨ ë³´ì•ˆ</td>
                        </tr>
                    </tbody>
                </table>

                <h3>ì •ê¸° ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
                
                <h4>ì›”ê°„ ì ê²€</h4>
                <ul class="checklist">
                    <li>IAM ì‚¬ìš©ì ë° ê¶Œí•œ ê²€í† </li>
                    <li>ë¯¸ì‚¬ìš© ì•¡ì„¸ìŠ¤ í‚¤ ì‹ë³„ ë° ì œê±°</li>
                    <li>Security Hub ì ìˆ˜ í™•ì¸</li>
                    <li>GuardDuty ë°œê²¬ì‚¬í•­ ê²€í† </li>
                    <li>ë¹„ìš© ì´ìƒì¹˜ ë¶„ì„ (ì•”í˜¸í™”í ì±„êµ´ íƒì§€)</li>
                </ul>

                <h4>ë¶„ê¸°ë³„ ì ê²€</h4>
                <ul class="checklist">
                    <li>ì „ì²´ Security Group ê°ì‚¬</li>
                    <li>Network ACL ê·œì¹™ ê²€í† </li>
                    <li>S3 ë²„í‚· ê³µê°œ ì•¡ì„¸ìŠ¤ ìŠ¤ìº”</li>
                    <li>ì•”í˜¸í™” í‚¤ ë¡œí…Œì´ì…˜ í™•ì¸</li>
                    <li>ì¬í•´ ë³µêµ¬ í›ˆë ¨ (Disaster Recovery Drill)</li>
                    <li>ë°±ì—… ë³µì› í…ŒìŠ¤íŠ¸</li>
                </ul>

                <h4>ë°˜ê¸°ë³„ ì ê²€</h4>
                <ul class="checklist">
                    <li>ì¹¨íˆ¬ í…ŒìŠ¤íŠ¸ (Penetration Testing)</li>
                    <li>ì·¨ì•½ì  í‰ê°€ (Vulnerability Assessment)</li>
                    <li>ë³´ì•ˆ ì •ì±… ë¬¸ì„œ ì—…ë°ì´íŠ¸</li>
                    <li>ì§ì› ë³´ì•ˆ êµìœ¡</li>
                    <li>ì‚¬ê³  ëŒ€ì‘ í”Œë ˆì´ë¶ ì‹œë®¬ë ˆì´ì…˜</li>
                </ul>

                <h4>ì—°ê°„ ì ê²€</h4>
                <ul class="checklist">
                    <li>ì „ì²´ ì•„í‚¤í…ì³ ë³´ì•ˆ ë¦¬ë·°</li>
                    <li>ì™¸ë¶€ ë³´ì•ˆ ê°ì‚¬</li>
                    <li>ì»´í”Œë¼ì´ì–¸ìŠ¤ ì¸ì¦ ê°±ì‹ </li>
                    <li>ë³´ì•ˆ ë¡œë“œë§µ ìˆ˜ë¦½</li>
                    <li>ê¸°ìˆ  ë¶€ì±„ í‰ê°€ ë° ê°œì„  ê³„íš</li>
                </ul>

                <h3>ë³´ì•ˆ ë©”íŠ¸ë¦­ (KPI)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ì§€í‘œ</th>
                            <th>ì¸¡ì • ë°©ë²•</th>
                            <th>ëª©í‘œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>í‰ê·  íƒì§€ ì‹œê°„ (MTTD)</td>
                            <td>ìœ„í˜‘ ë°œìƒë¶€í„° íƒì§€ê¹Œì§€</td>
                            <td>&lt; 5ë¶„</td>
                        </tr>
                        <tr>
                            <td>í‰ê·  ëŒ€ì‘ ì‹œê°„ (MTTR)</td>
                            <td>íƒì§€ë¶€í„° ì™„í™”ê¹Œì§€</td>
                            <td>&lt; 15ë¶„</td>
                        </tr>
                        <tr>
                            <td>íŒ¨ì¹˜ ì ìš© ì‹œê°„</td>
                            <td>CVE ê³µê°œë¶€í„° íŒ¨ì¹˜ê¹Œì§€</td>
                            <td>&lt; 30ì¼</td>
                        </tr>
                        <tr>
                            <td>ë¯¸í•´ê²° ë³´ì•ˆ ë°œê²¬ì‚¬í•­</td>
                            <td>Security Hub ë¯¸í•´ê²° ê±´ìˆ˜</td>
                            <td>0 (Critical/High)</td>
                        </tr>
                        <tr>
                            <td>ë³´ì•ˆ êµìœ¡ ì´ìˆ˜ìœ¨</td>
                            <td>ì§ì› êµìœ¡ ì™„ë£Œ ë¹„ìœ¨</td>
                            <td>100%</td>
                        </tr>
                    </tbody>
                </table>

                <h3>ë³´ì•ˆ ë¬¸í™” êµ¬ì¶•</h3>
                <div class="success-box">
                    <strong>ë³´ì•ˆì€ ëª¨ë“  ì‚¬ëŒì˜ ì±…ì„ì…ë‹ˆë‹¤</strong>
                    <ul style="margin-top: 10px;">
                        <li><strong>êµìœ¡</strong>: ì •ê¸°ì ì¸ ë³´ì•ˆ ì¸ì‹ êµìœ¡ ì‹¤ì‹œ</li>
                        <li><strong>ê³µìœ </strong>: ë³´ì•ˆ ì¸ì‹œë˜íŠ¸ í•™ìŠµ ë‚´ìš© ì „ì‚¬ ê³µìœ </li>
                        <li><strong>ë³´ìƒ</strong>: ë³´ì•ˆ ì·¨ì•½ì  ë°œê²¬ ì‹œ ì¸ì„¼í‹°ë¸Œ ì œê³µ</li>
                        <li><strong>íˆ¬ëª…ì„±</strong>: ë³´ì•ˆ ë©”íŠ¸ë¦­ì„ ê³µê°œí•˜ì—¬ ê°œì„  ë™ê¸° ë¶€ì—¬</li>
                        <li><strong>ì§€ì›</strong>: ë³´ì•ˆ ì±”í”¼ì–¸ í”„ë¡œê·¸ë¨ ìš´ì˜</li>
                    </ul>
                </div>
            </section>

            <!-- Section 14: ì°¸ê³  ë¦¬ì†ŒìŠ¤ -->
            <section>
                <h2>14. ì°¸ê³  ë¦¬ì†ŒìŠ¤ ë° ë¬¸ì„œ</h2>
                
                <h3>AWS ê³µì‹ ë¬¸ì„œ</h3>
                <ul>
                    <li><a href="https://aws.amazon.com/architecture/well-architected/" target="_blank">AWS Well-Architected Framework - Security Pillar</a></li>
                    <li><a href="https://docs.aws.amazon.com/security/" target="_blank">AWS Security Documentation</a></li>
                    <li><a href="https://aws.amazon.com/security/security-resources/" target="_blank">AWS Security Resources</a></li>
                    <li><a href="https://aws.amazon.com/compliance/" target="_blank">AWS Compliance Programs</a></li>
                </ul>

                <h3>ë³´ì•ˆ í‘œì¤€ ë° í”„ë ˆì„ì›Œí¬</h3>
                <ul>
                    <li><a href="https://www.cisecurity.org/benchmark/amazon_web_services" target="_blank">CIS AWS Foundations Benchmark</a></li>
                    <li><a href="https://www.nist.gov/cyberframework" target="_blank">NIST Cybersecurity Framework</a></li>
                    <li><a href="https://owasp.org/www-project-top-ten/" target="_blank">OWASP Top 10</a></li>
                    <li><a href="https://www.sans.org/cloud-security/" target="_blank">SANS Cloud Security</a></li>
                </ul>

                <h3>ì˜¤í”ˆì†ŒìŠ¤ ë³´ì•ˆ ë„êµ¬</h3>
                <ul>
                    <li><a href="https://github.com/prowler-cloud/prowler" target="_blank">Prowler - AWS ë³´ì•ˆ í‰ê°€ ë„êµ¬</a></li>
                    <li><a href="https://github.com/bridgecrewio/checkov" target="_blank">Checkov - IaC ë³´ì•ˆ ìŠ¤ìºë„ˆ</a></li>
                    <li><a href="https://github.com/aquasecurity/trivy" target="_blank">Trivy - ì·¨ì•½ì  ìŠ¤ìºë„ˆ</a></li>
                    <li><a href="https://github.com/falcosecurity/falco" target="_blank">Falco - ëŸ°íƒ€ì„ ë³´ì•ˆ</a></li>
                    <li><a href="https://github.com/tfsec/tfsec" target="_blank">tfsec - Terraform ë³´ì•ˆ</a></li>
                </ul>

                <h3>ë³´ì•ˆ ë¸”ë¡œê·¸ ë° ë‰´ìŠ¤</h3>
                <ul>
                    <li><a href="https://aws.amazon.com/blogs/security/" target="_blank">AWS Security Blog</a></li>
                    <li><a href="https://www.schneier.com/" target="_blank">Schneier on Security</a></li>
                    <li><a href="https://krebsonsecurity.com/" target="_blank">Krebs on Security</a></li>
                    <li><a href="https://threatpost.com/" target="_blank">Threatpost</a></li>
                </ul>

                <h3>AWS ë³´ì•ˆ ì„œë¹„ìŠ¤ ìš”ì•½</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ì„œë¹„ìŠ¤</th>
                            <th>ì¹´í…Œê³ ë¦¬</th>
                            <th>ì£¼ìš” ê¸°ëŠ¥</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>IAM</td>
                            <td>ì ‘ê·¼ ê´€ë¦¬</td>
                            <td>ì‚¬ìš©ì ë° ê¶Œí•œ ê´€ë¦¬</td>
                        </tr>
                        <tr>
                            <td>GuardDuty</td>
                            <td>ìœ„í˜‘ íƒì§€</td>
                            <td>ì§€ëŠ¥í˜• ìœ„í˜‘ íƒì§€</td>
                        </tr>
                        <tr>
                            <td>Security Hub</td>
                            <td>ë³´ì•ˆ í†µí•©</td>
                            <td>í†µí•© ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ</td>
                        </tr>
                        <tr>
                            <td>Inspector</td>
                            <td>ì·¨ì•½ì  í‰ê°€</td>
                            <td>ìë™í™”ëœ ë³´ì•ˆ í‰ê°€</td>
                        </tr>
                        <tr>
                            <td>Macie</td>
                            <td>ë°ì´í„° ë³´í˜¸</td>
                            <td>ë¯¼ê° ë°ì´í„° ê²€ìƒ‰</td>
                        </tr>
                        <tr>
                            <td>WAF</td>
                            <td>ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´í˜¸</td>
                            <td>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°©í™”ë²½</td>
                        </tr>
                        <tr>
                            <td>Shield</td>
                            <td>DDoS ë°©ì–´</td>
                            <td>DDoS ê³µê²© ë°©ì–´</td>
                        </tr>
                        <tr>
                            <td>KMS</td>
                            <td>ì•”í˜¸í™”</td>
                            <td>í‚¤ ê´€ë¦¬ ì„œë¹„ìŠ¤</td>
                        </tr>
                        <tr>
                            <td>Secrets Manager</td>
                            <td>ì‹œí¬ë¦¿ ê´€ë¦¬</td>
                            <td>ìê²© ì¦ëª… ì•ˆì „ ì €ì¥</td>
                        </tr>
                        <tr>
                            <td>CloudTrail</td>
                            <td>ê°ì‚¬</td>
                            <td>API í˜¸ì¶œ ê¸°ë¡</td>
                        </tr>
                        <tr>
                            <td>Config</td>
                            <td>ê·œì • ì¤€ìˆ˜</td>
                            <td>ë¦¬ì†ŒìŠ¤ êµ¬ì„± ì¶”ì </td>
                        </tr>
                        <tr>
                            <td>Detective</td>
                            <td>ì¡°ì‚¬</td>
                            <td>ë³´ì•ˆ ì‚¬ê³  ë¶„ì„</td>
                        </tr>
                    </tbody>
                </table>
            </section>

        </main>

        <footer>
            <p>&copy; 2024 AWS Security Architecture Guide</p>
            <p>ì´ ë¬¸ì„œëŠ” êµìœ¡ ëª©ì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œ í™˜ê²½ì— ì ìš© ì‹œ ì¡°ì§ì˜ ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ ì¡°ì •í•˜ì„¸ìš”.</p>
            <p style="margin-top: 10px; font-size: 0.9em;">
                <strong>ì—°ë½ì²˜:</strong> security@example.com | 
                <strong>ë²„ì „:</strong> 1.0 | 
                <strong>ìµœì¢… ì—…ë°ì´íŠ¸:</strong> 2024
            </p>
        </footer>
    </div>

    <a href="#" class="back-to-top">â†‘</a>

    <script>
        // ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Back to top ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
        const backToTopButton = document.querySelector('.back-to-top');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTopButton.style.display = 'flex';
            } else {
                backToTopButton.style.display = 'none';
            }
        });

        // ì´ˆê¸° ìƒíƒœ
        backToTopButton.style.display = 'none';
    </script>
</body>
</html>
```

ì£¼ìš” ê°œì„ ì‚¬í•­:

## âœ¨ ì½”ë“œ ë¸”ë¡ ê°€ë…ì„± ê°œì„ 

1. **í°íŠ¸ ë³€ê²½**: `Consolas`, `Monaco` ë“± ê°€ë…ì„± ì¢‹ì€ ëª¨ë…¸ìŠ¤í˜ì´ìŠ¤ í°íŠ¸ ì‚¬ìš©
2. **í°íŠ¸ í¬ê¸°**: 14pxë¡œ ì ì ˆí•˜ê²Œ ì¡°ì •
3. **ì¤„ ê°„ê²©**: `line-height: 1.6`ìœ¼ë¡œ ë„‰ë„‰í•˜ê²Œ ì„¤ì •
4. **ë°°ê²½ìƒ‰**: ë” ì–´ë‘ìš´ `#1e1e1e` VS Code ìŠ¤íƒ€ì¼
5. **ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼**: ì˜¤ë Œì§€ìƒ‰ ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°”
6. **ì—¬ë°±**: ì¶©ë¶„í•œ íŒ¨ë”©ìœ¼ë¡œ ê°€ë…ì„± í–¥ìƒ
7. **ì™¼ìª½ í…Œë‘ë¦¬**: ì£¼í™©ìƒ‰ ê°•ì¡°ì„  ì¶”ê°€

ì½”ë“œê°€ ì´ì œ ì—¬ëŸ¬ ì¤„ë¡œ ë³´ê¸° ì¢‹ê²Œ í‘œì‹œë©ë‹ˆë‹¤! ì¶”ê°€ ì¡°ì •ì´ í•„ìš”í•˜ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”.
